{
    "name": "Marketo Leads by Source (BETA)",
    "description": "Keep monitoring your opportunity pipeline by segmenting your leads by source. Originates from the Gallery.",
    "sampleFormulas": {
        "d7328147": {
            "txt": "\"20160501\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160501"
                }]
            }
        },
        "54ce2444": {
            "txt": "\"20160531\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": [
                        "20160531"
                    ]
                }]
            }
        },
        "6755ef35": {
            "txt": "\"This Month\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": [
                        "This Month"
                    ]
                }]
            }
        },
        "7b5a5fb2-2": {
            "txt": "array(\"View our amazing Marketo klips.\",\"Read Marketo pre-requisite doc.\",\"Set up required lists in Marketo.\",\"Ready? Add the klip templates\",\"Monitor the leads data.\",\"Enjoy working with Marketo API.\",\"Give us feedback about the klip templates.\",\"Email new concepts.\",\"Contact us for troubleshooting issues.\",\"Spread the word! Marketo everywhere.\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "View our amazing Marketo klips."
                    }, {
                        "t": "l",
                        "v": "Read Marketo pre-requisite doc."
                    }, {
                        "t": "l",
                        "v": "Set up required lists in Marketo."
                    }, {
                        "t": "l",
                        "v": "Ready? Add the klip templates"
                    }, {
                        "t": "l",
                        "v": "Monitor the leads data."
                    }, {
                        "t": "l",
                        "v": "Enjoy working with Marketo API."
                    }, {
                        "t": "l",
                        "v": "Give us feedback about the klip templates."
                    }, {
                        "t": "l",
                        "v": "Email new concepts."
                    }, {
                        "t": "l",
                        "v": "Contact us for troubleshooting issues."
                    }, {
                        "t": "l",
                        "v": "Spread the word! Marketo everywhere."
                    }]
                }]
            }
        },
        "de0ea0b7-4": {
            "txt": "array(\"8962\",\"6544\",\"5122\",\"3239\",\"2212\",\"1610\",\"1510\",\"1422\",\"1399\",\"1302\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "8962"
                    }, {
                        "t": "l",
                        "v": "6544"
                    }, {
                        "t": "l",
                        "v": "5122"
                    }, {
                        "t": "l",
                        "v": "3239"
                    }, {
                        "t": "l",
                        "v": "2212"
                    }, {
                        "t": "l",
                        "v": "1610"
                    }, {
                        "t": "l",
                        "v": "1510"
                    }, {
                        "t": "l",
                        "v": "1422"
                    }, {
                        "t": "l",
                        "v": "1399"
                    }, {
                        "t": "l",
                        "v": "1302"
                    }]
                }]
            }
        },
        "0c63d117-6": {
            "txt": "array(\"8962\",\"6544\",\"5122\",\"3239\",\"2212\",\"1610\",\"1510\",\"1422\",\"1399\",\"1302\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "8962"
                    }, {
                        "t": "l",
                        "v": "6544"
                    }, {
                        "t": "l",
                        "v": "5122"
                    }, {
                        "t": "l",
                        "v": "3239"
                    }, {
                        "t": "l",
                        "v": "2212"
                    }, {
                        "t": "l",
                        "v": "1610"
                    }, {
                        "t": "l",
                        "v": "1510"
                    }, {
                        "t": "l",
                        "v": "1422"
                    }, {
                        "t": "l",
                        "v": "1399"
                    }, {
                        "t": "l",
                        "v": "1302"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "marketo": {
            "service": "marketo",
            "type": "marketo",
            "libraryAlias": "MarketoMCL(Last93Days)",
            "name": "Marketo MCL (Last 93 Days)",
            "description": "Marketing Captured Leads from Marketo for the last 93 days. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/list/{{ds.marketo.MCLID}}/leads.json?fields=timestampMarketingCapturedLead,inferredCountry,leadSource",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        }
    },
    "dsMappings": {
        "marketo": "95254ec72be87e269ac6KavyaMallur9"
    },
    "services": [{
        "service": "marketo"
    }],
    "uiVariables": [{
        "name": "KTdatePicker",
        "value": "This Month"
    }],
    "datasourceConfigModel": [{
        "type": "text",
        "id": "ds.marketo.programName",
        "label": "Program Name",
        "description": "Enter your Marketo Program Name and select your List.",
        "isRequired": true,
        "debounceEnabled": true,
        "onChangeQueries": ["q1"],
        "ghostText": "Klipfolio Lifecycle Performance"
    }, {
        "type": "select",
        "id": "ds.marketo.MCLID",
        "label": "Marketing Captured"
    }],
    "queries": [{
        "id": "q1",
        "errorMessage": "Click <b>Try Again</b> and make sure that you entered right Marketo LaunchPoint Client Secret, Client ID, and REST API URL.",
        "connector": {
            "service": "marketo",
            "type": "marketo",
            "format": "json",
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/lists.json?programName={{ds.marketo.programName}}",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.marketo.MCLID",
            "propField": "options",
            "labels": "/result/name",
            "values": "/result/id"
        }]
    }]
}