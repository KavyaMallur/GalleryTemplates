{
    "name": "Marketo Leads",
    "description": "View the Marketo leads. Originates from the Gallery.",
    "datasources": {
        "marketo-01": {
            "service": "marketo",
            "type": "marketo",
            "libraryAlias": "MarketoMCL(Last93Days)",
            "name": "Marketo MCL (Last 93 Days)",
            "description": "Marketing Captured Leads from Marketo for the last 93 days.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/list/{{ds.marketo.MCLID}}/leads.json?fields=timestampMarketingCapturedLead,inferredCountry,leadSource,Lifecycle_Status__c",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "marketo-02": {
            "service": "marketo",
            "type": "marketo",
            "libraryAlias": "MarketoMQL(Last93Days)",
            "name": "Marketo MQL (Last 93 Days)",
            "description": "Marketing Qualified Leads from Marketo for the last 93 days.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/list/{{ds.marketo.MQLID}}/leads.json?fields=timestampMarketingQualifiedLead,inferredCountry,leadSource,Lifecycle_Status__c",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "marketo-03": {
            "service": "marketo",
            "type": "marketo",
            "libraryAlias": "MarketoSAL(Last93Days)",
            "name": "Marketo SAL (Last 93 Days)",
            "description": "Sales Accepted Leads from Marketo for the last 93 days.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/list/{{ds.marketo.SALID}}/leads.json?fields=timestampSalesAcceptedLead,inferredCountry,leadSource,Lifecycle_Status__c",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "marketo-04": {
            "service": "marketo",
            "type": "marketo",
            "libraryAlias": "MarketoSQL(Last93Days)",
            "name": "Marketo SQL (Last 93 Days)",
            "description": "Sales Qualified Leads from Marketo for the last 93 days.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/list/{{ds.marketo.SQLID}}/leads.json?fields=timestampSalesQualifiedOpportunity,inferredCountry,leadSource,Lifecycle_Status__c",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "marketo-05": {
            "service": "marketo",
            "type": "marketo",
            "libraryAlias": "MarketoWon(Last93Days)",
            "name": "Marketo Won (Last 93 Days)",
            "description": "Won Leads from Marketo for the last 93 days.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/list/{{ds.marketo.customerID}}/leads.json?fields=timestampCustomer,inferredCountry,leadSource,Lifecycle_Status__c",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        }
    },
    "dsMappings": {
        "marketo-01": "95254ec72be87e269ac6KavyaMallur9",
        "marketo-02": "c9059168ddc74ce7278bKavyaMallur9",
        "marketo-03": "9e98296d585f55e81f5fKavyaMallur9",
        "marketo-04": "ca25bf017f8067f1cc85KavyaMallur9",
        "marketo-05": "59e65494cfd97ed86eb9KavyaMallur9"
    },
    "services": [{
        "service": "marketo"
    }],
    "uiVariables": [{
        "name": "KTdatePicker",
        "value": "This Month"
    }],
    "datasourceConfigModel": [{
        "type": "text",
        "id": "ds.marketo.programName",
        "label": "Program Name",
        "description": "Enter your Marketo Program Name",
        "isRequired" : true,
        "debounceEnabled": true,
        "onChangeQueries": ["q1"],
        "ghostText": "Klipfolio Lifecycle Performance"
    },{
        "type": "select",
        "id": "ds.marketo.MCLID",
        "label": "Marketing Captured",
        "description": "Select your Marketo Lists",
        "onChangeQueries": ["q2"]
    },{
        "type": "select",
        "id": "ds.marketo.MQLID",
        "label": "Marketing Qualified",
        "onChangeQueries": ["q3"]
    },{
        "type": "select",
        "id": "ds.marketo.SALID",
        "label": "Sales Accepted",
        "onChangeQueries": ["q4"]
    },{
        "type": "select",
        "id": "ds.marketo.SQLID",
        "label": "Sales Qualified",
        "onChangeQueries": ["q5"]
    },{
        "type": "select",
        "id": "ds.marketo.customerID",
        "label": "Customer"
    }],
    "queries": [{
        "id": "q1",
        "errorMessage": "Please ensure you have provided right marketo access client Secret, client ID, identity URL, and program name.",
        "connector": {
            "service": "marketo",
            "type": "marketo",
            "format": "json",
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/lists.json?programName={{ds.marketo.programName}}",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.marketo.MCLID",
            "propField": "options",
            "labels": "/result/name",
            "values": "/result/id"
        }]
    },{
        "id": "q2",
        "connector": {
            "service": "marketo",
            "type": "marketo",
            "format": "json",
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/lists.json?programName={{ds.marketo.programName}}",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.marketo.MQLID",
            "propField": "options",
            "labels": "/result/name",
            "values": "/result/id"
        }]
    },{
        "id": "q3",
        "connector": {
            "service": "marketo",
            "type": "marketo",
            "format": "json",
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/lists.json?programName={{ds.marketo.programName}}",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.marketo.SALID",
            "propField": "options",
            "labels": "/result/name",
            "values": "/result/id"
        }]
    },{
        "id": "q4",
        "connector": {
            "service": "marketo",
            "type": "marketo",
            "format": "json",
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/lists.json?programName={{ds.marketo.programName}}",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.marketo.SQLID",
            "propField": "options",
            "labels": "/result/name",
            "values": "/result/id"
        }]
    },{
        "id": "q5",
        "connector": {
            "service": "marketo",
            "type": "marketo",
            "format": "json",
            "props": {
                "endpoint_url": "{{auth.marketo.identityURL}}/rest/v1/lists.json?programName={{ds.marketo.programName}}",
                "identity_url": "{{auth.marketo.identityURL}}/identity",
                "oauth_client_id": "{{auth.marketo.clientID}}",
                "oauth_user_secret": "{{auth.marketo.clientSecret}}",
                "oauth_provider_id": "marketo",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.marketo.customerID",
            "propField": "options",
            "labels": "/result/name",
            "values": "/result/id"
        }]
    }]
}