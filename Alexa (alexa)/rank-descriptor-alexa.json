{
    "name" : "Alexa Rank",
    "description" : "Compare your website's popularity rank vs your competitors. Originates from the Gallery.",
    

    "datasources" : {
        "alexa-01" : {
            "service" : "alexa",
            "libraryAlias" : "AlexaRank",
            "name": "Alexa Rank",
            "description" : "Your website's rank. Originates from the Gallery.",
            "type" : "simple_rest",
            "format" : "xml",
            "refreshInterval" : 14400,
            "props" : {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=UrlInfo&ResponseGroup=Rank&SignatureMethod=HmacSHA1&SignatureVersion=2&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.mainUrl}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=UrlInfo&ResponseGroup=Rank&SignatureMethod=HmacSHA1&SignatureVersion=2&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.mainUrl}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        },
        "alexa-02" : {
            "service" : "alexa",
            "libraryAlias" : "AlexaRankCompetitors",
            "name": "Alexa Rank Competitors",
            "description" : "Your competitors website's rank. Originates from the Gallery.",
            "type" : "simple_rest",
            "format" : "xml",
            "refreshInterval" : 14400,
            "props" : {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=UrlInfo&SignatureMethod=HmacSHA1&SignatureVersion=2&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&UrlInfo.1.Url={{ds.alexa.competitorUrl1}}&UrlInfo.2.Url={{ds.alexa.competitorUrl2}}&UrlInfo.3.Url={{ds.alexa.competitorUrl3}}&UrlInfo.Shared.ResponseGroup=Rank&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=UrlInfo&SignatureMethod=HmacSHA1&SignatureVersion=2&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&UrlInfo.1.Url={{ds.alexa.competitorUrl1}}&UrlInfo.2.Url={{ds.alexa.competitorUrl2}}&UrlInfo.3.Url={{ds.alexa.competitorUrl3}}&UrlInfo.Shared.ResponseGroup=Rank\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        }
    },

    "dsMappings" : {
        "alexa-01" : "3112f16665194712b27dnatceewzhere",
        "alexa-02" : "56503ecc588a438a636bnatceewzhere" 
    },

    "services" : [
        {
            "service" : "alexa"
        }
    ],

    "datasourceConfigModel" : [
        {
            "type" : "text",
            "id" : "ds.alexa.mainUrl",
            "label" : "Your company's URL",
            "isRequired" : "true" 
        },
        {
            "type" : "text",
            "id" : "ds.alexa.competitorUrl1",
            "label" : "URL1",
            "description":"Track your competitors rank by entering their URL below.",
            "isRequired" : "true"  
        },
        {
            "type" : "text",
            "id" : "ds.alexa.competitorUrl2",
            "label" : "URL2",
            "isRequired" : "true"  
        },
        {
            "type" : "text",
            "id" : "ds.alexa.competitorUrl3",
            "label" : "URL3",
            "isRequired" : "true"  
        }
    ]
}
