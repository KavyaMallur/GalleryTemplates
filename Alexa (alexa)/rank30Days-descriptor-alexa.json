{
    "name": "Alexa Daily Rank (Last 30 days)",
    "description": "Monitor your website ranking over the past 30 days and compare it to your competitors. Originates from the Gallery.",

    "sampleFormulas": {

        "085366a2-2": {
            "txt": "\"amazingklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "amazingklips.com"
                }]
            }
        },

        "a9b6a7a6-3": {
            "txt": "\"goodklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "goodklips.com"
                }]
            }
        },

        "95526e12-4": {
            "txt": "\"klipstore.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "klipstore.com"
                }]
            }
        },

        "a79cb5ef-6": {
            "txt": "array(\"1414710\",\"1747575\",\"740055\",\"433050\",\"459180\",\"277125\",\"393210\",\"1336500\",\"1076100\",\"507120\",\"357855\",\"434445\",\"394485\",\"554010\",\"1391730\",\"1608690\",\"757635\",\"376575\",\"422505\",\"401580\",\"592860\",\"1141320\",\"1134165\",\"498960\",\"272445\",\"313260\",\"398760\",\"401433\",\"500321\",\"620034\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "1414710"
                    }, {
                        "t": "l",
                        "v": "1747575"
                    }, {
                        "t": "l",
                        "v": "740055"
                    }, {
                        "t": "l",
                        "v": "433050"
                    }, {
                        "t": "l",
                        "v": "459180"
                    }, {
                        "t": "l",
                        "v": "277125"
                    }, {
                        "t": "l",
                        "v": "393210"
                    }, {
                        "t": "l",
                        "v": "1336500"
                    }, {
                        "t": "l",
                        "v": "1076100"
                    }, {
                        "t": "l",
                        "v": "507120"
                    }, {
                        "t": "l",
                        "v": "357855"
                    }, {
                        "t": "l",
                        "v": "434445"
                    }, {
                        "t": "l",
                        "v": "394485"
                    }, {
                        "t": "l",
                        "v": "554010"
                    }, {
                        "t": "l",
                        "v": "1391730"
                    }, {
                        "t": "l",
                        "v": "1608690"
                    }, {
                        "t": "l",
                        "v": "757635"
                    }, {
                        "t": "l",
                        "v": "376575"
                    }, {
                        "t": "l",
                        "v": "422505"
                    }, {
                        "t": "l",
                        "v": "401580"
                    }, {
                        "t": "l",
                        "v": "592860"
                    }, {
                        "t": "l",
                        "v": "1141320"
                    }, {
                        "t": "l",
                        "v": "1134165"
                    }, {
                        "t": "l",
                        "v": "498960"
                    }, {
                        "t": "l",
                        "v": "272445"
                    }, {
                        "t": "l",
                        "v": "313260"
                    }, {
                        "t": "l",
                        "v": "398760"
                    }, {
                        "t": "l",
                        "v": "401433"
                    }, {
                        "t": "l",
                        "v": "500321"
                    }, {
                        "t": "l",
                        "v": "620034"
                    }]
                }]
            }
        },

        "0a2ab2db-1": {
            "txt": "array(\"433920\",\"363165\",\"280500\",\"264120\",\"396420\",\"403695\",\"616050\",\"627030\",\"521970\",\"311955\",\"326835\",\"388815\",\"368895\",\"406740\",\"493425\",\"531360\",\"354810\",\"276075\",\"245265\",\"233625\",\"381450\",\"799995\",\"786690\",\"473565\",\"322950\",\"309690\",\"294870\",\"310455\",\"398032\",\"450986\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "433920"
                    }, {
                        "t": "l",
                        "v": "363165"
                    }, {
                        "t": "l",
                        "v": "280500"
                    }, {
                        "t": "l",
                        "v": "264120"
                    }, {
                        "t": "l",
                        "v": "396420"
                    }, {
                        "t": "l",
                        "v": "403695"
                    }, {
                        "t": "l",
                        "v": "616050"
                    }, {
                        "t": "l",
                        "v": "627030"
                    }, {
                        "t": "l",
                        "v": "521970"
                    }, {
                        "t": "l",
                        "v": "311955"
                    }, {
                        "t": "l",
                        "v": "326835"
                    }, {
                        "t": "l",
                        "v": "388815"
                    }, {
                        "t": "l",
                        "v": "368895"
                    }, {
                        "t": "l",
                        "v": "406740"
                    }, {
                        "t": "l",
                        "v": "493425"
                    }, {
                        "t": "l",
                        "v": "531360"
                    }, {
                        "t": "l",
                        "v": "354810"
                    }, {
                        "t": "l",
                        "v": "276075"
                    }, {
                        "t": "l",
                        "v": "245265"
                    }, {
                        "t": "l",
                        "v": "233625"
                    }, {
                        "t": "l",
                        "v": "381450"
                    }, {
                        "t": "l",
                        "v": "799995"
                    }, {
                        "t": "l",
                        "v": "786690"
                    }, {
                        "t": "l",
                        "v": "473565"
                    }, {
                        "t": "l",
                        "v": "322950"
                    }, {
                        "t": "l",
                        "v": "309690"
                    }, {
                        "t": "l",
                        "v": "294870"
                    }, {
                        "t": "l",
                        "v": "310455"
                    }, {
                        "t": "l",
                        "v": "398032"
                    }, {
                        "t": "l",
                        "v": "450986"
                    }]
                }]
            }
        },

        "9dced969-2": {
            "txt": "array(\"850660\",\"1266248\",\"710160\",\"745894\",\"947344\",\"1065350\",\"1215806\",\"860722\",\"587432\",\"498266\",\"441050\",\"460698\",\"485506\",\"480784\",\"803718\",\"1114738\",\"1556626\",\"1108900\",\"697540\",\"553870\",\"492164\",\"644586\",\"701402\",\"508476\",\"670018\",\"729126\",\"803900\",\"920786\",\"950002\",\"999675\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "850660"
                    }, {
                        "t": "l",
                        "v": "1266248"
                    }, {
                        "t": "l",
                        "v": "710160"
                    }, {
                        "t": "l",
                        "v": "745894"
                    }, {
                        "t": "l",
                        "v": "947344"
                    }, {
                        "t": "l",
                        "v": "1065350"
                    }, {
                        "t": "l",
                        "v": "1215806"
                    }, {
                        "t": "l",
                        "v": "860722"
                    }, {
                        "t": "l",
                        "v": "587432"
                    }, {
                        "t": "l",
                        "v": "498266"
                    }, {
                        "t": "l",
                        "v": "441050"
                    }, {
                        "t": "l",
                        "v": "460698"
                    }, {
                        "t": "l",
                        "v": "485506"
                    }, {
                        "t": "l",
                        "v": "480784"
                    }, {
                        "t": "l",
                        "v": "803718"
                    }, {
                        "t": "l",
                        "v": "1114738"
                    }, {
                        "t": "l",
                        "v": "1556626"
                    }, {
                        "t": "l",
                        "v": "1108900"
                    }, {
                        "t": "l",
                        "v": "697540"
                    }, {
                        "t": "l",
                        "v": "553870"
                    }, {
                        "t": "l",
                        "v": "492164"
                    }, {
                        "t": "l",
                        "v": "644586"
                    }, {
                        "t": "l",
                        "v": "701402"
                    }, {
                        "t": "l",
                        "v": "508476"
                    }, {
                        "t": "l",
                        "v": "670018"
                    }, {
                        "t": "l",
                        "v": "729126"
                    }, {
                        "t": "l",
                        "v": "803900"
                    }, {
                        "t": "l",
                        "v": "920786"
                    }, {
                        "t": "l",
                        "v": "950002"
                    }, {
                        "t": "l",
                        "v": "999675"
                    }]
                }]
            }
        },

        "371545f5-7": {
            "txt": "array(\"2015-04-01\",\"2015-04-02\",\"2015-04-03\",\"2015-04-04\",\"2015-04-05\",\"2015-04-06\",\"2015-04-07\",\"2015-04-08\",\"2015-04-09\",\"2015-04-10\",\"2015-04-11\",\"2015-04-12\",\"2015-04-13\",\"2015-04-14\",\"2015-04-15\",\"2015-04-16\",\"2015-04-17\",\"2015-04-18\",\"2015-04-19\",\"2015-04-20\",\"2015-04-21\",\"2015-04-22\",\"2015-04-23\",\"2015-04-24\",\"2015-04-25\",\"2015-04-26\",\"2015-04-27\",\"2015-04-28\",\"2015-04-29\",\"2015-04-30\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "2015-04-01"
                    }, {
                        "t": "l",
                        "v": "2015-04-02"
                    }, {
                        "t": "l",
                        "v": "2015-04-03"
                    }, {
                        "t": "l",
                        "v": "2015-04-04"
                    }, {
                        "t": "l",
                        "v": "2015-04-05"
                    }, {
                        "t": "l",
                        "v": "2015-04-06"
                    }, {
                        "t": "l",
                        "v": "2015-04-07"
                    }, {
                        "t": "l",
                        "v": "2015-04-08"
                    }, {
                        "t": "l",
                        "v": "2015-04-09"
                    }, {
                        "t": "l",
                        "v": "2015-04-10"
                    }, {
                        "t": "l",
                        "v": "2015-04-11"
                    }, {
                        "t": "l",
                        "v": "2015-04-12"
                    }, {
                        "t": "l",
                        "v": "2015-04-13"
                    }, {
                        "t": "l",
                        "v": "2015-04-14"
                    }, {
                        "t": "l",
                        "v": "2015-04-15"
                    }, {
                        "t": "l",
                        "v": "2015-04-16"
                    }, {
                        "t": "l",
                        "v": "2015-04-17"
                    }, {
                        "t": "l",
                        "v": "2015-04-18"
                    }, {
                        "t": "l",
                        "v": "2015-04-19"
                    }, {
                        "t": "l",
                        "v": "2015-04-20"
                    }, {
                        "t": "l",
                        "v": "2015-04-21"
                    }, {
                        "t": "l",
                        "v": "2015-04-22"
                    }, {
                        "t": "l",
                        "v": "2015-04-23"
                    }, {
                        "t": "l",
                        "v": "2015-04-24"
                    }, {
                        "t": "l",
                        "v": "2015-04-25"
                    }, {
                        "t": "l",
                        "v": "2015-04-26"
                    }, {
                        "t": "l",
                        "v": "2015-04-27"
                    }, {
                        "t": "l",
                        "v": "2015-04-28"
                    }, {
                        "t": "l",
                        "v": "2015-04-29"
                    }, {
                        "t": "l",
                        "v": "2015-04-30"
                    }]
                }]
            }
        }
    },

    "datasources": {
        "alexa-01": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.url1}} (Last 31 days)",
            "libraryAlias": "TrafficHistory1",
            "description": "Monitor traffic history for {{ds.alexa.url1}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.url1}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.url1}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        },
        "alexa-02": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.url2}} (Last 31 days)",
            "libraryAlias": "TrafficHistory2",
            "description": "Monitor traffic history for {{ds.alexa.url2}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.url2}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.url2}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        },
        "alexa-03": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.url3}} (Last 31 days)",
            "libraryAlias": "TrafficHistory3",
            "description": "Monitor traffic history for {{ds.alexa.url3}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.url3}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.url3}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        }
    },

    "dsMappings": {
        "alexa-01": "8f8b64955a5d6d7949aenatceewzhere",
        "alexa-02": "52921e6730d1e3223c4bnatceewzhere",
        "alexa-03": "87f727f82dba81a9f8e2natceewzhere"
    },

    "services": [{
        "service": "alexa"
    }],

    "datasourceConfigModel": [{
        "type": "text",
        "id": "ds.alexa.url1",
        "label": "Your URL",
        "description": "Enter three URLs that you want to monitor daily rankings with.",
        "isRequired": "true",
        "urlEncode": "true"
    }, {
        "type": "text",
        "id": "ds.alexa.url2",
        "label": "Competitor URL 1",
        "isRequired": "true",
        "urlEncode": "true"
    }, {
        "type": "text",
        "id": "ds.alexa.url3",
        "label": "Competitor URL 2",
        "isRequired": "true",
        "urlEncode": "true"
    }]
}