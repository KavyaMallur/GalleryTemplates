{
    "name": "Alexa Reach (Last 30 days)",
    "description": "Monitor website reach over the past 30 days and compare it to your competitors. Originates from the Gallery.",

    "sampleFormulas": {

        "7bb5347c-2": {
            "txt": "\"amazingklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "amazingklips.com"
                }]
            }
        },

        "dcfaff32-4": {
            "txt": "\"goodklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "goodklips.com"
                }]
            }
        },

        "2f4bddc1-5": {
            "txt": "\"klipstore.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "klipstore.com"
                }]
            }
        },

        "2ad7766e": {
            "txt": "array(\"33\",\"33\",\"61.5\",\"57\",\"90\",\"135\",\"105\",\"0\",\"31.5\",\"67.5\",\"87\",\"79.5\",\"82.5\",\"63\",\"24\",\"18\",\"48\",\"82.5\",\"88.5\",\"81\",\"58.5\",\"34.5\",\"39\",\"66\",\"91.5\",\"90\",\"90\",\"100\",\"110\",\"115\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "33"
                    }, {
                        "t": "l",
                        "v": "33"
                    }, {
                        "t": "l",
                        "v": "61.5"
                    }, {
                        "t": "l",
                        "v": "57"
                    }, {
                        "t": "l",
                        "v": "90"
                    }, {
                        "t": "l",
                        "v": "135"
                    }, {
                        "t": "l",
                        "v": "105"
                    }, {
                        "t": "l",
                        "v": "0"
                    }, {
                        "t": "l",
                        "v": "31.5"
                    }, {
                        "t": "l",
                        "v": "67.5"
                    }, {
                        "t": "l",
                        "v": "87"
                    }, {
                        "t": "l",
                        "v": "79.5"
                    }, {
                        "t": "l",
                        "v": "82.5"
                    }, {
                        "t": "l",
                        "v": "63"
                    }, {
                        "t": "l",
                        "v": "24"
                    }, {
                        "t": "l",
                        "v": "18"
                    }, {
                        "t": "l",
                        "v": "48"
                    }, {
                        "t": "l",
                        "v": "82.5"
                    }, {
                        "t": "l",
                        "v": "88.5"
                    }, {
                        "t": "l",
                        "v": "81"
                    }, {
                        "t": "l",
                        "v": "58.5"
                    }, {
                        "t": "l",
                        "v": "34.5"
                    }, {
                        "t": "l",
                        "v": "39"
                    }, {
                        "t": "l",
                        "v": "66"
                    }, {
                        "t": "l",
                        "v": "91.5"
                    }, {
                        "t": "l",
                        "v": "90"
                    }, {
                        "t": "l",
                        "v": "90"
                    }, {
                        "t": "l",
                        "v": "100"
                    }, {
                        "t": "l",
                        "v": "110"
                    }, {
                        "t": "l",
                        "v": "115"
                    }]
                }]
            }
        },

        "6f6808e1": {
            "txt": "array(\"75\",\"105\",\"135\",\"120\",\"91.5\",\"85.5\",\"60\",\"60\",\"75\",\"105\",\"102\",\"91.5\",\"90\",\"90\",\"75\",\"70.5\",\"96\",\"114\",\"120\",\"135\",\"105\",\"54\",\"60\",\"75\",\"105\",\"120\",\"120\",\"125\",\"135\",\"137\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "75"
                    }, {
                        "t": "l",
                        "v": "105"
                    }, {
                        "t": "l",
                        "v": "135"
                    }, {
                        "t": "l",
                        "v": "120"
                    }, {
                        "t": "l",
                        "v": "91.5"
                    }, {
                        "t": "l",
                        "v": "85.5"
                    }, {
                        "t": "l",
                        "v": "60"
                    }, {
                        "t": "l",
                        "v": "60"
                    }, {
                        "t": "l",
                        "v": "75"
                    }, {
                        "t": "l",
                        "v": "105"
                    }, {
                        "t": "l",
                        "v": "102"
                    }, {
                        "t": "l",
                        "v": "91.5"
                    }, {
                        "t": "l",
                        "v": "90"
                    }, {
                        "t": "l",
                        "v": "90"
                    }, {
                        "t": "l",
                        "v": "75"
                    }, {
                        "t": "l",
                        "v": "70.5"
                    }, {
                        "t": "l",
                        "v": "96"
                    }, {
                        "t": "l",
                        "v": "114"
                    }, {
                        "t": "l",
                        "v": "120"
                    }, {
                        "t": "l",
                        "v": "135"
                    }, {
                        "t": "l",
                        "v": "105"
                    }, {
                        "t": "l",
                        "v": "54"
                    }, {
                        "t": "l",
                        "v": "60"
                    }, {
                        "t": "l",
                        "v": "75"
                    }, {
                        "t": "l",
                        "v": "105"
                    }, {
                        "t": "l",
                        "v": "120"
                    }, {
                        "t": "l",
                        "v": "120"
                    }, {
                        "t": "l",
                        "v": "125"
                    }, {
                        "t": "l",
                        "v": "135"
                    }, {
                        "t": "l",
                        "v": "137"
                    }]
                }]
            }
        },

        "e2f489a2": {
            "txt": "array(\"21\",\"0\",\"21\",\"21\",\"28\",\"21\",\"14\",\"28\",\"42\",\"49\",\"56\",\"63\",\"63\",\"63\",\"42\",\"28\",\"14\",\"35\",\"56\",\"56\",\"56\",\"42\",\"35\",\"56\",\"42\",\"42\",\"42\",\"45\",\"47\",\"55\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "21"
                    }, {
                        "t": "l",
                        "v": "0"
                    }, {
                        "t": "l",
                        "v": "21"
                    }, {
                        "t": "l",
                        "v": "21"
                    }, {
                        "t": "l",
                        "v": "28"
                    }, {
                        "t": "l",
                        "v": "21"
                    }, {
                        "t": "l",
                        "v": "14"
                    }, {
                        "t": "l",
                        "v": "28"
                    }, {
                        "t": "l",
                        "v": "42"
                    }, {
                        "t": "l",
                        "v": "49"
                    }, {
                        "t": "l",
                        "v": "56"
                    }, {
                        "t": "l",
                        "v": "63"
                    }, {
                        "t": "l",
                        "v": "63"
                    }, {
                        "t": "l",
                        "v": "63"
                    }, {
                        "t": "l",
                        "v": "42"
                    }, {
                        "t": "l",
                        "v": "28"
                    }, {
                        "t": "l",
                        "v": "14"
                    }, {
                        "t": "l",
                        "v": "35"
                    }, {
                        "t": "l",
                        "v": "56"
                    }, {
                        "t": "l",
                        "v": "56"
                    }, {
                        "t": "l",
                        "v": "56"
                    }, {
                        "t": "l",
                        "v": "42"
                    }, {
                        "t": "l",
                        "v": "35"
                    }, {
                        "t": "l",
                        "v": "56"
                    }, {
                        "t": "l",
                        "v": "42"
                    }, {
                        "t": "l",
                        "v": "42"
                    }, {
                        "t": "l",
                        "v": "42"
                    }, {
                        "t": "l",
                        "v": "45"
                    }, {
                        "t": "l",
                        "v": "47"
                    }, {
                        "t": "l",
                        "v": "55"
                    }]
                }]
            }
        },

        "a4cb4603": {
            "txt": "array(\"2015-04-01\",\"2015-04-02\",\"2015-04-03\",\"2015-04-04\",\"2015-04-05\",\"2015-04-06\",\"2015-04-07\",\"2015-04-08\",\"2015-04-09\",\"2015-04-10\",\"2015-04-11\",\"2015-04-12\",\"2015-04-13\",\"2015-04-14\",\"2015-04-15\",\"2015-04-16\",\"2015-04-17\",\"2015-04-18\",\"2015-04-19\",\"2015-04-20\",\"2015-04-21\",\"2015-04-22\",\"2015-04-23\",\"2015-04-24\",\"2015-04-25\",\"2015-04-26\",\"2015-04-27\",\"2015-04-28\",\"2015-04-29\",\"2015-04-30\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "2015-04-01"
                    }, {
                        "t": "l",
                        "v": "2015-04-02"
                    }, {
                        "t": "l",
                        "v": "2015-04-03"
                    }, {
                        "t": "l",
                        "v": "2015-04-04"
                    }, {
                        "t": "l",
                        "v": "2015-04-05"
                    }, {
                        "t": "l",
                        "v": "2015-04-06"
                    }, {
                        "t": "l",
                        "v": "2015-04-07"
                    }, {
                        "t": "l",
                        "v": "2015-04-08"
                    }, {
                        "t": "l",
                        "v": "2015-04-09"
                    }, {
                        "t": "l",
                        "v": "2015-04-10"
                    }, {
                        "t": "l",
                        "v": "2015-04-11"
                    }, {
                        "t": "l",
                        "v": "2015-04-12"
                    }, {
                        "t": "l",
                        "v": "2015-04-13"
                    }, {
                        "t": "l",
                        "v": "2015-04-14"
                    }, {
                        "t": "l",
                        "v": "2015-04-15"
                    }, {
                        "t": "l",
                        "v": "2015-04-16"
                    }, {
                        "t": "l",
                        "v": "2015-04-17"
                    }, {
                        "t": "l",
                        "v": "2015-04-18"
                    }, {
                        "t": "l",
                        "v": "2015-04-19"
                    }, {
                        "t": "l",
                        "v": "2015-04-20"
                    }, {
                        "t": "l",
                        "v": "2015-04-21"
                    }, {
                        "t": "l",
                        "v": "2015-04-22"
                    }, {
                        "t": "l",
                        "v": "2015-04-23"
                    }, {
                        "t": "l",
                        "v": "2015-04-24"
                    }, {
                        "t": "l",
                        "v": "2015-04-25"
                    }, {
                        "t": "l",
                        "v": "2015-04-26"
                    }, {
                        "t": "l",
                        "v": "2015-04-27"
                    }, {
                        "t": "l",
                        "v": "2015-04-28"
                    }, {
                        "t": "l",
                        "v": "2015-04-29"
                    }, {
                        "t": "l",
                        "v": "2015-04-30"
                    }]
                }]
            }
        }
    },


    "datasources": {
        "alexa-01": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.url1}} (Last 31 days)",
            "libraryAlias": "TrafficHistory1",
            "description": "Monitor traffic history for {{ds.alexa.url1}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.url1}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.url1}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        },
        "alexa-02": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.url2}} (Last 31 days)",
            "libraryAlias": "TrafficHistory2",
            "description": "Monitor traffic history for {{ds.alexa.url2}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.url2}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.url2}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        },
        "alexa-03": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.url3}} (Last 31 days)",
            "libraryAlias": "TrafficHistory3",
            "description": "Monitor traffic history for {{ds.alexa.url3}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.url3}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.url3}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        }
    },

    "dsMappings": {
        "alexa-01": "8f8b64955a5d6d7949aenatceewzhere",
        "alexa-02": "52921e6730d1e3223c4bnatceewzhere",
        "alexa-03": "87f727f82dba81a9f8e2natceewzhere"
    },

    "services": [{
        "service": "alexa"
    }],

    "datasourceConfigModel": [{
        "type": "text",
        "id": "ds.alexa.url1",
        "label": "Your URL",
        "description": "Enter your URL and two competitor URLs.",
        "isRequired": "true",
        "urlEncode": "true"
    }, {
        "type": "text",
        "id": "ds.alexa.url2",
        "label": "Competitor URL 1",
        "isRequired": "true",
        "urlEncode": "true"
    }, {
        "type": "text",
        "id": "ds.alexa.url3",
        "label": "Competitor URL 2",
        "isRequired": "true",
        "urlEncode": "true"
    }]
}