{
    "name": "Alexa Page Views per User (Last 30 days)",
    "description": "Discover and compare your web page views (per user) against your key competitors. Originates from the Gallery.",

    "sampleFormulas": {

        "6081d70f-2": {
            "txt": "\"amazingklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "amazingklips.com"
                }]
            }
        },

        "63a6c1a7-3": {
            "txt": "\"goodklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "goodklips.com"
                }]
            }
        },

        "65666695-4": {
            "txt": "\"klipstore.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "klipstore.com"
                }]
            }
        },

        "d91bae01": {
            "txt": "array(\"2.75\",\"5\",\"12\",\"13.75\",\"12.5\",\"7.5\",\"7.5\",\"2.5\",\"12.5\",\"10\",\"10\",\"7.5\",\"7.5\",\"10\",\"17.5\",\"17.5\",\"12.5\",\"10\",\"7.5\",\"10\",\"10\",\"7.5\",\"2.5\",\"17.5\",\"19\",\"15\",\"7.5\",\"10\",\"11\",\"13\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "2.75"
                    }, {
                        "t": "l",
                        "v": "5"
                    }, {
                        "t": "l",
                        "v": "12"
                    }, {
                        "t": "l",
                        "v": "13.75"
                    }, {
                        "t": "l",
                        "v": "12.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "2.5"
                    }, {
                        "t": "l",
                        "v": "12.5"
                    }, {
                        "t": "l",
                        "v": "10"
                    }, {
                        "t": "l",
                        "v": "10"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "10"
                    }, {
                        "t": "l",
                        "v": "17.5"
                    }, {
                        "t": "l",
                        "v": "17.5"
                    }, {
                        "t": "l",
                        "v": "12.5"
                    }, {
                        "t": "l",
                        "v": "10"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "10"
                    }, {
                        "t": "l",
                        "v": "10"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "2.5"
                    }, {
                        "t": "l",
                        "v": "17.5"
                    }, {
                        "t": "l",
                        "v": "19"
                    }, {
                        "t": "l",
                        "v": "15"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "10"
                    }, {
                        "t": "l",
                        "v": "11"
                    }, {
                        "t": "l",
                        "v": "13"
                    }]
                }]
            }
        },

        "6343b26d": {
            "txt": "array(\"5.75\",\"6.5\",\"7.5\",\"8.0\",\"6.75\",\"7.0\",\"6.75\",\"6.0\",\"5.0\",\"7.25\",\"8.5\",\"7.25\",\"6.5\",\"7.25\",\"6.25\",\"5.25\",\"6.75\",\"12.25\",\"14.5\",\"10.5\",\"5.25\",\"4.75\",\"5.0\",\"6.5\",\"7.5\",\"8.0\",\"8.0\",\"9.0\",\"10.0\",\"11.0\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "5.75"
                    }, {
                        "t": "l",
                        "v": "6.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "8.0"
                    }, {
                        "t": "l",
                        "v": "6.75"
                    }, {
                        "t": "l",
                        "v": "7.0"
                    }, {
                        "t": "l",
                        "v": "6.75"
                    }, {
                        "t": "l",
                        "v": "6.0"
                    }, {
                        "t": "l",
                        "v": "5.0"
                    }, {
                        "t": "l",
                        "v": "7.25"
                    }, {
                        "t": "l",
                        "v": "8.5"
                    }, {
                        "t": "l",
                        "v": "7.25"
                    }, {
                        "t": "l",
                        "v": "6.5"
                    }, {
                        "t": "l",
                        "v": "7.25"
                    }, {
                        "t": "l",
                        "v": "6.25"
                    }, {
                        "t": "l",
                        "v": "5.25"
                    }, {
                        "t": "l",
                        "v": "6.75"
                    }, {
                        "t": "l",
                        "v": "12.25"
                    }, {
                        "t": "l",
                        "v": "14.5"
                    }, {
                        "t": "l",
                        "v": "10.5"
                    }, {
                        "t": "l",
                        "v": "5.25"
                    }, {
                        "t": "l",
                        "v": "4.75"
                    }, {
                        "t": "l",
                        "v": "5.0"
                    }, {
                        "t": "l",
                        "v": "6.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "8.0"
                    }, {
                        "t": "l",
                        "v": "8.0"
                    }, {
                        "t": "l",
                        "v": "9.0"
                    }, {
                        "t": "l",
                        "v": "10.0"
                    }, {
                        "t": "l",
                        "v": "11.0"
                    }]
                }]
            }
        },

        "d9a8a0d0": {
            "txt": "array(\"5\",\"1\",\"5\",\"7.5\",\"7.5\",\"7.5\",\"7.5\",\"7.25\",\"7.75\",\"1\",\"2\",\"3\",\"4.5\",\"3.75\",\"2.5\",\"5\",\"5\",\"5\",\"5.5\",\"4.75\",\"4.25\",\"4\",\"3.75\",\"4.25\",\"4\",\"3.5\",\"3.5\",\"4.0\",\"5.0\",\"5.5\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "5"
                    }, {
                        "t": "l",
                        "v": "1"
                    }, {
                        "t": "l",
                        "v": "5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "7.5"
                    }, {
                        "t": "l",
                        "v": "7.25"
                    }, {
                        "t": "l",
                        "v": "7.75"
                    }, {
                        "t": "l",
                        "v": "1"
                    }, {
                        "t": "l",
                        "v": "2"
                    }, {
                        "t": "l",
                        "v": "3"
                    }, {
                        "t": "l",
                        "v": "4.5"
                    }, {
                        "t": "l",
                        "v": "3.75"
                    }, {
                        "t": "l",
                        "v": "2.5"
                    }, {
                        "t": "l",
                        "v": "5"
                    }, {
                        "t": "l",
                        "v": "5"
                    }, {
                        "t": "l",
                        "v": "5"
                    }, {
                        "t": "l",
                        "v": "5.5"
                    }, {
                        "t": "l",
                        "v": "4.75"
                    }, {
                        "t": "l",
                        "v": "4.25"
                    }, {
                        "t": "l",
                        "v": "4"
                    }, {
                        "t": "l",
                        "v": "3.75"
                    }, {
                        "t": "l",
                        "v": "4.25"
                    }, {
                        "t": "l",
                        "v": "4"
                    }, {
                        "t": "l",
                        "v": "3.5"
                    }, {
                        "t": "l",
                        "v": "3.5"
                    }, {
                        "t": "l",
                        "v": "4.0"
                    }, {
                        "t": "l",
                        "v": "5.0"
                    }, {
                        "t": "l",
                        "v": "5.5"
                    }]
                }]
            }
        },

        "da2cb5b3": {
            "txt": "array(\"2015-04-01\",\"2015-04-02\",\"2015-04-03\",\"2015-04-04\",\"2015-04-05\",\"2015-04-06\",\"2015-04-07\",\"2015-04-08\",\"2015-04-09\",\"2015-04-10\",\"2015-04-11\",\"2015-04-12\",\"2015-04-13\",\"2015-04-14\",\"2015-04-15\",\"2015-04-16\",\"2015-04-17\",\"2015-04-18\",\"2015-04-19\",\"2015-04-20\",\"2015-04-21\",\"2015-04-22\",\"2015-04-23\",\"2015-04-24\",\"2015-04-25\",\"2015-04-26\",\"2015-04-27\",\"2015-04-28\",\"2015-04-29\",\"2015-04-30\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "2015-04-01"
                    }, {
                        "t": "l",
                        "v": "2015-04-02"
                    }, {
                        "t": "l",
                        "v": "2015-04-03"
                    }, {
                        "t": "l",
                        "v": "2015-04-04"
                    }, {
                        "t": "l",
                        "v": "2015-04-05"
                    }, {
                        "t": "l",
                        "v": "2015-04-06"
                    }, {
                        "t": "l",
                        "v": "2015-04-07"
                    }, {
                        "t": "l",
                        "v": "2015-04-08"
                    }, {
                        "t": "l",
                        "v": "2015-04-09"
                    }, {
                        "t": "l",
                        "v": "2015-04-10"
                    }, {
                        "t": "l",
                        "v": "2015-04-11"
                    }, {
                        "t": "l",
                        "v": "2015-04-12"
                    }, {
                        "t": "l",
                        "v": "2015-04-13"
                    }, {
                        "t": "l",
                        "v": "2015-04-14"
                    }, {
                        "t": "l",
                        "v": "2015-04-15"
                    }, {
                        "t": "l",
                        "v": "2015-04-16"
                    }, {
                        "t": "l",
                        "v": "2015-04-17"
                    }, {
                        "t": "l",
                        "v": "2015-04-18"
                    }, {
                        "t": "l",
                        "v": "2015-04-19"
                    }, {
                        "t": "l",
                        "v": "2015-04-20"
                    }, {
                        "t": "l",
                        "v": "2015-04-21"
                    }, {
                        "t": "l",
                        "v": "2015-04-22"
                    }, {
                        "t": "l",
                        "v": "2015-04-23"
                    }, {
                        "t": "l",
                        "v": "2015-04-24"
                    }, {
                        "t": "l",
                        "v": "2015-04-25"
                    }, {
                        "t": "l",
                        "v": "2015-04-26"
                    }, {
                        "t": "l",
                        "v": "2015-04-27"
                    }, {
                        "t": "l",
                        "v": "2015-04-28"
                    }, {
                        "t": "l",
                        "v": "2015-04-29"
                    }, {
                        "t": "l",
                        "v": "2015-04-30"
                    }]
                }]
            }
        }
    },


    "datasources": {
        "alexa-01": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.competitorUrl1}} (Last 31 days)",
            "libraryAlias": "TrafficHistory1",
            "description": "Monitor traffic history for {{ds.alexa.competitorUrl1}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.competitorUrl1}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.competitorUrl1}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        },
        "alexa-02": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.competitorUrl2}} (Last 31 days)",
            "libraryAlias": "TrafficHistory2",
            "description": "Monitor traffic history for {{ds.alexa.competitorUrl2}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.competitorUrl2}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.competitorUrl2}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        },
        "alexa-03": {
            "service": "alexa",
            "name": "Alexa Traffic History for {{ds.alexa.competitorUrl3}} (Last 31 days)",
            "libraryAlias": "TrafficHistory3",
            "description": "Monitor traffic history for {{ds.alexa.competitorUrl3}}. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "xml",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "http://awis.amazonaws.com/?AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start={date.add(-31).tz('UTC').format('yyyyMMdd')}&Timestamp={date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\");}&Url={{ds.alexa.competitorUrl3}}&Signature={hash.append(\"GET\").appendNewLine().append(\"awis.amazonaws.com\").appendNewLine().append(\"/\").appendNewLine().append(\"AWSAccessKeyId={{auth.alexa.apiKey}}&Action=TrafficHistory&ResponseGroup=History&SignatureMethod=HmacSHA1&SignatureVersion=2&Start=\"+date.tz('UTC').add(-31).format('yyyyMMdd')+\"&Timestamp=\"+date.addMinutes(10).tz('UTC').format(\"yyyy-MM-dd'T'HH'%3A'mm'%3A'ss'Z'\")+\"&Url={{ds.alexa.competitorUrl3}}\").encodeHmacSha1(\"{{auth.alexa.apiSecret}}\").encodeBase64().encodeURL().printDigest();}"
            }
        }
    },

    "dsMappings": {
        "alexa-01": "8f8b64955a5d6d7949aenatceewzhere",
        "alexa-02": "52921e6730d1e3223c4bnatceewzhere",
        "alexa-03": "87f727f82dba81a9f8e2natceewzhere"
    },

    "services": [{
        "service": "alexa"
    }],

    "datasourceConfigModel": [{
        "type": "text",
        "id": "ds.alexa.competitorUrl1",
        "label": "Your URL",
        "description": "Enter your URL and two competitor URLs.",
        "isRequired": "true",
        "urlEncode": "true"
    }, {
        "type": "text",
        "id": "ds.alexa.competitorUrl2",
        "label": "Competitor URL 1",
        "isRequired": "true",
        "urlEncode": "true"
    }, {
        "type": "text",
        "id": "ds.alexa.competitorUrl3",
        "label": "Competitor URL 2",
        "isRequired": "true",
        "urlEncode": "true"
    }]
}