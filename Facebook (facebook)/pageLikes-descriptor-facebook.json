{
    "name": "Facebook Page Likes",
    "description": "Every Facebook page ownerâ€™s first stop is to find out how many people liked their page. And that includes you! Track total and new likes during the time period of your choice. Originates from the Gallery. (v1.1)",
    "sampleFormulas": {
        "8143ae31-3": {
            "txt": "\"20160821\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160821"
                }]
            }
        },
        "9083a66b-4": {
            "txt": "\"20160814\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160814"
                }]
            }
        },
        "09b970ab-6": {
            "txt": "\"20160827\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160827"
                }]
            }
        },
        "816b8493-7": {
            "txt": "\"20160820\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160820"
                }]
            }
        },
        "2e1ede3f-9": {
            "txt": "array(\"-8\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "-8"
                    }]
                }]
            }
        },
        "7a2bd381-10": {
            "txt": "array(\"7 Days\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "7 Days"
                    }]
                }]
            }
        },
        "ec4c5809-12": {
            "txt": "\"Itsy Bitsy\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Itsy Bitsy"
                }]
            }
        },
        "bad7116f-14": {
            "txt": "\"Total Page Likes\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Total Page Likes"
                }]
            }
        },
        "0d5ea79e-15": {
            "txt": "\"New Page Likes\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "New Page Likes"
                }]
            }
        },
        "c8acb909-17": {
            "txt": "\"8132\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 8132
                }]
            }
        },
        "f05c417e": {
            "txt": "\"432\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 432
                }]
            }
        },
        "1aee0b6d-19": {
            "txt": "\"-0.31043839565844145\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": -0.31043839565844145
                }]
            }
        },
        "1310d463": {
            "txt": "\"0.34579439252336447\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 0.34579439252336447
                }]
            }
        },
        "34360fcd-18": {
            "txt": "\"11793\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 11793
                }]
            }
        },
        "b9fe2866": {
            "txt": "\"321\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 321
                }]
            }
        },
        "08cd6a1b-21": {
            "txt": "array(\"3937\",\"3940\",\"3951\",\"3981\",\"4021\",\"4037\",\"4063\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "3937"
                    }, {
                        "t": "l",
                        "v": "3940"
                    }, {
                        "t": "l",
                        "v": "3951"
                    }, {
                        "t": "l",
                        "v": "3981"
                    }, {
                        "t": "l",
                        "v": "4021"
                    }, {
                        "t": "l",
                        "v": "4037"
                    }, {
                        "t": "l",
                        "v": "4063"
                    }]
                }]
            }
        },
        "952876bc-22": {
            "txt": "\"4063\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 4063
                }]
            }
        },
        "aeef9fc6": {
            "txt": "array(\"70\",\"50\",\"340\",\"440\",\"170\",\"270\",\"100\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 70
                    }, {
                        "t": "l",
                        "v": 50
                    }, {
                        "t": "l",
                        "v": 340
                    }, {
                        "t": "l",
                        "v": 440
                    }, {
                        "t": "l",
                        "v": 170
                    }, {
                        "t": "l",
                        "v": 270
                    }, {
                        "t": "l",
                        "v": 100
                    }]
                }]
            }
        },
        "d94a5c45": {
            "txt": "\"4063\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 4063
                }]
            }
        },
        "4f9bd8a5-16": {
            "txt": "\"<p style='font-size:11px;'>*This Klip does not show your data for today and yesterday, because the Facebook API does not provide it.</p>\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "<p style='font-size:11px;'>*This Klip does not show your data for today and yesterday, because the Facebook API does not provide it.</p>"
                }]
            }
        }
    },
    "datasources": {
        "facebook-01": {
            "service": "facebook",
            "libraryAlias": "FacebookPageMetrics(Today-2mo.ago)",
            "name": "Facebook Page Metrics (Today-2 mo.ago)",
            "description": "The daily number of likes on your page 2 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-2).startOfMonth.format()}&until={date.today}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-2).startOfMonth.format()}&until={date.today}",
                "qtype": "Graph API"
            }
        },
        "facebook-02": {
            "service": "facebook",
            "libraryAlias": "FacebookPageMetrics(Last3-Last5mo.)",
            "name": "Facebook Page Metrics (Last3-Last5 mo.)",
            "description": "The daily number of likes on your page 6 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-5).startOfMonth.format()}&until={date.addMonths(-3).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-5).startOfMonth.format()}&until={date.addMonths(-3).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-03": {
            "service": "facebook",
            "libraryAlias": "FacebookPageMetrics(Last6-Last8mo.)",
            "name": "Facebook Page Metrics (Last6-Last8 mo.)",
            "description": "The daily number of likes on your page 8 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-8).startOfMonth.format()}&until={date.addMonths(-6).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-8).startOfMonth.format()}&until={date.addMonths(-6).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-04": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(Last9-Last11mo.)",
            "name": "Facebook Fan Metrics (Last9-Last11 mo.)",
            "description": "The daily number of likes on your page 11 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-11).startOfMonth.format()}&until={date.addMonths(-9).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-11).startOfMonth.format()}&until={date.addMonths(-9).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-05": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(Last12-Last14mo.)",
            "name": "Facebook Fan Metrics (Last12-Last14 mo.)",
            "description": "The daily number of likes on your page 14 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-14).startOfMonth.format()}&until={date.addMonths(-12).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-14).startOfMonth.format()}&until={date.addMonths(-12).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-06": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(Last15-Last17mo.)",
            "name": "Facebook Fan Metrics (Last15-Last17 mo.)",
            "description": "The daily number of likes on your page 17 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-17).startOfMonth.format()}&until={date.addMonths(-15).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-17).startOfMonth.format()}&until={date.addMonths(-15).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-07": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(Last18-Last20mo.)",
            "name": "Facebook Fan Metrics (Last18-Last20 mo.)",
            "description": "The daily number of likes on your page 20 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-20).startOfMonth.format()}&until={date.addMonths(-18).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-20).startOfMonth.format()}&until={date.addMonths(-18).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-08": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(Last21-Last23mo.)",
            "name": "Facebook Fan Metrics (Last21-Last23 mo.)",
            "description": "The daily number of likes on your page 23 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-23).startOfMonth.format()}&until={date.addMonths(-21).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-23).startOfMonth.format()}&until={date.addMonths(-21).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-09": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(Last24-Last26mo.)",
            "name": "Facebook Fan Metrics (Last24-Last26 mo.)",
            "description": "The daily number of likes on your page 26 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-26).startOfMonth.format()}&until={date.addMonths(-24).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds,page_engaged_users,page_impressions?since={date.addMonths(-26).startOfMonth.format()}&until={date.addMonths(-24).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-10": {
            "service": "facebook",
            "libraryAlias": "FacebookAccountDetails",
            "name": "Facebook Account Details",
            "description": "Obtain your facebook account details. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/me/accounts?fields=name,id",
                "graphUrl": "https://graph.facebook.com/me/accounts?fields=name,id",
                "qtype": "Graph API"
            }
        }
    },
    "dsMappings": {
        "facebook-01": "c3579e651b080b0dee3aKavyaMallur9",
        "facebook-02": "2397678f8cbb2752e8abKavyaMallur9",
        "facebook-03": "bb61403e6d65ccf48cb8KavyaMallur9",
        "facebook-04": "860ad5b231eba20b9d6dKavyaMallur9",
        "facebook-05": "e1af7bc38b2a4f96ac83KavyaMallur9",
        "facebook-06": "1bbfb50e1abacbbffa3fKavyaMallur9",
        "facebook-07": "a11275476c4af6ec6c3fKavyaMallur9",
        "facebook-08": "ec1cd4027c3058c4f203KavyaMallur9",
        "facebook-09": "6281503a51294f52ccabKavyaMallur9",
        "facebook-10": "bc365e1db60ae5d228e7KavyaMallur9"
    },
    "services": [{
        "service": "facebook"
    }],
    "uiVariables": [{
        "name": "FBPeriod",
        "value": "-8"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.facebook.pageId",
        "label": "Facebook Page",
        "description": "Select your company Facebook page from the drop-down list."
    }],
    "queries": [{
        "errorMessage": "From time to time, your Facebook OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "facebook",
            "type": "facebook",
            "format": "json",
            "props": {
                "endpoint_url": "https://graph.facebook.com/me/accounts?fields=name,id,username",
                "method": "GET",
                "qtype": "Graph API"
            }
        },
        "results": [{
            "propId": "ds.facebook.pageId",
            "propField": "options",
            "labels": "/data/name",
            "values": "/data/id"
        }]
    }]
}
