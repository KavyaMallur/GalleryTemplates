{
    "name": "Facebook Page Visits (Last 90 Days)",
    "description": "The number of visits your page has had over the last 90 days, and the average for each day over that period. Originates from the Gallery.<br>Originates from the Gallery. (v1.2)",
    "sampleFormulas": {
        "170fa6fa-3": {
            "txt": "\"10557.6\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 10557.6
                }]
            }
        },
        "e78338c4": {
            "txt": "\"117.30666666666669\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 117.30666666666669
                }]
            }
        },
        "ef8e1767-2": {
            "txt": "\"Total page visits\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Total page visits"
                }]
            }
        },
        "a300ecf9": {
            "txt": "\"Average visits per day\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Average visits per day"
                }]
            }
        },
        "3f521560-6": {
            "txt": "array(\"76.8\",\"48\",\"84\",\"100.8\",\"69.6\",\"33.6\",\"43.199999999999996\",\"43.199999999999996\",\"38.4\",\"36\",\"50.4\",\"48\",\"55.199999999999996\",\"74.39999999999999\",\"158.4\",\"175.2\",\"108\",\"189.6\",\"67.2\",\"31.2\",\"81.6\",\"201.6\",\"64.8\",\"38.4\",\"38.4\",\"40.8\",\"36\",\"9.6\",\"93.6\",\"180\",\"141.6\",\"72\",\"60\",\"40.8\",\"55.199999999999996\",\"48\",\"184.79999999999998\",\"127.19999999999999\",\"165.6\",\"100.8\",\"33.6\",\"74.39999999999999\",\"134.4\",\"69.6\",\"132\",\"110.39999999999999\",\"96\",\"24\",\"36\",\"122.39999999999999\",\"156\",\"165.6\",\"96\",\"86.39999999999999\",\"64.8\",\"67.2\",\"132\",\"153.6\",\"244.79999999999998\",\"100.8\",\"21.599999999999998\",\"4.8\",\"21.599999999999998\",\"60\",\"189.6\",\"252\",\"163.2\",\"64.8\",\"60\",\"62.4\",\"172.79999999999998\",\"348\",\"352.8\",\"146.4\",\"134.4\",\"110.39999999999999\",\"96\",\"199.2\",\"328.8\",\"326.4\",\"280.8\",\"96\",\"74.39999999999999\",\"81.6\",\"151.2\",\"350.4\",\"379.2\",\"249.6\",\"225.6\",\"141.6\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 76.8
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 84
                    }, {
                        "t": "l",
                        "v": 100.8
                    }, {
                        "t": "l",
                        "v": 69.6
                    }, {
                        "t": "l",
                        "v": 33.6
                    }, {
                        "t": "l",
                        "v": 43.199999999999996
                    }, {
                        "t": "l",
                        "v": 43.199999999999996
                    }, {
                        "t": "l",
                        "v": 38.4
                    }, {
                        "t": "l",
                        "v": 36
                    }, {
                        "t": "l",
                        "v": 50.4
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 55.199999999999996
                    }, {
                        "t": "l",
                        "v": 74.39999999999999
                    }, {
                        "t": "l",
                        "v": 158.4
                    }, {
                        "t": "l",
                        "v": 175.2
                    }, {
                        "t": "l",
                        "v": 108
                    }, {
                        "t": "l",
                        "v": 189.6
                    }, {
                        "t": "l",
                        "v": 67.2
                    }, {
                        "t": "l",
                        "v": 31.2
                    }, {
                        "t": "l",
                        "v": 81.6
                    }, {
                        "t": "l",
                        "v": 201.6
                    }, {
                        "t": "l",
                        "v": 64.8
                    }, {
                        "t": "l",
                        "v": 38.4
                    }, {
                        "t": "l",
                        "v": 38.4
                    }, {
                        "t": "l",
                        "v": 40.8
                    }, {
                        "t": "l",
                        "v": 36
                    }, {
                        "t": "l",
                        "v": 9.6
                    }, {
                        "t": "l",
                        "v": 93.6
                    }, {
                        "t": "l",
                        "v": 180
                    }, {
                        "t": "l",
                        "v": 141.6
                    }, {
                        "t": "l",
                        "v": 72
                    }, {
                        "t": "l",
                        "v": 60
                    }, {
                        "t": "l",
                        "v": 40.8
                    }, {
                        "t": "l",
                        "v": 55.199999999999996
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 184.79999999999998
                    }, {
                        "t": "l",
                        "v": 127.19999999999999
                    }, {
                        "t": "l",
                        "v": 165.6
                    }, {
                        "t": "l",
                        "v": 100.8
                    }, {
                        "t": "l",
                        "v": 33.6
                    }, {
                        "t": "l",
                        "v": 74.39999999999999
                    }, {
                        "t": "l",
                        "v": 134.4
                    }, {
                        "t": "l",
                        "v": 69.6
                    }, {
                        "t": "l",
                        "v": 132
                    }, {
                        "t": "l",
                        "v": 110.39999999999999
                    }, {
                        "t": "l",
                        "v": 96
                    }, {
                        "t": "l",
                        "v": 24
                    }, {
                        "t": "l",
                        "v": 36
                    }, {
                        "t": "l",
                        "v": 122.39999999999999
                    }, {
                        "t": "l",
                        "v": 156
                    }, {
                        "t": "l",
                        "v": 165.6
                    }, {
                        "t": "l",
                        "v": 96
                    }, {
                        "t": "l",
                        "v": 86.39999999999999
                    }, {
                        "t": "l",
                        "v": 64.8
                    }, {
                        "t": "l",
                        "v": 67.2
                    }, {
                        "t": "l",
                        "v": 132
                    }, {
                        "t": "l",
                        "v": 153.6
                    }, {
                        "t": "l",
                        "v": 244.79999999999998
                    }, {
                        "t": "l",
                        "v": 100.8
                    }, {
                        "t": "l",
                        "v": 21.599999999999998
                    }, {
                        "t": "l",
                        "v": 4.8
                    }, {
                        "t": "l",
                        "v": 21.599999999999998
                    }, {
                        "t": "l",
                        "v": 60
                    }, {
                        "t": "l",
                        "v": 189.6
                    }, {
                        "t": "l",
                        "v": 252
                    }, {
                        "t": "l",
                        "v": 163.2
                    }, {
                        "t": "l",
                        "v": 64.8
                    }, {
                        "t": "l",
                        "v": 60
                    }, {
                        "t": "l",
                        "v": 62.4
                    }, {
                        "t": "l",
                        "v": 172.79999999999998
                    }, {
                        "t": "l",
                        "v": 348
                    }, {
                        "t": "l",
                        "v": 352.8
                    }, {
                        "t": "l",
                        "v": 146.4
                    }, {
                        "t": "l",
                        "v": 134.4
                    }, {
                        "t": "l",
                        "v": 110.39999999999999
                    }, {
                        "t": "l",
                        "v": 96
                    }, {
                        "t": "l",
                        "v": 199.2
                    }, {
                        "t": "l",
                        "v": 328.8
                    }, {
                        "t": "l",
                        "v": 326.4
                    }, {
                        "t": "l",
                        "v": 280.8
                    }, {
                        "t": "l",
                        "v": 96
                    }, {
                        "t": "l",
                        "v": 74.39999999999999
                    }, {
                        "t": "l",
                        "v": 81.6
                    }, {
                        "t": "l",
                        "v": 151.2
                    }, {
                        "t": "l",
                        "v": 350.4
                    }, {
                        "t": "l",
                        "v": 379.2
                    }, {
                        "t": "l",
                        "v": 249.6
                    }, {
                        "t": "l",
                        "v": 225.6
                    }, {
                        "t": "l",
                        "v": 141.6
                    }]
                }]
            }
        },
        "edcd15d6-7": {
            "txt": "array(\"2016-05-31T07:00:00+0000\",\"2016-06-01T07:00:00+0000\",\"2016-06-02T07:00:00+0000\",\"2016-06-03T07:00:00+0000\",\"2016-06-04T07:00:00+0000\",\"2016-06-05T07:00:00+0000\",\"2016-06-06T07:00:00+0000\",\"2016-06-07T07:00:00+0000\",\"2016-06-08T07:00:00+0000\",\"2016-06-09T07:00:00+0000\",\"2016-06-10T07:00:00+0000\",\"2016-06-11T07:00:00+0000\",\"2016-06-12T07:00:00+0000\",\"2016-06-13T07:00:00+0000\",\"2016-06-14T07:00:00+0000\",\"2016-06-15T07:00:00+0000\",\"2016-06-16T07:00:00+0000\",\"2016-06-17T07:00:00+0000\",\"2016-06-18T07:00:00+0000\",\"2016-06-19T07:00:00+0000\",\"2016-06-20T07:00:00+0000\",\"2016-06-21T07:00:00+0000\",\"2016-06-22T07:00:00+0000\",\"2016-06-23T07:00:00+0000\",\"2016-06-24T07:00:00+0000\",\"2016-06-25T07:00:00+0000\",\"2016-06-26T07:00:00+0000\",\"2016-06-27T07:00:00+0000\",\"2016-06-28T07:00:00+0000\",\"2016-06-29T07:00:00+0000\",\"2016-06-30T07:00:00+0000\",\"2016-07-01T07:00:00+0000\",\"2016-07-02T07:00:00+0000\",\"2016-07-03T07:00:00+0000\",\"2016-07-04T07:00:00+0000\",\"2016-07-05T07:00:00+0000\",\"2016-07-06T07:00:00+0000\",\"2016-07-07T07:00:00+0000\",\"2016-07-08T07:00:00+0000\",\"2016-07-09T07:00:00+0000\",\"2016-07-10T07:00:00+0000\",\"2016-07-11T07:00:00+0000\",\"2016-07-12T07:00:00+0000\",\"2016-07-13T07:00:00+0000\",\"2016-07-14T07:00:00+0000\",\"2016-07-15T07:00:00+0000\",\"2016-07-16T07:00:00+0000\",\"2016-07-17T07:00:00+0000\",\"2016-07-18T07:00:00+0000\",\"2016-07-19T07:00:00+0000\",\"2016-07-20T07:00:00+0000\",\"2016-07-21T07:00:00+0000\",\"2016-07-22T07:00:00+0000\",\"2016-07-23T07:00:00+0000\",\"2016-07-24T07:00:00+0000\",\"2016-07-25T07:00:00+0000\",\"2016-07-26T07:00:00+0000\",\"2016-07-27T07:00:00+0000\",\"2016-07-28T07:00:00+0000\",\"2016-07-29T07:00:00+0000\",\"2016-07-30T07:00:00+0000\",\"2016-07-31T07:00:00+0000\",\"2016-08-01T07:00:00+0000\",\"2016-08-02T07:00:00+0000\",\"2016-08-03T07:00:00+0000\",\"2016-08-04T07:00:00+0000\",\"2016-08-05T07:00:00+0000\",\"2016-08-06T07:00:00+0000\",\"2016-08-07T07:00:00+0000\",\"2016-08-08T07:00:00+0000\",\"2016-08-09T07:00:00+0000\",\"2016-08-10T07:00:00+0000\",\"2016-08-11T07:00:00+0000\",\"2016-08-12T07:00:00+0000\",\"2016-08-13T07:00:00+0000\",\"2016-08-14T07:00:00+0000\",\"2016-08-15T07:00:00+0000\",\"2016-08-16T07:00:00+0000\",\"2016-08-17T07:00:00+0000\",\"2016-08-18T07:00:00+0000\",\"2016-08-19T07:00:00+0000\",\"2016-08-20T07:00:00+0000\",\"2016-08-21T07:00:00+0000\",\"2016-08-22T07:00:00+0000\",\"2016-08-23T07:00:00+0000\",\"2016-08-24T07:00:00+0000\",\"2016-08-25T07:00:00+0000\",\"2016-08-26T07:00:00+0000\",\"2016-08-27T07:00:00+0000\",\"2016-08-28T07:00:00+0000\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "2016-05-31T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-01T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-02T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-03T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-04T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-05T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-06T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-07T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-08T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-09T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-10T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-11T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-12T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-13T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-14T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-15T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-16T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-17T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-18T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-19T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-20T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-21T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-22T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-23T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-24T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-25T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-26T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-27T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-28T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-29T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-06-30T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-01T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-02T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-03T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-04T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-05T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-06T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-07T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-08T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-09T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-10T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-11T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-12T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-13T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-14T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-15T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-16T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-17T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-18T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-19T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-20T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-21T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-22T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-23T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-24T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-25T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-26T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-27T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-28T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-29T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-30T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-07-31T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-01T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-02T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-03T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-04T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-05T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-06T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-07T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-08T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-09T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-10T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-11T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-12T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-13T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-14T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-15T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-16T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-17T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-18T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-19T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-20T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-21T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-22T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-23T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-24T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-25T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-26T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-27T07:00:00+0000"
                    }, {
                        "t": "l",
                        "v": "2016-08-28T07:00:00+0000"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "facebook": {
            "service": "facebook",
            "libraryAlias": "facebookDailyPageVisits",
            "name": "Facebook Page Visits",
            "description": "Total count of daily Facebook page visits. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/insights/page_views/day?since={date.add(-90).format()}&until={date.today}",
                "graphUrl": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/insights/page_views/day?since={date.add(-90).format()}&until={date.today}",
                "qtype": "Graph API"
            }
        }
    },

    "dsMappings": {
        "facebook": "01d373cc62936ea9f4fcniktawuzhere"
    },

    "services": [{
        "service": "facebook"
    }],

    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.facebook.pageId",
        "label": "Facebook Page",
        "description": "Select your company Facebook page from the drop-down list."
    }],
    "queries": [{
        "errorMessage": "From time to time, your Facebook OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "facebook",
            "type": "facebook",
            "format": "json",
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/me/accounts?fields=name,id",
                "method": "GET",
                "qtype": "Graph API"
            }
        },
        "results": [{
            "propId": "ds.facebook.pageId",
            "propField": "options",
            "labels": "/data/name",
            "values": "/data/id"
        }]
    }]
}
