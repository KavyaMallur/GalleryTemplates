{
    "name": "Facebook Page Fans",
    "description": "Track the number of fans on your facebook page for a selected period. Originates from the Gallery.",
    "sampleFormulas": {
        "60186623": {
            "txt": "\"thismonth\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "thismonth"
                }]
            }
        },
        "edd8ae04": {
            "txt": "\"20160807\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160807"
                }]
            }
        },
        "64ceed4a": {
            "txt": "\"20160731\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160731"
                }]
            }
        },
        "ad3ed98a": {
            "txt": "\"20160809\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160809"
                }]
            }
        },
        "087d2cbe": {
            "txt": "\"20160802\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160802"
                }]
            }
        },
        "29ace61f": {
            "txt": "\"This Month\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "This Month"
                }]
            }
        },
        "7f6522fd-1": {
            "txt": "\"Itsy Bitsy\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Itsy Bitsy"
                }]
            }
        },
        "994e3312": {
            "txt": "\"Fan Adds\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Fan Adds"
                }]
            }
        },
        "8281826e": {
            "txt": "\"Fan Count\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Fan Count"
                }]
            }
        },
        "7375f38b": {
            "txt": "\"996\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "996"
                }]
            }
        },
        "c63738d0": {
            "txt": "\"4744994\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "4744994"
                }]
            }
        },
        "bf8eeb48": {
            "txt": "\"0.15545243619489568\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 0.15545243619489568
                }]
            }
        },
        "5c6a9876": {
            "txt": "\"862\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "862"
                }]
            }
        },
        "958f9d0c": {
            "txt": "\"-0.012884043607532258\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": -0.012884043607532258
                }]
            }
        },
        "ef2e7d45": {
            "txt": "\"1009\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "1009"
                }]
            }
        },
        "6ded2d8e": {
            "txt": "\"-0.0404449429058964\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": -0.0404449429058964
                }]
            }
        },
        "cd44fb8a": {
            "txt": "\"4944994\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "4944994"
                }]
            }
        },
        "c1736c5a": {
            "txt": "\"0.5087450087345158\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 0.5087450087345158
                }]
            }
        },
        "a6e5578f": {
            "txt": "\"3144994\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "3144994"
                }]
            }
        },
        "3d552787": {
            "txt": "array(\"71\",\"66\",\"159\",\"274\",\"382\",\"449\",\"386\",\"496\",\"554\",\"604\",\"906\",\"996\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "71"
                    }, {
                        "t": "l",
                        "v": "66"
                    }, {
                        "t": "l",
                        "v": "159"
                    }, {
                        "t": "l",
                        "v": "274"
                    }, {
                        "t": "l",
                        "v": "382"
                    }, {
                        "t": "l",
                        "v": "449"
                    }, {
                        "t": "l",
                        "v": "386"
                    }, {
                        "t": "l",
                        "v": "496"
                    }, {
                        "t": "l",
                        "v": "554"
                    }, {
                        "t": "l",
                        "v": "604"
                    }, {
                        "t": "l",
                        "v": "906"
                    }, {
                        "t": "l",
                        "v": "996"
                    }]
                }]
            }
        },
        "da7f1ea1": {
            "txt": "\"996\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "996"
                }]
            }
        },
        "872a16a4": {
            "txt": "array(\"1223456\",\"2223456\",\"2723776\",\"2923456\",\"3434456\",\"3123456\",\"3666456\",\"3723456\",\"3999491\",\"3999999\",\"5144992\",\"4744994\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "1223456"
                    }, {
                        "t": "l",
                        "v": "2223456"
                    }, {
                        "t": "l",
                        "v": "2723776"
                    }, {
                        "t": "l",
                        "v": "2923456"
                    }, {
                        "t": "l",
                        "v": "3434456"
                    }, {
                        "t": "l",
                        "v": "3123456"
                    }, {
                        "t": "l",
                        "v": "3666456"
                    }, {
                        "t": "l",
                        "v": "3723456"
                    }, {
                        "t": "l",
                        "v": "3999491"
                    }, {
                        "t": "l",
                        "v": "3999999"
                    }, {
                        "t": "l",
                        "v": "5144992"
                    }, {
                        "t": "l",
                        "v": "4744994"
                    }]
                }]
            }
        },
        "f4642f1f": {
            "txt": "\"4744994\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "4744994"
                }]
            }
        },
        "93a6c3b2": {
            "txt": "\"Last 12 Months\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Last 12 Months"
                }]
            }
        },
        "0cd46ee5": {
            "txt": "\"Last 12 Months\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Last 12 Months"
                }]
            }
        }
    },

    "datasources": {
        "facebook-01": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(3Months)",
            "name": "Facebook Fan Metrics (3 Months)",
            "description": "The daily number of fans on your page 3 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-2).startOfMonth.format()}&until={date.today}",
                "graphUrl": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-2).startOfMonth.format()}&until={date.today}",
                "qtype": "Graph API"
            }
        },
        "facebook-02": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(6Months)",
            "name": "Facebook Fan Metrics (6 Months)",
            "description": "The daily number of fans on your page 6 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-5).startOfMonth.format()}&until={date.addMonths(-3).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-5).startOfMonth.format()}&until={date.addMonths(-3).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-03": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(9Months)",
            "name": "Facebook Fan Metrics (9 Months)",
            "description": "The daily number of fans on your page 9 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-8).startOfMonth.format()}&until={date.addMonths(-6).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-8).startOfMonth.format()}&until={date.addMonths(-6).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-04": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(12Months)",
            "name": "Facebook Fan Metrics (12 Months)",
            "description": "The daily number of fans on your page 12 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-11).startOfMonth.format()}&until={date.addMonths(-9).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-11).startOfMonth.format()}&until={date.addMonths(-9).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-05": {
            "service": "facebook",
            "libraryAlias": "FacebookFanMetrics(14Months)",
            "name": "Facebook Fan Metrics (14 Months)",
            "description": "The daily number of fans on your page 14 months ago. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-14).startOfMonth.format()}&until={date.addMonths(-12).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/v2.7/{{ds.facebook.pageId}}/insights/page_fans,page_fan_adds?since={date.addMonths(-14).startOfMonth.format()}&until={date.addMonths(-12).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-06": {
            "service": "facebook",
            "libraryAlias": "FacebookAccountDetails",
            "name": "Facebook Account Details",
            "description": "Obtain your facebook account details. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/me/accounts?fields=name,id",
                "graphUrl": "https://graph.facebook.com/v2.7/me/accounts?fields=name,id",
                "qtype": "Graph API"
            }
        }
    },
    "dsMappings": {
        "facebook-01": "c3579e651b080b0dee3aKavyaMallur9",
        "facebook-02": "2397678f8cbb2752e8abKavyaMallur9",
        "facebook-03": "bb61403e6d65ccf48cb8KavyaMallur9",
        "facebook-04": "860ad5b231eba20b9d6dKavyaMallur9",
        "facebook-05": "e1af7bc38b2a4f96ac83KavyaMallur9",
        "facebook-06": "bc365e1db60ae5d228e7KavyaMallur9"
    },
    "services": [{
        "service": "facebook"
    }],
    "uiVariables": [{
        "name": "FBPeriod",
        "value": "thismonth"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.facebook.pageId",
        "label": "Facebook Page",
        "description": "Select your company Facebook page from the drop-down list."
    }],
    "queries": [{
        "errorMessage": "From time to time, your Facebook OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "facebook",
            "type": "facebook",
            "format": "json",
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/me/accounts?fields=name,id",
                "method": "GET",
                "qtype": "Graph API"
            }
        },
        "results": [{
            "propId": "ds.facebook.pageId",
            "propField": "options",
            "labels": "/data/name",
            "values": "/data/id"
        }]
    }]
}