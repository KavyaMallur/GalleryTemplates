{
    "name": "Google Analytics Campaign Performance",
    "description": "See how your campaigns are performing for the selected date range. Originates from the Gallery.",
    "sampleFormulas": {
        "07efbee3": {
            "txt": "\"20160501\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160501"
                }]
            }
        },
        "87a16b5a": {
            "txt": "\"20160525\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160525"
                }]
            }
        },
        "4337ece2": {
            "txt": "\"thismonth\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "thismonth"
                }]
            }
        },
        "91d846b9": {
            "txt": "\"This Month\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "This Month"
                }]
            }
        },
        "2be1148b": {
            "txt": "\"20160401\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160401"
                }]
            }
        },
        "fae6558c": {
            "txt": "\"20160425\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160425"
                }]
            }
        },
        "2f6d15bc": {
            "txt": "\"<b>Klip Marketing</b>\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "<b>Klip Marketing</b>"
                }]
            }
        },
        "28df278e": {
            "txt": "\"0.108\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.108"
                }]
            }
        },
        "7c640fac": {
            "txt": "\"0.1612903225806452400803436830756254494190216064453125\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.1612903225806452400803436830756254494190216064453125"
                }]
            }
        },
        "07f02cbc": {
            "txt": "\"Click Through Rate\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Click Through Rate"
                }]
            }
        },
        "60d00dbd": {
            "txt": "\"0.093\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.093"
                }]
            }
        },
        "93816c1e": {
            "txt": "\"120974\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "120974"
                }]
            }
        },
        "dceceb9d": {
            "txt": "\"-0.1987574760072325918969227132038213312625885009765625\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "-0.1987574760072325918969227132038213312625885009765625"
                }]
            }
        },
        "ef999db4": {
            "txt": "\"Sessions\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Sessions"
                }]
            }
        },
        "19d58f6f": {
            "txt": "\"150983\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "150983"
                }]
            }
        },
        "26d1c98f": {
            "txt": "\"230\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "230"
                }]
            }
        },
        "b8a1f140": {
            "txt": "\"-0.28348909657320875421504524638294242322444915771484375\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "-0.28348909657320875421504524638294242322444915771484375"
                }]
            }
        },
        "424563e3": {
            "txt": "\"Avg Sessions Duration\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Avg Sessions Duration"
                }]
            }
        },
        "48c0a506": {
            "txt": "\"321\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "321"
                }]
            }
        },
        "7d009453": {
            "txt": "\"0.411\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.411"
                }]
            }
        },
        "2a94efe4": {
            "txt": "\"0.0431472081218273739722235404769890010356903076171875\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.0431472081218273739722235404769890010356903076171875"
                }]
            }
        },
        "4d84480a": {
            "txt": "\"Bounce Rate\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Bounce Rate"
                }]
            }
        },
        "02d2c729": {
            "txt": "\"0.394\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.394"
                }]
            }
        }
    },
    "datasources": {
        "googleAnalytics": {
            "service": "google_analytics",
            "libraryAlias": "GoogleAnalyticsCampaignMetrics",
            "name": "Google Analytics Campaign Metrics",
            "description": "Retrieve detailed Google AdWords metrics on your website's keyword performance through Google Analytics. Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:campaign,ga:date&metrics=ga:sessions,ga:bounces,ga:pageviews,ga:newusers,ga:bounceRate,ga:pageviewsPerSession,ga:sessionDuration,ga:ctr,ga:adClicks,ga:impressions&start-date={date.add(-90).format()}&end-date={date.today}&filters=ga:campaign=={{ds.google_analytics.campaignName}}",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:campaign,ga:date&metrics=ga:sessions,ga:bounces,ga:pageviews,ga:newusers,ga:bounceRate,ga:pageviewsPerSession,ga:sessionDuration,ga:ctr,ga:adClicks,ga:impressions&start-date={date.add(-90).format()}&end-date={date.today}&filters=ga:campaign=={{ds.google_analytics.campaignName}}",
                "max_pages": "1",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}",
                "timePeriod": "&start-date={date.add(-30).format()}&end-date={date.yesterday}"
            }
        }
    },
    "services": [{
        "service": "google_analytics"
    }],
    "dsMappings": {
        "googleAnalytics": "6f83f516c2dec99b40e9doogeraspilk"
    },
    "uiVariables": [{
        "name": "gaPeriod",
        "value": "last7days"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Profile",
        "description": "Select a Google Analytics Profile",
        "isRequired": true
    }, {
        "type": "text",
        "id": "ds.google_analytics.campaignName",
        "label": "Campaign",
        "description": "Enter your Campaign Name",
        "urlEncode": true,
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }]
}
