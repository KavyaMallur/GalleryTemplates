{
    "name": "Google Analytics Email Traffic Performance (Last 30 Days)",
    "description": "Save hours compiling a report on your email traffic performance by presenting this interactive Klip instead. Originates from the Gallery.",
    "sampleFormulas": {
        "b2cd1d54-1": {
            "txt": "array(\"Traffic Stats\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Traffic Stats"
                    }]
                }]
            }
        },
        "53db9b3e-2": {
            "txt": "array(\"Conversions\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Conversions"
                    }]
                }]
            }
        },
        "5a0d1536-3": {
            "txt": "array(\"Behaviour\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Behaviour"
                    }]
                }]
            }
        },
        "23678403": {
            "txt": "array(\"19942\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "19942"
                    }]
                }]
            }
        },
        "b3816c46": {
            "txt": "array(\"Users\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Users"
                    }]
                }]
            }
        },
        "8d9171e7": {
            "txt": "array(\"499\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "499"
                    }]
                }]
            }
        },
        "74915eb5": {
            "txt": "array(\"Goal Completions\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Goal Completions"
                    }]
                }]
            }
        },
        "5885a5dd": {
            "txt": "array(\"0.4552\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "0.4552"
                    }]
                }]
            }
        },
        "fe5875eb": {
            "txt": "array(\"Bounce Rate\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Bounce Rate"
                    }]
                }]
            }
        },
        "ba489619": {
            "txt": "array(\"6612\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "6612"
                    }]
                }]
            }
        },
        "2e0ccd0a": {
            "txt": "array(\"Sessions\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Sessions"
                    }]
                }]
            }
        },
        "4c962249": {
            "txt": "array(\"0.0754\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "0.0754"
                    }]
                }]
            }
        },
        "3810e10c": {
            "txt": "array(\"Goal Conversion Rate\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Goal Conversion Rate"
                    }]
                }]
            }
        },
        "d50bdd7f": {
            "txt": "array(\"190.00694\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "190.00694"
                    }]
                }]
            }
        },
        "374068d4": {
            "txt": "array(\"Avg Time on Page\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Avg Time on Page"
                    }]
                }]
            }
        },
        "4755cc0c": {
            "txt": "array(\"134\",\"118\",\"92\",\"120\",\"91\",\"126\",\"109\",\"139\",\"110\",\"135\",\"91\",\"98\",\"143\",\"91\",\"104\",\"123\",\"129\",\"137\",\"123\",\"143\",\"117\",\"124\",\"114\",\"136\",\"111\",\"127\",\"101\",\"114\",\"102\",\"92\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "134"
                    }, {
                        "t": "l",
                        "v": "118"
                    }, {
                        "t": "l",
                        "v": "92"
                    }, {
                        "t": "l",
                        "v": "120"
                    }, {
                        "t": "l",
                        "v": "91"
                    }, {
                        "t": "l",
                        "v": "126"
                    }, {
                        "t": "l",
                        "v": "109"
                    }, {
                        "t": "l",
                        "v": "139"
                    }, {
                        "t": "l",
                        "v": "110"
                    }, {
                        "t": "l",
                        "v": "135"
                    }, {
                        "t": "l",
                        "v": "91"
                    }, {
                        "t": "l",
                        "v": "98"
                    }, {
                        "t": "l",
                        "v": "143"
                    }, {
                        "t": "l",
                        "v": "91"
                    }, {
                        "t": "l",
                        "v": "104"
                    }, {
                        "t": "l",
                        "v": "123"
                    }, {
                        "t": "l",
                        "v": "129"
                    }, {
                        "t": "l",
                        "v": "137"
                    }, {
                        "t": "l",
                        "v": "123"
                    }, {
                        "t": "l",
                        "v": "143"
                    }, {
                        "t": "l",
                        "v": "117"
                    }, {
                        "t": "l",
                        "v": "124"
                    }, {
                        "t": "l",
                        "v": "114"
                    }, {
                        "t": "l",
                        "v": "136"
                    }, {
                        "t": "l",
                        "v": "111"
                    }, {
                        "t": "l",
                        "v": "127"
                    }, {
                        "t": "l",
                        "v": "101"
                    }, {
                        "t": "l",
                        "v": "114"
                    }, {
                        "t": "l",
                        "v": "102"
                    }, {
                        "t": "l",
                        "v": "92"
                    }]
                }]
            }
        },
        "5890e60e": {
            "txt": "array(\"30\",\"26\",\"82\",\"52\",\"87\",\"28\",\"72\",\"20\",\"34\",\"71\",\"59\",\"34\",\"33\",\"89\",\"41\",\"74\",\"69\",\"66\",\"43\",\"46\",\"83\",\"78\",\"49\",\"77\",\"86\",\"40\",\"50\",\"44\",\"57\",\"62\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "30"
                    }, {
                        "t": "l",
                        "v": "26"
                    }, {
                        "t": "l",
                        "v": "82"
                    }, {
                        "t": "l",
                        "v": "52"
                    }, {
                        "t": "l",
                        "v": "87"
                    }, {
                        "t": "l",
                        "v": "28"
                    }, {
                        "t": "l",
                        "v": "72"
                    }, {
                        "t": "l",
                        "v": "20"
                    }, {
                        "t": "l",
                        "v": "34"
                    }, {
                        "t": "l",
                        "v": "71"
                    }, {
                        "t": "l",
                        "v": "59"
                    }, {
                        "t": "l",
                        "v": "34"
                    }, {
                        "t": "l",
                        "v": "33"
                    }, {
                        "t": "l",
                        "v": "89"
                    }, {
                        "t": "l",
                        "v": "41"
                    }, {
                        "t": "l",
                        "v": "74"
                    }, {
                        "t": "l",
                        "v": "69"
                    }, {
                        "t": "l",
                        "v": "66"
                    }, {
                        "t": "l",
                        "v": "43"
                    }, {
                        "t": "l",
                        "v": "46"
                    }, {
                        "t": "l",
                        "v": "83"
                    }, {
                        "t": "l",
                        "v": "78"
                    }, {
                        "t": "l",
                        "v": "49"
                    }, {
                        "t": "l",
                        "v": "77"
                    }, {
                        "t": "l",
                        "v": "86"
                    }, {
                        "t": "l",
                        "v": "40"
                    }, {
                        "t": "l",
                        "v": "50"
                    }, {
                        "t": "l",
                        "v": "44"
                    }, {
                        "t": "l",
                        "v": "57"
                    }, {
                        "t": "l",
                        "v": "62"
                    }]
                }]
            }
        },
        "1f6608be-2": {
            "txt": "array(\"18.08\",\"4.70\",\"11.97\",\"16.11\",\"35.18\",\"2.86\",\"43.01\",\"29.07\",\"49.71\",\"12.84\",\"11.59\",\"35.18\",\"40.33\",\"31.37\",\"3.96\",\"30.53\",\"17.51\",\"4.11\",\"4.33\",\"37.25\",\"35.69\",\"41.50\",\"28.59\",\"12.57\",\"37.31\",\"27.75\",\"1.59\",\"16.52\",\"28.46\",\"47.70\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "18.08"
                    }, {
                        "t": "l",
                        "v": "4.70"
                    }, {
                        "t": "l",
                        "v": "11.97"
                    }, {
                        "t": "l",
                        "v": "16.11"
                    }, {
                        "t": "l",
                        "v": "35.18"
                    }, {
                        "t": "l",
                        "v": "2.86"
                    }, {
                        "t": "l",
                        "v": "43.01"
                    }, {
                        "t": "l",
                        "v": "29.07"
                    }, {
                        "t": "l",
                        "v": "49.71"
                    }, {
                        "t": "l",
                        "v": "12.84"
                    }, {
                        "t": "l",
                        "v": "11.59"
                    }, {
                        "t": "l",
                        "v": "35.18"
                    }, {
                        "t": "l",
                        "v": "40.33"
                    }, {
                        "t": "l",
                        "v": "31.37"
                    }, {
                        "t": "l",
                        "v": "3.96"
                    }, {
                        "t": "l",
                        "v": "30.53"
                    }, {
                        "t": "l",
                        "v": "17.51"
                    }, {
                        "t": "l",
                        "v": "4.11"
                    }, {
                        "t": "l",
                        "v": "4.33"
                    }, {
                        "t": "l",
                        "v": "37.25"
                    }, {
                        "t": "l",
                        "v": "35.69"
                    }, {
                        "t": "l",
                        "v": "41.50"
                    }, {
                        "t": "l",
                        "v": "28.59"
                    }, {
                        "t": "l",
                        "v": "12.57"
                    }, {
                        "t": "l",
                        "v": "37.31"
                    }, {
                        "t": "l",
                        "v": "27.75"
                    }, {
                        "t": "l",
                        "v": "1.59"
                    }, {
                        "t": "l",
                        "v": "16.52"
                    }, {
                        "t": "l",
                        "v": "28.46"
                    }, {
                        "t": "l",
                        "v": "47.70"
                    }]
                }]
            }
        },
        "e8d501ea": {
            "txt": "array(\"20151027\",\"20151028\",\"20151029\",\"20151030\",\"20151031\",\"20151101\",\"20151102\",\"20151103\",\"20151104\",\"20151105\",\"20151106\",\"20151107\",\"20151108\",\"20151109\",\"20151110\",\"20151111\",\"20151112\",\"20151113\",\"20151114\",\"20151115\",\"20151116\",\"20151117\",\"20151118\",\"20151119\",\"20151120\",\"20151121\",\"20151122\",\"20151123\",\"20151124\",\"20151125\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "20151027"
                    }, {
                        "t": "l",
                        "v": "20151028"
                    }, {
                        "t": "l",
                        "v": "20151029"
                    }, {
                        "t": "l",
                        "v": "20151030"
                    }, {
                        "t": "l",
                        "v": "20151031"
                    }, {
                        "t": "l",
                        "v": "20151101"
                    }, {
                        "t": "l",
                        "v": "20151102"
                    }, {
                        "t": "l",
                        "v": "20151103"
                    }, {
                        "t": "l",
                        "v": "20151104"
                    }, {
                        "t": "l",
                        "v": "20151105"
                    }, {
                        "t": "l",
                        "v": "20151106"
                    }, {
                        "t": "l",
                        "v": "20151107"
                    }, {
                        "t": "l",
                        "v": "20151108"
                    },{
                        "t": "l",
                        "v": "20151109"
                    }, {
                        "t": "l",
                        "v": "20151110"
                    }, {
                        "t": "l",
                        "v": "20151111"
                    }, {
                        "t": "l",
                        "v": "20151112"
                    }, {
                        "t": "l",
                        "v": "20151113"
                    }, {
                        "t": "l",
                        "v": "20151114"
                    }, {
                        "t": "l",
                        "v": "20151115"
                    }, {
                        "t": "l",
                        "v": "20151116"
                    }, {
                        "t": "l",
                        "v": "20151117"
                    }, {
                        "t": "l",
                        "v": "20151118"
                    }, {
                        "t": "l",
                        "v": "20151119"
                    }, {
                        "t": "l",
                        "v": "20151120"
                    }, {
                        "t": "l",
                        "v": "20151121"
                    }, {
                        "t": "l",
                        "v": "20151122"
                    }, {
                        "t": "l",
                        "v": "20151123"
                    }, {
                        "t": "l",
                        "v": "20151124"
                    }, {
                        "t": "l",
                        "v": "20151125"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "googleAnalytics": {
            "service": "google_analytics",
            "libraryAlias": "GoogleAnalyticsEmailTraffic",
            "name": "Google Analytics Email Traffic (Last 30 Days)",
            "description": "Shows email traffic performance for the last 30 days. Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&metrics=ga%3Ausers%2Cga%3Asessions%2Cga%3AbounceRate%2Cga%3Agoal12Starts%2Cga%3AgoalCompletionsAll%2Cga%3AgoalConversionRateAll%2Cga%3AavgTimeOnPage&dimensions=ga%3Adate%2Cga%3AchannelGrouping&filters=ga%3AchannelGrouping%3D%3DEmail&start-date={date.add(-30).format()}&end-date={date.yesterday}&max-results=10000",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&metrics=ga%3Ausers%2Cga%3Asessions%2Cga%3AbounceRate%2Cga%3Agoal12Starts%2Cga%3AgoalCompletionsAll%2Cga%3AgoalConversionRateAll%2Cga%3AavgTimeOnPage&dimensions=ga%3Adate%2Cga%3AchannelGrouping&filters=ga%3AchannelGrouping%3D%3DEmail&start-date={date.add(-30).format()}&end-date={date.yesterday}&max-results=10000",
                "max_pages": "10",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}",
                "timePeriod": "&start-date={date.add(-30).format()}&end-date={date.yesterday}"
            }
        }
    },
    "dsMappings": {
        "googleAnalytics": "f6c7b605790c24de11feKavyaMallur9"
    },
    "services": [{
        "service": "google_analytics"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Analytics Account",
        "description": "Select an Analytics Account from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }]
}