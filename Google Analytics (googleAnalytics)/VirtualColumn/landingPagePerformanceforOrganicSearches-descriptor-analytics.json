{
    "name": "Google Analytics Landing Page Performance for Organic Searches (Last 30 Days)",
    "description": "Find out which landing pages are the most popular with organic search traffic, and analyze the experience of those users on your website. Originates from the Gallery.",
    "sampleFormulas": {
        "0a3cfeb2-11": {
            "txt": "array(\"/help/Itsy-Bitsy|#\",\"/help/Hello-World|#\",\"/help/I-Love-Klipfolio|#\",\"/help/Dashboarding-Guru|#\",\"/help/KPIs-are-Best-Friends|#\",\"/help/Lets-build-amazing-dashboards|#\",\"/help/Rock-&-Roll-Dashboards|#\",\"/help/Be-a-Dashboard-Guru|#\",\"/help/BI-Tools|#\",\"/help/Try-our-Klip-Templates|#\",\"/help/Klipfolio-Support-Contact|#\",\"/help/Google-Analytics-Templates|#\",\"/help/Date-Visualization-Tools|#\",\"/help/Data-In-Any-Format|#\",\"/help/MashUp-Services|#\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "/help/Itsy-Bitsy|#"
                    }, {
                        "t": "l",
                        "v": "/help/Hello-World|#"
                    }, {
                        "t": "l",
                        "v": "/help/I-Love-BI|#"
                    }, {
                        "t": "l",
                        "v": "/help/Dashboarding-Guru|#"
                    }, {
                        "t": "l",
                        "v": "/help/KPIs-are-Best-Friends|#"
                    }, {
                        "t": "l",
                        "v": "/help/Lets-build-amazing-dashboards|#"
                    }, {
                        "t": "l",
                        "v": "/help/Rock-&-Roll-Dashboards|#"
                    }, {
                        "t": "l",
                        "v": "/help/Be-a-Dashboard-Guru|#"
                    }, {
                        "t": "l",
                        "v": "/help/BI-Tools|#"
                    }, {
                        "t": "l",
                        "v": "/help/Try-Our-Tool|#"
                    }, {
                        "t": "l",
                        "v": "/help/Support-Contact|#"
                    }, {
                        "t": "l",
                        "v": "/help/Web-Metrics-Templates|#"
                    }, {
                        "t": "l",
                        "v": "/help/Date-Visualization-Tools|#"
                    }, {
                        "t": "l",
                        "v": "/help/Data-In-Any-Format|#"
                    }, {
                        "t": "l",
                        "v": "/help/MashUp-Services|#"
                    }]
                }]
            }
        },
        "ca00dc2c-13": {
            "txt": "array(\"121037\",\"28157.5\",\"21273\",\"15368.5\",\"14906.5\",\"14413\",\"10661\",\"10013.5\",\"9600.5\",\"7402.5\",\"6954.5\",\"5631.5\",\"5565\",\"5148.5\",\"5103\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "121037"
                    }, {
                        "t": "l",
                        "v": "28157.5"
                    }, {
                        "t": "l",
                        "v": "21273"
                    }, {
                        "t": "l",
                        "v": "15368.5"
                    }, {
                        "t": "l",
                        "v": "14906.5"
                    }, {
                        "t": "l",
                        "v": "14413"
                    }, {
                        "t": "l",
                        "v": "10661"
                    }, {
                        "t": "l",
                        "v": "10013.5"
                    }, {
                        "t": "l",
                        "v": "9600.5"
                    }, {
                        "t": "l",
                        "v": "7402.5"
                    }, {
                        "t": "l",
                        "v": "6954.5"
                    }, {
                        "t": "l",
                        "v": "5631.5"
                    }, {
                        "t": "l",
                        "v": "5565"
                    }, {
                        "t": "l",
                        "v": "5148.5"
                    }, {
                        "t": "l",
                        "v": "5103"
                    }]
                }]
            }
        },
        "3484c516-15": {
            "txt": "array(\"128327.5\",\"53420.5\",\"22666\",\"16142\",\"16397.5\",\"15977.5\",\"11854.5\",\"10598\",\"10349.5\",\"7976.5\",\"7668.5\",\"6013\",\"6055\",\"5572\",\"5393.5\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "128327.5"
                    }, {
                        "t": "l",
                        "v": "53420.5"
                    }, {
                        "t": "l",
                        "v": "22666"
                    }, {
                        "t": "l",
                        "v": "16142"
                    }, {
                        "t": "l",
                        "v": "16397.5"
                    }, {
                        "t": "l",
                        "v": "15977.5"
                    }, {
                        "t": "l",
                        "v": "11854.5"
                    }, {
                        "t": "l",
                        "v": "10598"
                    }, {
                        "t": "l",
                        "v": "10349.5"
                    }, {
                        "t": "l",
                        "v": "7976.5"
                    }, {
                        "t": "l",
                        "v": "7668.5"
                    }, {
                        "t": "l",
                        "v": "6013"
                    }, {
                        "t": "l",
                        "v": "6055"
                    }, {
                        "t": "l",
                        "v": "5572"
                    }, {
                        "t": "l",
                        "v": "5393.5"
                    }]
                }]
            }
        },
        "f1058676-19": {
            "txt": "array(\"1698\",\"2562\",\"110\",\"532\",\"162\",\"250\",\"90\",\"82\",\"108\",\"64\",\"48\",\"34\",\"72\",\"16\",\"236\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "1698"
                    }, {
                        "t": "l",
                        "v": "2562"
                    }, {
                        "t": "l",
                        "v": "110"
                    }, {
                        "t": "l",
                        "v": "532"
                    }, {
                        "t": "l",
                        "v": "162"
                    }, {
                        "t": "l",
                        "v": "250"
                    }, {
                        "t": "l",
                        "v": "90"
                    }, {
                        "t": "l",
                        "v": "82"
                    }, {
                        "t": "l",
                        "v": "108"
                    }, {
                        "t": "l",
                        "v": "64"
                    }, {
                        "t": "l",
                        "v": "48"
                    }, {
                        "t": "l",
                        "v": "34"
                    }, {
                        "t": "l",
                        "v": "72"
                    }, {
                        "t": "l",
                        "v": "16"
                    }, {
                        "t": "l",
                        "v": "236"
                    }]
                }]
            }
        },
        "d8ae64fd-17": {
            "txt": "array(\"0.5133\",\"0.2889\",\"1.1766\",\"0.5226\",\"0.9092\",\"0.7672\",\"0.7980\",\"1.1765\",\"0.7482\",\"0.8451\",\"0.7845\",\"1.3550\",\"1.1939\",\"1.3803\",\"0.8303\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "0.5133"
                    }, {
                        "t": "l",
                        "v": "0.2889"
                    }, {
                        "t": "l",
                        "v": "1.1766"
                    }, {
                        "t": "l",
                        "v": "0.5226"
                    }, {
                        "t": "l",
                        "v": "0.9092"
                    }, {
                        "t": "l",
                        "v": "0.7672"
                    }, {
                        "t": "l",
                        "v": "0.7980"
                    }, {
                        "t": "l",
                        "v": "1.1765"
                    }, {
                        "t": "l",
                        "v": "0.7482"
                    }, {
                        "t": "l",
                        "v": "0.8451"
                    }, {
                        "t": "l",
                        "v": "0.7845"
                    }, {
                        "t": "l",
                        "v": "1.3550"
                    }, {
                        "t": "l",
                        "v": "1.1939"
                    }, {
                        "t": "l",
                        "v": "1.3803"
                    }, {
                        "t": "l",
                        "v": "0.8303"
                    }]
                }]
            }
        },
        "c0b6713c-21": {
            "txt": "array(\"267.0968\",\"582.7256\",\"525.3696\",\"199.1543\",\"409.3945\",\"352.1030\",\"326.5516\",\"419.3166\",\"299.4457\",\"316.6316\",\"382.1728\",\"667.1797\",\"371.5886\",\"1261.3644\",\"330.9745\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "267.0968"
                    }, {
                        "t": "l",
                        "v": "582.7256"
                    }, {
                        "t": "l",
                        "v": "525.3696"
                    }, {
                        "t": "l",
                        "v": "199.1543"
                    }, {
                        "t": "l",
                        "v": "409.3945"
                    }, {
                        "t": "l",
                        "v": "352.1030"
                    }, {
                        "t": "l",
                        "v": "326.5516"
                    }, {
                        "t": "l",
                        "v": "419.3166"
                    }, {
                        "t": "l",
                        "v": "299.4457"
                    }, {
                        "t": "l",
                        "v": "316.6316"
                    }, {
                        "t": "l",
                        "v": "382.1728"
                    }, {
                        "t": "l",
                        "v": "667.1797"
                    }, {
                        "t": "l",
                        "v": "371.5886"
                    }, {
                        "t": "l",
                        "v": "1261.3644"
                    }, {
                        "t": "l",
                        "v": "330.9745"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "googleAnalytics": {
            "service": "google_analytics",
            "libraryAlias": "GoogleAnalyticsOrganicSearchLandingPagePerformanceLast30Days",
            "name": "Google Analytics Organic Search Landing Page Performance (Last 30 Days)",
            "description": "Retrieve detailed Google AdWords metrics on your website's keyword performance through Google Analytics. Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&metrics=ga:users,ga:sessions,ga:bounceRate,ga:goalCompletionsAll,ga:avgTimeOnPage&dimensions=ga:hostname,ga:landingPagePath,ga:channelGrouping&filters=ga%3AchannelGrouping%3D%3DOrganic%20Search%3Bga%3Asessions%3E20&start-date={date.add(-30).format()}&end-date={date.yesterday}&max-results=10000",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&metrics=ga:users,ga:sessions,ga:bounceRate,ga:goalCompletionsAll,ga:avgTimeOnPage&dimensions=ga:hostname,ga:landingPagePath,ga:channelGrouping&filters=ga%3AchannelGrouping%3D%3DOrganic%20Search%3Bga%3Asessions%3E20&start-date={date.add(-30).format()}&end-date={date.yesterday}&max-results=10000",
                "max_pages": "1",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}",
                "timePeriod": "&start-date={date.add(-30).format()}&end-date={date.yesterday}"
            }
        }
    },
    "dsMappings": {
        "googleAnalytics": "f4c67ca5014e95cac5a2doogeraspilk"
    },
    "services": [{
        "service": "google_analytics"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Analytics Account",
        "description": "Select an Analytics Account from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }]
}
