{
    "name": "Google Analytics AdWords Keyword Performance (Last 30 Days)",
    "description": "With detailed metrics on your site’s keyword performance, you’ll always know when to adjust your AdWords strategy. Originates from the Gallery. (v1.1)",
    "sampleFormulas": {
        "ed022a39-2": {
            "txt": "array(\"key performance indicator\",\"kpi data\",\"+dashboard +reports\",\"business intelligence dashboard\",\"kpi management tools\",\"developer kpi\",\"+bi +dashboard\",\"kpi monitoring\",\"+bi +tools\",\"+dashboard +system\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "key performance indicator"
                    }, {
                        "t": "l",
                        "v": "kpi data"
                    }, {
                        "t": "l",
                        "v": "+dashboard +reports"
                    }, {
                        "t": "l",
                        "v": "business intelligence dashboard"
                    }, {
                        "t": "l",
                        "v": "kpi management tools"
                    }, {
                        "t": "l",
                        "v": "developer kpi"
                    }, {
                        "t": "l",
                        "v": "+bi +dashboard"
                    }, {
                        "t": "l",
                        "v": "kpi monitoring"
                    }, {
                        "t": "l",
                        "v": "+bi +tools"
                    }, {
                        "t": "l",
                        "v": "+dashboard +system"
                    }]
                }]
            }
        },
        "f14333c3-4": {
            "txt": "array(\"4991\",\"4707.5\",\"2439.5\",\"1253\",\"819\",\"815.5\",\"574\",\"570.5\",\"567\",\"406\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "4991"
                    }, {
                        "t": "l",
                        "v": "4707.5"
                    }, {
                        "t": "l",
                        "v": "2439.5"
                    }, {
                        "t": "l",
                        "v": "1253"
                    }, {
                        "t": "l",
                        "v": "819"
                    }, {
                        "t": "l",
                        "v": "815.5"
                    }, {
                        "t": "l",
                        "v": "574"
                    }, {
                        "t": "l",
                        "v": "570.5"
                    }, {
                        "t": "l",
                        "v": "567"
                    }, {
                        "t": "l",
                        "v": "406"
                    }]
                }]
            }
        },
        "5c7a531e-6": {
            "txt": "array(\"399\",\"371\",\"189\",\"35\",\"52.5\",\"126\",\"24.5\",\"31.5\",\"49\",\"24.5\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "399"
                    }, {
                        "t": "l",
                        "v": "371"
                    }, {
                        "t": "l",
                        "v": "189"
                    }, {
                        "t": "l",
                        "v": "35"
                    }, {
                        "t": "l",
                        "v": "52.5"
                    }, {
                        "t": "l",
                        "v": "126"
                    }, {
                        "t": "l",
                        "v": "24.5"
                    }, {
                        "t": "l",
                        "v": "31.5"
                    }, {
                        "t": "l",
                        "v": "49"
                    }, {
                        "t": "l",
                        "v": "24.5"
                    }]
                }]
            }
        },
        "d3a2ee5b-8": {
            "txt": "array(\"0.1424\",\"0.1396\",\"0.1395\",\"0.0464\",\"0.1204\",\"0.2686\",\"0.0748\",\"0.0947\",\"0.1618\",\"0.1111\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "0.1424"
                    }, {
                        "t": "l",
                        "v": "0.1396"
                    }, {
                        "t": "l",
                        "v": "0.1395"
                    }, {
                        "t": "l",
                        "v": "0.0464"
                    }, {
                        "t": "l",
                        "v": "0.1204"
                    }, {
                        "t": "l",
                        "v": "0.2686"
                    }, {
                        "t": "l",
                        "v": "0.0748"
                    }, {
                        "t": "l",
                        "v": "0.0947"
                    }, {
                        "t": "l",
                        "v": "0.1618"
                    }, {
                        "t": "l",
                        "v": "0.1111"
                    }]
                }]
            }
        },
        "d440e0d1-10": {
            "txt": "array(\"0.8430\",\"0.8507\",\"0.8598\",\"0.4517\",\"0.7907\",\"0.6115\",\"0.8176\",\"0.8452\",\"0.8329\",\"0.8992\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "0.8430"
                    }, {
                        "t": "l",
                        "v": "0.8507"
                    }, {
                        "t": "l",
                        "v": "0.8598"
                    }, {
                        "t": "l",
                        "v": "0.4517"
                    }, {
                        "t": "l",
                        "v": "0.7907"
                    }, {
                        "t": "l",
                        "v": "0.6115"
                    }, {
                        "t": "l",
                        "v": "0.8176"
                    }, {
                        "t": "l",
                        "v": "0.8452"
                    }, {
                        "t": "l",
                        "v": "0.8329"
                    }, {
                        "t": "l",
                        "v": "0.8992"
                    }]
                }]
            }
        },
        "8fab89e0-12": {
            "txt": "array(\"937.4118\",\"1185.6566\",\"2476.8405\",\"403.60361\",\"696.3635\",\"659.1510\",\"786.4850\",\"841.8056\",\"625.5586\",\"276.0789\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "937.4118"
                    }, {
                        "t": "l",
                        "v": "1185.6566"
                    }, {
                        "t": "l",
                        "v": "2476.8405"
                    }, {
                        "t": "l",
                        "v": "403.60361"
                    }, {
                        "t": "l",
                        "v": "696.3635"
                    }, {
                        "t": "l",
                        "v": "659.1510"
                    }, {
                        "t": "l",
                        "v": "786.4850"
                    }, {
                        "t": "l",
                        "v": "841.8056"
                    }, {
                        "t": "l",
                        "v": "625.5586"
                    }, {
                        "t": "l",
                        "v": "276.0789"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "googleAnalytics": {
            "service": "google_analytics",
            "libraryAlias": "GoogleAnalyticsAdWordsKeywordPerformanceLast30Days",
            "name": "Google Analytics AdWords Keyword Performance (Last 30 Days)",
            "description": "Retrieve detailed Google AdWords metrics on your website's keyword performance through Google Analytics. Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&metrics=ga:users,ga:sessions,ga:bounceRate,ga:goalCompletionsAll,ga:goalConversionRateAll,ga:pageviewsPerSession,ga:avgTimeOnPage,ga:bounces&dimensions=ga:campaign,ga:keyword,ga:adDistributionNetwork,ga:adwordsCampaignID&filters=ga%3AadwordsCampaignID!%3D(not%20set)%3Bga%3AadDistributionNetwork%3D%40Search&start-date={date.add(-30).format()}&end-date={date.yesterday}&max-results=10000",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&metrics=ga:users,ga:sessions,ga:bounceRate,ga:goalCompletionsAll,ga:goalConversionRateAll,ga:pageviewsPerSession,ga:avgTimeOnPage,ga:bounces&dimensions=ga:campaign,ga:keyword,ga:adDistributionNetwork,ga:adwordsCampaignID&filters=ga%3AadwordsCampaignID!%3D(not%20set)%3Bga%3AadDistributionNetwork%3D%40Search&start-date={date.add(-30).format()}&end-date={date.yesterday}&max-results=10000",
                "max_pages": "1",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}",
                "timePeriod": "&start-date={date.add(-30).format()}&end-date={date.yesterday}"
            }
        }
    },
    "dsMappings": {
        "googleAnalytics": "bdf6c2ef95e1ecd0eb0adoogeraspilk"
    },
    "services": [{
        "service": "google_analytics"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Analytics Account",
        "description": "Select an Analytics Account from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }]
}
