{
    "name": "Google Analytics Users and Goals (Last 30 Days)",
    "description": "Feel the pulse of your digital marketing efforts by comparing your website users, goals and conversion rates on a bar and line chart. Originates from the Gallery.",
    "sampleFormulas": {
        "96afe7fd-2": {
            "txt": "array(\"3886\",\"2386\",\"4778\",\"4346\",\"3292\",\"2781\",\"9059\",\"5735\",\"9666\",\"3024\",\"7963\",\"2144\",\"3680\",\"7882\",\"6506\",\"3741\",\"3553\",\"9807\",\"4500\",\"8196\",\"7608\",\"7338\",\"4733\",\"5009\",\"9184\",\"8588\",\"5418\",\"8532\",\"9545\",\"4369\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "3886"
                    }, {
                        "t": "l",
                        "v": "2386"
                    }, {
                        "t": "l",
                        "v": "4778"
                    }, {
                        "t": "l",
                        "v": "4346"
                    }, {
                        "t": "l",
                        "v": "3292"
                    }, {
                        "t": "l",
                        "v": "2781"
                    }, {
                        "t": "l",
                        "v": "9059"
                    }, {
                        "t": "l",
                        "v": "5735"
                    }, {
                        "t": "l",
                        "v": "9666"
                    }, {
                        "t": "l",
                        "v": "3024"
                    }, {
                        "t": "l",
                        "v": "7963"
                    }, {
                        "t": "l",
                        "v": "2144"
                    }, {
                        "t": "l",
                        "v": "3680"
                    }, {
                        "t": "l",
                        "v": "7882"
                    }, {
                        "t": "l",
                        "v": "6506"
                    }, {
                        "t": "l",
                        "v": "3741"
                    }, {
                        "t": "l",
                        "v": "3553"
                    }, {
                        "t": "l",
                        "v": "9807"
                    }, {
                        "t": "l",
                        "v": "4500"
                    }, {
                        "t": "l",
                        "v": "8196"
                    }, {
                        "t": "l",
                        "v": "7608"
                    }, {
                        "t": "l",
                        "v": "7338"
                    }, {
                        "t": "l",
                        "v": "4733"
                    }, {
                        "t": "l",
                        "v": "5009"
                    }, {
                        "t": "l",
                        "v": "9184"
                    }, {
                        "t": "l",
                        "v": "8588"
                    }, {
                        "t": "l",
                        "v": "5418"
                    }, {
                        "t": "l",
                        "v": "8532"
                    }, {
                        "t": "l",
                        "v": "9545"
                    }, {
                        "t": "l",
                        "v": "4369"
                    }]
                }]
            }
        },
        "1332fa93-6": {
            "txt": "array(\"626\",\"684\",\"723\",\"756\",\"830\",\"913\",\"691\",\"460\",\"484\",\"491\",\"863\",\"464\",\"339\",\"687\",\"727\",\"394\",\"692\",\"451\",\"563\",\"404\",\"858\",\"227\",\"397\",\"924\",\"724\",\"383\",\"270\",\"840\",\"337\",\"613\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "626"
                    }, {
                        "t": "l",
                        "v": "684"
                    }, {
                        "t": "l",
                        "v": "723"
                    }, {
                        "t": "l",
                        "v": "756"
                    }, {
                        "t": "l",
                        "v": "830"
                    }, {
                        "t": "l",
                        "v": "913"
                    }, {
                        "t": "l",
                        "v": "691"
                    }, {
                        "t": "l",
                        "v": "460"
                    }, {
                        "t": "l",
                        "v": "484"
                    }, {
                        "t": "l",
                        "v": "491"
                    }, {
                        "t": "l",
                        "v": "863"
                    }, {
                        "t": "l",
                        "v": "464"
                    }, {
                        "t": "l",
                        "v": "339"
                    }, {
                        "t": "l",
                        "v": "687"
                    }, {
                        "t": "l",
                        "v": "727"
                    }, {
                        "t": "l",
                        "v": "394"
                    }, {
                        "t": "l",
                        "v": "692"
                    }, {
                        "t": "l",
                        "v": "451"
                    }, {
                        "t": "l",
                        "v": "563"
                    }, {
                        "t": "l",
                        "v": "404"
                    }, {
                        "t": "l",
                        "v": "858"
                    }, {
                        "t": "l",
                        "v": "227"
                    }, {
                        "t": "l",
                        "v": "397"
                    }, {
                        "t": "l",
                        "v": "924"
                    }, {
                        "t": "l",
                        "v": "724"
                    }, {
                        "t": "l",
                        "v": "383"
                    }, {
                        "t": "l",
                        "v": "270"
                    }, {
                        "t": "l",
                        "v": "840"
                    }, {
                        "t": "l",
                        "v": "337"
                    }, {
                        "t": "l",
                        "v": "613"
                    }]
                }]
            }
        },
        "731721cd-8": {
            "txt": "array(\"46.21\",\"29.50\",\"43.73\",\"37.56\",\"33.16\",\"13.29\",\"9.37\",\"31.64\",\"6.88\",\"31.25\",\"8.75\",\"22.69\",\"25.96\",\"30.32\",\"42.09\",\"48.36\",\"33.46\",\"28.86\",\"20.06\",\"29.32\",\"47.23\",\"6.02\",\"18.49\",\"10.89\",\"48.11\",\"24.52\",\"23.48\",\"1.52\",\"47.93\",\"1.07\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "46.21"
                    }, {
                        "t": "l",
                        "v": "29.50"
                    }, {
                        "t": "l",
                        "v": "43.73"
                    }, {
                        "t": "l",
                        "v": "37.56"
                    }, {
                        "t": "l",
                        "v": "33.16"
                    }, {
                        "t": "l",
                        "v": "13.29"
                    }, {
                        "t": "l",
                        "v": "9.37"
                    }, {
                        "t": "l",
                        "v": "31.64"
                    }, {
                        "t": "l",
                        "v": "6.88"
                    }, {
                        "t": "l",
                        "v": "31.25"
                    }, {
                        "t": "l",
                        "v": "8.75"
                    }, {
                        "t": "l",
                        "v": "22.69"
                    }, {
                        "t": "l",
                        "v": "25.96"
                    }, {
                        "t": "l",
                        "v": "30.32"
                    }, {
                        "t": "l",
                        "v": "42.09"
                    }, {
                        "t": "l",
                        "v": "48.36"
                    }, {
                        "t": "l",
                        "v": "33.46"
                    }, {
                        "t": "l",
                        "v": "28.86"
                    }, {
                        "t": "l",
                        "v": "20.06"
                    }, {
                        "t": "l",
                        "v": "29.32"
                    }, {
                        "t": "l",
                        "v": "47.23"
                    }, {
                        "t": "l",
                        "v": "6.02"
                    }, {
                        "t": "l",
                        "v": "18.49"
                    }, {
                        "t": "l",
                        "v": "10.89"
                    }, {
                        "t": "l",
                        "v": "48.11"
                    }, {
                        "t": "l",
                        "v": "24.52"
                    }, {
                        "t": "l",
                        "v": "23.48"
                    }, {
                        "t": "l",
                        "v": "1.52"
                    }, {
                        "t": "l",
                        "v": "47.93"
                    }, {
                        "t": "l",
                        "v": "1.07"
                    }]
                }]
            }
        },
        "3d863559-3": {
            "txt": "array(\"20151027\",\"20151028\",\"20151029\",\"20151030\",\"20151031\",\"20151101\",\"20151102\",\"20151103\",\"20151104\",\"20151105\",\"20151106\",\"20151107\",\"20151108\",\"20151109\",\"20151110\",\"20151111\",\"20151112\",\"20151113\",\"20151114\",\"20151115\",\"20151116\",\"20151117\",\"20151118\",\"20151119\",\"20151120\",\"20151121\",\"20151122\",\"20151123\",\"20151124\",\"20151125\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "20151027"
                    }, {
                        "t": "l",
                        "v": "20151028"
                    }, {
                        "t": "l",
                        "v": "20151029"
                    }, {
                        "t": "l",
                        "v": "20151030"
                    }, {
                        "t": "l",
                        "v": "20151031"
                    }, {
                        "t": "l",
                        "v": "20151101"
                    }, {
                        "t": "l",
                        "v": "20151102"
                    }, {
                        "t": "l",
                        "v": "20151103"
                    }, {
                        "t": "l",
                        "v": "20151104"
                    }, {
                        "t": "l",
                        "v": "20151105"
                    }, {
                        "t": "l",
                        "v": "20151106"
                    }, {
                        "t": "l",
                        "v": "20151107"
                    }, {
                        "t": "l",
                        "v": "20151108"
                    },{
                        "t": "l",
                        "v": "20151109"
                    }, {
                        "t": "l",
                        "v": "20151110"
                    }, {
                        "t": "l",
                        "v": "20151111"
                    }, {
                        "t": "l",
                        "v": "20151112"
                    }, {
                        "t": "l",
                        "v": "20151113"
                    }, {
                        "t": "l",
                        "v": "20151114"
                    }, {
                        "t": "l",
                        "v": "20151115"
                    }, {
                        "t": "l",
                        "v": "20151116"
                    }, {
                        "t": "l",
                        "v": "20151117"
                    }, {
                        "t": "l",
                        "v": "20151118"
                    }, {
                        "t": "l",
                        "v": "20151119"
                    }, {
                        "t": "l",
                        "v": "20151120"
                    }, {
                        "t": "l",
                        "v": "20151121"
                    }, {
                        "t": "l",
                        "v": "20151122"
                    }, {
                        "t": "l",
                        "v": "20151123"
                    }, {
                        "t": "l",
                        "v": "20151124"
                    }, {
                        "t": "l",
                        "v": "20151125"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "googleAnalytics": {
            "service": "google_analytics",
            "libraryAlias": "GoogleAnalyticsUsersandGoalsLast30Days",
            "name": "Google Analytics Users and Goals (Last 30 Days)",
            "description": "Feel the pulse of your digital marketing efforts by comparing your website users, goals and conversion rates on a bar and line chart. Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:date&metrics=ga:users,ga:goalCompletionsAll,ga:goalConversionRateAll&start-date={date.add(-30).format()}&end-date={date.yesterday}&max-results=10000",
                "max_pages": "10",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}",
                "timePeriod": "&start-date={date.add(-30).format()}&end-date={date.yesterday}"
            }
        }
    },
    "dsMappings": {
        "googleAnalytics": "9bf8ef8d88dacbf22661KavyaMallur9"
    },
    "services": [{
        "service": "google_analytics"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Analytics Account",
        "description": "Select an Analytics Account from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='http://klipfolio.uservoice.com/knowledgebase/articles/404228-oauth-token-expired' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }]
}