{  
   "name":"Total Social Media Conversions",
   "description":"See a summary of total social media lead conversions over the past 30 days. Originates from the Gallery.",
   "datasources":{  
      "googleAnalytics-01":{  
         "service":"google_analytics",
         "libraryAlias":"GASocialConversion",
         "name":"GA Social Conversion",
         "description":"Track sessions to your website via social media for the last 30 days. Originates from the Gallery.",
         "type":"google_analytics",
         "format":"csv",
         "refreshInterval":14400,
         "props":{
            "advancedQuery":"https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date=30daysAgo&end-date=yesterday&metrics=ga:sessions,ga:avgSessionDuration,ga:goalCompletionsAll&dimensions=ga:socialNetwork&filters=ga:socialNetwork!=(not+set);ga:goalCompletionsAll>0",
            "endpoint_url":"https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date=30daysAgo&end-date=yesterday&metrics=ga:sessions,ga:avgSessionDuration,ga:goalCompletionsAll&dimensions=ga:socialNetwork&filters=ga:socialNetwork!=(not+set);ga:goalCompletionsAll>0",
            "max_pages":"1",
            "mode":"Advanced",
            "profile":"{{ds.google_analytics.profileId}}",
            "timePeriod":"&start-date=30daysAgo&end-date=yesterday"
         }
      },
      "googleAnalytics-02":{  
         "service":"google_analytics",
         "libraryAlias":"GASocialConversionPrevPeriod",
         "name":"GA Social Conversion (Prev Period)",
         "description":"Track sessions to your website via social media for 30 days as of 30 days ago. Used for a comparison. Originates from the Gallery.",
         "type":"google_analytics",
         "format":"csv",
         "refreshInterval":14400,
         "props":{
            "advancedQuery":"https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date=60daysAgo&end-date=31daysAgo&metrics=ga:sessions,ga:avgSessionDuration,ga:goalCompletionsAll&dimensions=ga:socialNetwork&filters=ga:socialNetwork!=(not+set);ga:goalCompletionsAll>0",
            "endpoint_url":"https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date=60daysAgo&end-date=31daysAgo&metrics=ga:sessions,ga:avgSessionDuration,ga:goalCompletionsAll&dimensions=ga:socialNetwork&filters=ga:socialNetwork!=(not+set);ga:goalCompletionsAll>0",
            "max_pages":"1",
            "mode":"Advanced",
            "profile":"{{ds.google_analytics.profileId}}",
            "timePeriod":"&start-date=60daysAgo&end-date=31daysAgo"
         }
      }
   },
   "dsMappings":{  
      "googleAnalytics-01":"587a9bf3d3694112e7cfdoogeraspilk",
      "googleAnalytics-02":"f6f1b65d86225a03b355doogeraspilk"
   },
   "services":[  
      {  
         "service":"google_analytics"
      }
   ],
   "datasourceConfigModel":[  
      {  
          "type":"select",
          "id":"ds.google_analytics.profileId",
          "label" : "Analytics Account",
          "description" : "Select an Analytics Account from the drop-down list.",
          "isRequired":true
      }
   ],
   "queries": [
        {
            "errorMessage":"Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='http://klipfolio.uservoice.com/knowledgebase/articles/404228-oauth-token-expired' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
            "connector": {
                "service": "google_analytics",
                "type": "simple_rest",
                "format": "json",
                "props": {
                    "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                    "method": "GET"
                }
            },
            "results": [
                { 
                    "propId" : "ds.google_analytics.profileId",
                    "propField" : "options", 
                    "labels": "/items/name",  
                    "values": "/items/id" 
                }
            ]
        }
    ]
}