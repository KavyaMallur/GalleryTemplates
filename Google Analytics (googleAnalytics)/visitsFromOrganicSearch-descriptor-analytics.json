{
    "name": "Google Analytics Unique Visits from Organic Search (Last 60 Days)",
    "description": "Make sure you are getting a steady stream of unique visitors from organic search.<br>Originates from the Gallery. (v1.0)",
    "sampleFormulas": {
    "ea911926": {
        "txt": "\"\"",
        "src": {
            "t": "expr",
            "v": false,
            "c": [
                {
                    "t": "l",
                    "v": [
                        ""
                    ]
                }
            ]
        }
    },
    "9a957d34": {
        "txt": "array(\"2954\",\"3280\",\"10382\",\"17552\",\"23901\",\"24395\",\"27223\",\"27470\",\"34632\",\"36726\",\"37861\",\"39988\",\"41375\",\"41869\")",
        "src": {
            "t": "expr",
            "v": false,
            "c": [
                {
                    "t": "f",
                    "v": "array",
                    "c": [
                        {
                            "t": "l",
                            "v": "2954"
                        },
                        {
                            "t": "l",
                            "v": "3280"
                        },
                        {
                            "t": "l",
                            "v": "10382"
                        },
                        {
                            "t": "l",
                            "v": "17552"
                        },
                        {
                            "t": "l",
                            "v": "23901"
                        },
                        {
                            "t": "l",
                            "v": "24395"
                        },
                        {
                            "t": "l",
                            "v": "27223"
                        },
                        {
                            "t": "l",
                            "v": "27470"
                        },
                        {
                            "t": "l",
                            "v": "34632"
                        },
                        {
                            "t": "l",
                            "v": "36726"
                        },
                        {
                            "t": "l",
                            "v": "37861"
                        },
                        {
                            "t": "l",
                            "v": "39988"
                        },
                        {
                            "t": "l",
                            "v": "41375"
                        },
                        {
                            "t": "l",
                            "v": "41869"
                        }
                    ]
                }
            ]
        }
    },
    "a6cc5412": {
        "txt": "array(\"2939\",\"6227\",\"6961\",\"7253\",\"8532\",\"9014\",\"9032\",\"11357\",\"12536\",\"12581\",\"12732\",\"12978\",\"14316\",\"15858\",\"16134\",\"16575\",\"17662\",\"17997\",\"18982\",\"20982\",\"21268\",\"22062\",\"23463\",\"24096\",\"24255\",\"24863\",\"25162\",\"25443\",\"25516\",\"25831\")",
        "src": {
            "t": "expr",
            "v": false,
            "c": [
                {
                    "t": "f",
                    "v": "array",
                    "c": [
                        {
                            "t": "l",
                            "v": "2939"
                        },
                        {
                            "t": "l",
                            "v": "6227"
                        },
                        {
                            "t": "l",
                            "v": "6961"
                        },
                        {
                            "t": "l",
                            "v": "7253"
                        },
                        {
                            "t": "l",
                            "v": "8532"
                        },
                        {
                            "t": "l",
                            "v": "9014"
                        },
                        {
                            "t": "l",
                            "v": "9032"
                        },
                        {
                            "t": "l",
                            "v": "11357"
                        },
                        {
                            "t": "l",
                            "v": "12536"
                        },
                        {
                            "t": "l",
                            "v": "12581"
                        },
                        {
                            "t": "l",
                            "v": "12732"
                        },
                        {
                            "t": "l",
                            "v": "12978"
                        },
                        {
                            "t": "l",
                            "v": "14316"
                        },
                        {
                            "t": "l",
                            "v": "15858"
                        },
                        {
                            "t": "l",
                            "v": "16134"
                        },
                        {
                            "t": "l",
                            "v": "16575"
                        },
                        {
                            "t": "l",
                            "v": "17662"
                        },
                        {
                            "t": "l",
                            "v": "17997"
                        },
                        {
                            "t": "l",
                            "v": "18982"
                        },
                        {
                            "t": "l",
                            "v": "20982"
                        },
                        {
                            "t": "l",
                            "v": "21268"
                        },
                        {
                            "t": "l",
                            "v": "22062"
                        },
                        {
                            "t": "l",
                            "v": "23463"
                        },
                        {
                            "t": "l",
                            "v": "24096"
                        },
                        {
                            "t": "l",
                            "v": "24255"
                        },
                        {
                            "t": "l",
                            "v": "24863"
                        },
                        {
                            "t": "l",
                            "v": "25162"
                        },
                        {
                            "t": "l",
                            "v": "25443"
                        },
                        {
                            "t": "l",
                            "v": "25516"
                        },
                        {
                            "t": "l",
                            "v": "25831"
                        }
                    ]
                }
            ]
        }
    },
    "43a74a59": {
        "txt": "array(\"1333.3333333333333\",\"2666.6666666666665\",\"4000\",\"5333.333333333333\",\"6666.666666666666\",\"7999.999999999999\",\"9333.333333333332\",\"10666.666666666666\",\"12000\",\"13333.333333333334\",\"14666.666666666668\",\"16000.000000000002\",\"17333.333333333336\",\"18666.666666666668\",\"20000\",\"21333.333333333332\",\"22666.666666666664\",\"23999.999999999996\",\"25333.33333333333\",\"26666.66666666666\",\"27999.999999999993\",\"29333.333333333325\",\"30666.666666666657\",\"31999.99999999999\",\"33333.33333333332\",\"34666.66666666666\",\"35999.99999999999\",\"37333.33333333333\",\"38666.666666666664\",\"40000\",\"41333.333333333336\")",
        "src": {
            "t": "expr",
            "v": false,
            "c": [
                {
                    "t": "f",
                    "v": "array",
                    "c": [
                        {
                            "t": "l",
                            "v": 1333.3333333333333
                        },
                        {
                            "t": "l",
                            "v": 2666.6666666666665
                        },
                        {
                            "t": "l",
                            "v": 4000
                        },
                        {
                            "t": "l",
                            "v": 5333.333333333333
                        },
                        {
                            "t": "l",
                            "v": 6666.666666666666
                        },
                        {
                            "t": "l",
                            "v": 7999.999999999999
                        },
                        {
                            "t": "l",
                            "v": 9333.333333333332
                        },
                        {
                            "t": "l",
                            "v": 10666.666666666666
                        },
                        {
                            "t": "l",
                            "v": 12000
                        },
                        {
                            "t": "l",
                            "v": 13333.333333333334
                        },
                        {
                            "t": "l",
                            "v": 14666.666666666668
                        },
                        {
                            "t": "l",
                            "v": 16000.000000000002
                        },
                        {
                            "t": "l",
                            "v": 17333.333333333336
                        },
                        {
                            "t": "l",
                            "v": 18666.666666666668
                        },
                        {
                            "t": "l",
                            "v": 20000
                        },
                        {
                            "t": "l",
                            "v": 21333.333333333332
                        },
                        {
                            "t": "l",
                            "v": 22666.666666666664
                        },
                        {
                            "t": "l",
                            "v": 23999.999999999996
                        },
                        {
                            "t": "l",
                            "v": 25333.33333333333
                        },
                        {
                            "t": "l",
                            "v": 26666.66666666666
                        },
                        {
                            "t": "l",
                            "v": 27999.999999999993
                        },
                        {
                            "t": "l",
                            "v": 29333.333333333325
                        },
                        {
                            "t": "l",
                            "v": 30666.666666666657
                        },
                        {
                            "t": "l",
                            "v": 31999.99999999999
                        },
                        {
                            "t": "l",
                            "v": 33333.33333333332
                        },
                        {
                            "t": "l",
                            "v": 34666.66666666666
                        },
                        {
                            "t": "l",
                            "v": 35999.99999999999
                        },
                        {
                            "t": "l",
                            "v": 37333.33333333333
                        },
                        {
                            "t": "l",
                            "v": 38666.666666666664
                        },
                        {
                            "t": "l",
                            "v": 40000
                        },
                        {
                            "t": "l",
                            "v": 41333.333333333336
                        }
                    ]
                }
            ]
        }
    },
    "c6449b2e": {
        "txt": "array(\"20151027\",\"20151028\",\"20151029\",\"20151030\",\"20151031\",\"20151101\",\"20151102\",\"20151103\",\"20151104\",\"20151105\",\"20151106\",\"20151107\",\"20151108\",\"20151109\",\"20151110\",\"20151111\",\"20151112\",\"20151113\",\"20151114\",\"20151115\",\"20151116\",\"20151117\",\"20151118\",\"20151119\",\"20151120\",\"20151121\",\"20151122\",\"20151123\",\"20151124\",\"20151125\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "20151027"
                    }, {
                        "t": "l",
                        "v": "20151028"
                    }, {
                        "t": "l",
                        "v": "20151029"
                    }, {
                        "t": "l",
                        "v": "20151030"
                    }, {
                        "t": "l",
                        "v": "20151031"
                    }, {
                        "t": "l",
                        "v": "20151101"
                    }, {
                        "t": "l",
                        "v": "20151102"
                    }, {
                        "t": "l",
                        "v": "20151103"
                    }, {
                        "t": "l",
                        "v": "20151104"
                    }, {
                        "t": "l",
                        "v": "20151105"
                    }, {
                        "t": "l",
                        "v": "20151106"
                    }, {
                        "t": "l",
                        "v": "20151107"
                    }, {
                        "t": "l",
                        "v": "20151108"
                    },{
                        "t": "l",
                        "v": "20151109"
                    }, {
                        "t": "l",
                        "v": "20151110"
                    }, {
                        "t": "l",
                        "v": "20151111"
                    }, {
                        "t": "l",
                        "v": "20151112"
                    }, {
                        "t": "l",
                        "v": "20151113"
                    }, {
                        "t": "l",
                        "v": "20151114"
                    }, {
                        "t": "l",
                        "v": "20151115"
                    }, {
                        "t": "l",
                        "v": "20151116"
                    }, {
                        "t": "l",
                        "v": "20151117"
                    }, {
                        "t": "l",
                        "v": "20151118"
                    }, {
                        "t": "l",
                        "v": "20151119"
                    }, {
                        "t": "l",
                        "v": "20151120"
                    }, {
                        "t": "l",
                        "v": "20151121"
                    }, {
                        "t": "l",
                        "v": "20151122"
                    }, {
                        "t": "l",
                        "v": "20151123"
                    }, {
                        "t": "l",
                        "v": "20151124"
                    }, {
                        "t": "l",
                        "v": "20151125"
                    }]
                }]
            }
    }
},

    "datasources": {
        "googleAnalytics": {
            "service": "google_analytics",
            "libraryAlias": "GoogleAnalyticsVisitsfromOrganicSearchLast62Days",
            "name": "Google Analytics Visits from Organic Search (Last 62 Days)",
            "description": "Retrieve page views and sessions from organic search. Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids={{ds.google_analytics.profileId}}&start-date={date.add(-62).format()}&end-date={date.yesterday}&dimensions=ga:date&metrics=ga:sessions,ga:uniquePageViews&segment=sessions::condition::ga:medium==organic&max-results=10000",
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids={{ds.google_analytics.profileId}}&start-date={date.add(-62).format()}&end-date={date.yesterday}&dimensions=ga:date&metrics=ga:sessions,ga:uniquePageViews&segment=sessions::condition::ga:medium==organic&max-results=10000",
                "max_pages": "1",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}",
                "timePeriod": "&start-date={date.add(-30).format()}&end-date={date.yesterday}"
            }
        }
    },
    "dsMappings": {
        "googleAnalytics": "61b6296f92fb404fe697natceewzhere"
    },
    "services": [{
        "service": "google_analytics"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Analytics Account",
        "description": "Select an Analytics Account from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }],
    "uiVariables": [
    {
      "name": "gaTarget",
      "value": "400000"
    }
  ]
}
