{
    "name": "Hubspot List Growth (30 Days)",
    "description": "Select one of your HubSpot lists and see how it has grown over the past 30 days. Originates from the Gallery.",
    "sampleFormulas": {
        "243bdf69": {
            "txt": "\"New Year- So, bonus hubspot klips\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "New Year- So, bonus hubspot klips"
                    }]
                }]
            }
        },
        "432f46fc-6": {
            "txt": "array(\"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"210\", \"214\", \"214\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "210"
                    }, {
                        "t": "l",
                        "v": "214"
                    }, {
                        "t": "l",
                        "v": "214"
                    }]
                }]
            }
        },
        "12d68320-7": {
            "txt": "array(\"Dec 26\", \"Dec 27\", \"Dec 28\", \"Dec 29\", \"Dec 30\", \"Dec 31\", \"Jan 1\", \"Jan 2\", \"Jan 3\", \"Jan 4\", \"Jan 5\", \"Jan 6\", \"Jan 7\", \"Jan 8\", \"Jan 9\", \"Jan 10\", \"Jan 11\", \"Jan 12\", \"Jan 13\", \"Jan 14\", \"Jan 15\", \"Jan 16\", \"Jan 17\", \"Jan 18\", \"Jan 19\", \"Jan 20\", \"Jan 21\", \"Jan 22\", \"Jan 23\", \"Jan 24\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Dec 26"
                    }, {
                        "t": "l",
                        "v": "Dec 27"
                    }, {
                        "t": "l",
                        "v": "Dec 28"
                    }, {
                        "t": "l",
                        "v": "Dec 29"
                    }, {
                        "t": "l",
                        "v": "Dec 30"
                    }, {
                        "t": "l",
                        "v": "Dec 31"
                    }, {
                        "t": "l",
                        "v": "Jan 1"
                    }, {
                        "t": "l",
                        "v": "Jan 2"
                    }, {
                        "t": "l",
                        "v": "Jan 3"
                    }, {
                        "t": "l",
                        "v": "Jan 4"
                    }, {
                        "t": "l",
                        "v": "Jan 5"
                    }, {
                        "t": "l",
                        "v": "Jan 6"
                    }, {
                        "t": "l",
                        "v": "Jan 7"
                    }, {
                        "t": "l",
                        "v": "Jan 8"
                    }, {
                        "t": "l",
                        "v": "Jan 9"
                    }, {
                        "t": "l",
                        "v": "Jan 10"
                    }, {
                        "t": "l",
                        "v": "Jan 11"
                    }, {
                        "t": "l",
                        "v": "Jan 12"
                    }, {
                        "t": "l",
                        "v": "Jan 13"
                    }, {
                        "t": "l",
                        "v": "Jan 14"
                    }, {
                        "t": "l",
                        "v": "Jan 15"
                    }, {
                        "t": "l",
                        "v": "Jan 16"
                    }, {
                        "t": "l",
                        "v": "Jan 17"
                    }, {
                        "t": "l",
                        "v": "Jan 18"
                    }, {
                        "t": "l",
                        "v": "Jan 19"
                    }, {
                        "t": "l",
                        "v": "Jan 20"
                    }, {
                        "t": "l",
                        "v": "Jan 21"
                    }, {
                        "t": "l",
                        "v": "Jan 22"
                    }, {
                        "t": "l",
                        "v": "Jan 23"
                    }, {
                        "t": "l",
                        "v": "Jan 24"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "hubspot-01": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "name": "Hubspot Lists",
            "libraryAlias": "HubspotLists",
            "refreshInterval": 14400,
            "description": "Retrieve hubspot lists. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.hubapi.com/contacts/v1/lists?count=10000",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "hubspot-02": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "name": "Hubspot List Growth (Last 30 Days)",
            "libraryAlias": "HubspotListGrowth(Last30Days)",
            "refreshInterval": 14400,
            "description": "Provide hubspot list growth for last 30 days. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.hubapi.com/contacts/v1/lists/{{ds.hubspot.listID}}/sizeAndEditsHistory/between?startDate={date.add(-29).format('yyyy-MM-dd')}&endDate={date.today.format('yyyy-MM-dd')}",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        }
    },

    "dsMappings": {
        "hubspot-01": "84d3fdedc60aca10fcd4KavyaMallur9",
        "hubspot-02": "aabeb7103fd6c9af7483KavyaMallur9"
    },

    "services": [{
        "service": "hubspot"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.hubspot.listID",
        "label": "List",
        "description": "Select an Hubspot List from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "From time to time, your Hubspot OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='http://klipfolio.uservoice.com/knowledgebase/articles/404228-oauth-token-expired' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "props": {
                "endpoint_url": "https://api.hubapi.com/contacts/v1/lists?count=10000",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "results": [{
            "propId": "ds.hubspot.listID",
            "propField": "options",
            "labels": "/lists/name",
            "values": "/lists/listId"
        }]
    }]
}
