{
    "name" : "Hubspot Landing Page Submissions (MTD)",
    "description" : "Track submissions on your chosen landing page this month. Originates from the Gallery.",

    "datasources" : {
        "hubspot-01" : {
            "service" : "hubspot",
            "type" : "hubspot",
            "format" : "json",
            "name" :"Hubspot Landing Pages",
            "libraryAlias" :"HubspotLandingPages",
            "refreshInterval" : 14400,
            "description" :"Retrieve hubspot landing pages. Originates from the Gallery.",
            "props":{
                "endpoint_url": "https://api.hubapi.com/content/api/v2/pages?limit=1000&subcategory=landing_page",
                "method": "get",
                "portalId":"{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "hubspot-02" : {
            "service" : "hubspot",
            "type" : "hubspot",
            "format" : "json",
            "name" :"Hubspot Landing Page Summary (MTD)",
            "libraryAlias" :"HubspotLandingPageSummary(MTD)",
            "refreshInterval" : 14400,
            "description" :"Retrieve landing page summary of selected landing page for this month. Originates from the Gallery.",
            "props":{
                "endpoint_url": "https://api.hubapi.com/analytics/v2/sources/summary/d?start={date.startOfMonth.format('epochTime')}000&end={date.today.format('epochTime')}000&pageId={{ds.hubspot.landingPageID}}",
                "method": "get",
                "portalId":"{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        }
    },

    "dsMappings": {
        "hubspot-01" : "00f8b9a342297d5d24b9KavyaMallur9",
        "hubspot-02" : "adafc51cf38ad978366fKavyaMallur9"
    },

    "services" : [
        {
            "service" : "hubspot"
        }
    ],
    "uiVariables": [{
        "name": "KTdateRange",
        "value": ""
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.hubspot.landingPageID",
        "label": "Landing Page",
        "description": "Select an Hubspot Landing Page from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "From time to time, your Hubspot OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='http://klipfolio.uservoice.com/knowledgebase/articles/404228-oauth-token-expired' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service" : "hubspot",
            "type" : "hubspot",
            "format" : "json",
            "props":{
                "endpoint_url": "https://api.hubapi.com/content/api/v2/pages?limit=1000&subcategory=landing_page",
                "method": "get",
                "portalId":"{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "results": [{
            "propId": "ds.hubspot.landingPageID",
            "propField": "options",
            "labels": "/objects/name",
            "values": "/objects/page_id"
        }]
    }]
}