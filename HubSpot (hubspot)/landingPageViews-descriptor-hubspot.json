{
    "name": "Hubspot Landing Page Views",
    "description": "Make sure your website is generating interest by tracking the number of views over the time period of your choice.<br>Originates from the Gallery. (v1.1)",
    "sampleFormulas": {
        "85349630": {
            "txt": "\"10\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "10"
                }]
            }
        },
        "8d149deb": {
            "txt": "array(\"thismonth\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "thismonth"
                    }]
                }]
            }
        },
        "90666e8c": {
            "txt": "array(\"This Month\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "This Month"
                    }]
                }]
            }
        },
        "9e2dc572": {
            "txt": "\"20160701\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160701"
                }]
            }
        },
        "e56f4373": {
            "txt": "\"20160726\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160726"
                }]
            }
        },
        "fed40634": {
            "txt": "\"20160601\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160601"
                }]
            }
        },
        "f8b4706b": {
            "txt": "\"20160626\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160626"
                }]
            }
        },
        "e11aca82-1": {
            "txt": "\"Creating killer klips for Hubspot\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Creating killer klips for Hubspot"
                }]
            }
        },
        "ecd2eafc-2": {
            "txt": "array(\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"38\",\"57\",\"76\",\"76\",\"76\",\"95\",\"133\",\"133\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 38
                    }, {
                        "t": "l",
                        "v": 57
                    }, {
                        "t": "l",
                        "v": 76
                    }, {
                        "t": "l",
                        "v": 76
                    }, {
                        "t": "l",
                        "v": 76
                    }, {
                        "t": "l",
                        "v": 95
                    }, {
                        "t": "l",
                        "v": 133
                    }, {
                        "t": "l",
                        "v": 133
                    }]
                }]
            }
        },
        "c7f80417-5": {
            "txt": "array(\"0\",\"0\",\"0\",\"0\",\"0\",\"16\",\"16\",\"16\",\"16\",\"32\",\"32\",\"32\",\"32\",\"48\",\"48\",\"48\",\"48\",\"48\",\"48\",\"48\",\"48\",\"48\",\"64\",\"64\",\"64\",\"64\",\"64\",\"64\",\"64\",\"64\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 0
                    }, {
                        "t": "l",
                        "v": 16
                    }, {
                        "t": "l",
                        "v": 16
                    }, {
                        "t": "l",
                        "v": 16
                    }, {
                        "t": "l",
                        "v": 16
                    }, {
                        "t": "l",
                        "v": 32
                    }, {
                        "t": "l",
                        "v": 32
                    }, {
                        "t": "l",
                        "v": 32
                    }, {
                        "t": "l",
                        "v": 32
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 48
                    }, {
                        "t": "l",
                        "v": 64
                    }, {
                        "t": "l",
                        "v": 64
                    }, {
                        "t": "l",
                        "v": 64
                    }, {
                        "t": "l",
                        "v": 64
                    }, {
                        "t": "l",
                        "v": 64
                    }, {
                        "t": "l",
                        "v": 64
                    }, {
                        "t": "l",
                        "v": 64
                    }, {
                        "t": "l",
                        "v": 64
                    }]
                }]
            }
        },
        "28f85da7-6": {
            "txt": "array(\"0.3225806451612903\",\"0.6451612903225806\",\"0.967741935483871\",\"1.2903225806451613\",\"1.6129032258064515\",\"1.9354838709677418\",\"2.258064516129032\",\"2.5806451612903225\",\"2.903225806451613\",\"3.2258064516129035\",\"3.548387096774194\",\"3.8709677419354844\",\"4.193548387096775\",\"4.516129032258065\",\"4.838709677419355\",\"5.161290322580645\",\"5.483870967741935\",\"5.806451612903225\",\"6.129032258064515\",\"6.451612903225805\",\"6.774193548387095\",\"7.096774193548385\",\"7.419354838709675\",\"7.741935483870965\",\"8.064516129032256\",\"8.387096774193546\",\"8.709677419354836\",\"9.032258064516126\",\"9.354838709677416\",\"9.677419354838706\",\"9.999999999999996\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 0.3225806451612903
                    }, {
                        "t": "l",
                        "v": 0.6451612903225806
                    }, {
                        "t": "l",
                        "v": 0.967741935483871
                    }, {
                        "t": "l",
                        "v": 1.2903225806451613
                    }, {
                        "t": "l",
                        "v": 1.6129032258064515
                    }, {
                        "t": "l",
                        "v": 1.9354838709677418
                    }, {
                        "t": "l",
                        "v": 2.258064516129032
                    }, {
                        "t": "l",
                        "v": 2.5806451612903225
                    }, {
                        "t": "l",
                        "v": 2.903225806451613
                    }, {
                        "t": "l",
                        "v": 3.2258064516129035
                    }, {
                        "t": "l",
                        "v": 3.548387096774194
                    }, {
                        "t": "l",
                        "v": 3.8709677419354844
                    }, {
                        "t": "l",
                        "v": 4.193548387096775
                    }, {
                        "t": "l",
                        "v": 4.516129032258065
                    }, {
                        "t": "l",
                        "v": 4.838709677419355
                    }, {
                        "t": "l",
                        "v": 5.161290322580645
                    }, {
                        "t": "l",
                        "v": 5.483870967741935
                    }, {
                        "t": "l",
                        "v": 5.806451612903225
                    }, {
                        "t": "l",
                        "v": 6.129032258064515
                    }, {
                        "t": "l",
                        "v": 6.451612903225805
                    }, {
                        "t": "l",
                        "v": 6.774193548387095
                    }, {
                        "t": "l",
                        "v": 7.096774193548385
                    }, {
                        "t": "l",
                        "v": 7.419354838709675
                    }, {
                        "t": "l",
                        "v": 7.741935483870965
                    }, {
                        "t": "l",
                        "v": 8.064516129032256
                    }, {
                        "t": "l",
                        "v": 8.387096774193546
                    }, {
                        "t": "l",
                        "v": 8.709677419354836
                    }, {
                        "t": "l",
                        "v": 9.032258064516126
                    }, {
                        "t": "l",
                        "v": 9.354838709677416
                    }, {
                        "t": "l",
                        "v": 9.677419354838706
                    }, {
                        "t": "l",
                        "v": 9.999999999999996
                    }]
                }]
            }
        },
        "e189433a-3": {
            "txt": "array(\"20160701\",\"20160702\",\"20160703\",\"20160704\",\"20160705\",\"20160706\",\"20160707\",\"20160708\",\"20160709\",\"20160710\",\"20160711\",\"20160712\",\"20160713\",\"20160714\",\"20160715\",\"20160716\",\"20160717\",\"20160718\",\"20160719\",\"20160720\",\"20160721\",\"20160722\",\"20160723\",\"20160724\",\"20160725\",\"20160726\",\"20160727\",\"20160728\",\"20160729\",\"20160730\",\"20160731\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "20160701"
                    }, {
                        "t": "l",
                        "v": "20160702"
                    }, {
                        "t": "l",
                        "v": "20160703"
                    }, {
                        "t": "l",
                        "v": "20160704"
                    }, {
                        "t": "l",
                        "v": "20160705"
                    }, {
                        "t": "l",
                        "v": "20160706"
                    }, {
                        "t": "l",
                        "v": "20160707"
                    }, {
                        "t": "l",
                        "v": "20160708"
                    }, {
                        "t": "l",
                        "v": "20160709"
                    }, {
                        "t": "l",
                        "v": "20160710"
                    }, {
                        "t": "l",
                        "v": "20160711"
                    }, {
                        "t": "l",
                        "v": "20160712"
                    }, {
                        "t": "l",
                        "v": "20160713"
                    }, {
                        "t": "l",
                        "v": "20160714"
                    }, {
                        "t": "l",
                        "v": "20160715"
                    }, {
                        "t": "l",
                        "v": "20160716"
                    }, {
                        "t": "l",
                        "v": "20160717"
                    }, {
                        "t": "l",
                        "v": "20160718"
                    }, {
                        "t": "l",
                        "v": "20160719"
                    }, {
                        "t": "l",
                        "v": "20160720"
                    }, {
                        "t": "l",
                        "v": "20160721"
                    }, {
                        "t": "l",
                        "v": "20160722"
                    }, {
                        "t": "l",
                        "v": "20160723"
                    }, {
                        "t": "l",
                        "v": "20160724"
                    }, {
                        "t": "l",
                        "v": "20160725"
                    }, {
                        "t": "l",
                        "v": "20160726"
                    }, {
                        "t": "l",
                        "v": "20160727"
                    }, {
                        "t": "l",
                        "v": "20160728"
                    }, {
                        "t": "l",
                        "v": "20160729"
                    }, {
                        "t": "l",
                        "v": "20160730"
                    }, {
                        "t": "l",
                        "v": "20160731"
                    }]
                }]
            }
        },
        "54cf774a-2": {
            "txt": "\"133\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 133
                }]
            }
        },
        "290848e4-1": {
            "txt": "\"1.07812\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 1.07812
                }]
            }
        },
        "fc34512c-3": {
            "txt": "\"64\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 64
                }]
            }
        }
    },
    "datasources": {
        "hubspot-01": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "isLocked":true,
            "name": "Hubspot Landing Page Daily Metrics for {{ds.hubspot.landingPageID}} (3 Months)",
            "libraryAlias": "HubspotLandingDailyPageMetricsfor{{ds.hubspot.landingPageID}}(3Months)",
            "refreshInterval": 14400,
            "description": "Track daily metrics for your landing page over past 3 months. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.hubapi.com/analytics/v2/sources/summary/d?pageId={{ds.hubspot.landingPageID}}&start={date.addMonths(-3).startOfMonth.format('epochTime')}000&end={date.today.format('epochTime')}000",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "hubspot-02": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "isLocked":true,
            "name": "Hubspot Landing Pages",
            "libraryAlias": "HubspotLandingPages",
            "refreshInterval": 14400,
            "description": "Get a list of your landing pages from your HubSpot account. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.hubapi.com/content/api/v2/pages?limit=1000&subcategory=landing_page",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        }
    },

    "dsMappings": {
        "hubspot-01": "50dd78b1dd68be4a5d67KavyaMallur9",
        "hubspot-02": "00f8b9a342297d5d24b9KavyaMallur9"
    },

    "services": [{
        "service": "hubspot"
    }],
    "uiVariables": [{
        "name": "HSPeriod",
        "value": "thismonth"
    }, {
        "name": "HSDate",
        "value": ""
    }, {
        "name": "HSPageViewsTarget",
        "value": "250"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.hubspot.landingPageID",
        "label": "Landing Page",
        "description": "Select a landing page from the list below.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "From time to time, your Hubspot OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "props": {
                "endpoint_url": "https://api.hubapi.com/content/api/v2/pages?limit=1000&subcategory=landing_page",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "results": [{
            "propId": "ds.hubspot.landingPageID",
            "propField": "options",
            "labels": "/objects/name[preceding-sibling::is_draft!='true']",
            "values": "/objects/page_id[preceding-sibling::is_draft!='true']"
        }]
    }]
}