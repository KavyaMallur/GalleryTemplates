{
    "name": "Hubspot Landing Page Leads",
    "description": "With data as your secret weapon, turn your landing page in to a lead-generation powerhouse. <br>Originates from the Gallery.",
    "sampleFormulas": {
        "3b9593ab": {
            "txt": "array(\"thismonth\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "thismonth"
                    }]
                }]
            }
        },
        "92939d0e": {
            "txt": "array(\"This Month\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "This Month"
                    }]
                }]
            }
        },
        "7d5ecaf4-10": {
            "txt": "\"20160701\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160701"
                }]
            }
        },
        "d9ac62d6": {
            "txt": "\"20160726\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160726"
                }]
            }
        },
        "92cd74c5": {
            "txt": "\"2000\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "2000"
                }]
            }
        },
        "a4af3623-11": {
            "txt": "\"20160601\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160601"
                }]
            }
        },
        "d4215147": {
            "txt": "\"20160626\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160626"
                }]
            }
        },
        "f73bbb71": {
            "txt": "\"Creating killer klips for Hubspot\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Creating killer klips for Hubspot"
                }]
            }
        },
        "ef70c668": {
            "txt": "array(\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"66\",\"1065\",\"1065\",\"1065\",\"1065\",\"1065\",\"2064\",\"2064\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 66
                    }, {
                        "t": "l",
                        "v": 1065
                    }, {
                        "t": "l",
                        "v": 1065
                    }, {
                        "t": "l",
                        "v": 1065
                    }, {
                        "t": "l",
                        "v": 1065
                    }, {
                        "t": "l",
                        "v": 1065
                    }, {
                        "t": "l",
                        "v": 2064
                    }, {
                        "t": "l",
                        "v": 2064
                    }]
                }]
            }
        },
        "3af56124": {
            "txt": "array(\"444\",\"588\",\"714\",\"978\",\"1602\",\"2286\",\"3036\",\"3522\",\"3660\",\"3864\",\"4458\",\"4962\",\"5550\",\"6078\",\"6480\",\"6576\",\"6630\",\"7074\",\"7758\",\"8316\",\"8796\",\"9204\",\"9366\",\"9474\",\"9510\",\"9510\",\"9510\",\"9515\",\"9522\",\"9534\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 444
                    }, {
                        "t": "l",
                        "v": 588
                    }, {
                        "t": "l",
                        "v": 714
                    }, {
                        "t": "l",
                        "v": 978
                    }, {
                        "t": "l",
                        "v": 1602
                    }, {
                        "t": "l",
                        "v": 2286
                    }, {
                        "t": "l",
                        "v": 3036
                    }, {
                        "t": "l",
                        "v": 3522
                    }, {
                        "t": "l",
                        "v": 3660
                    }, {
                        "t": "l",
                        "v": 3864
                    }, {
                        "t": "l",
                        "v": 4458
                    }, {
                        "t": "l",
                        "v": 4962
                    }, {
                        "t": "l",
                        "v": 5550
                    }, {
                        "t": "l",
                        "v": 6078
                    }, {
                        "t": "l",
                        "v": 6480
                    }, {
                        "t": "l",
                        "v": 6576
                    }, {
                        "t": "l",
                        "v": 6630
                    }, {
                        "t": "l",
                        "v": 7074
                    }, {
                        "t": "l",
                        "v": 7758
                    }, {
                        "t": "l",
                        "v": 8316
                    }, {
                        "t": "l",
                        "v": 8796
                    }, {
                        "t": "l",
                        "v": 9204
                    }, {
                        "t": "l",
                        "v": 9366
                    }, {
                        "t": "l",
                        "v": 9474
                    }, {
                        "t": "l",
                        "v": 9510
                    }, {
                        "t": "l",
                        "v": 9510
                    }, {
                        "t": "l",
                        "v": 9510
                    }, {
                        "t": "l",
                        "v": 9515
                    }, {
                        "t": "l",
                        "v": 9522
                    }, {
                        "t": "l",
                        "v": 9534
                    }]
                }]
            }
        },
        "3704dcc3": {
            "txt": "array(\"64.51612903225806\",\"129.03225806451613\",\"193.5483870967742\",\"258.06451612903226\",\"322.5806451612903\",\"387.09677419354836\",\"451.6129032258064\",\"516.1290322580645\",\"580.6451612903226\",\"645.1612903225806\",\"709.6774193548387\",\"774.1935483870967\",\"838.7096774193548\",\"903.2258064516128\",\"967.7419354838709\",\"1032.258064516129\",\"1096.774193548387\",\"1161.2903225806451\",\"1225.8064516129032\",\"1290.3225806451612\",\"1354.8387096774193\",\"1419.3548387096773\",\"1483.8709677419354\",\"1548.3870967741934\",\"1612.9032258064515\",\"1677.4193548387095\",\"1741.9354838709676\",\"1806.4516129032256\",\"1870.9677419354837\",\"1935.4838709677417\",\"1999.9999999999998\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 64.51612903225806
                    }, {
                        "t": "l",
                        "v": 129.03225806451613
                    }, {
                        "t": "l",
                        "v": 193.5483870967742
                    }, {
                        "t": "l",
                        "v": 258.06451612903226
                    }, {
                        "t": "l",
                        "v": 322.5806451612903
                    }, {
                        "t": "l",
                        "v": 387.09677419354836
                    }, {
                        "t": "l",
                        "v": 451.6129032258064
                    }, {
                        "t": "l",
                        "v": 516.1290322580645
                    }, {
                        "t": "l",
                        "v": 580.6451612903226
                    }, {
                        "t": "l",
                        "v": 645.1612903225806
                    }, {
                        "t": "l",
                        "v": 709.6774193548387
                    }, {
                        "t": "l",
                        "v": 774.1935483870967
                    }, {
                        "t": "l",
                        "v": 838.7096774193548
                    }, {
                        "t": "l",
                        "v": 903.2258064516128
                    }, {
                        "t": "l",
                        "v": 967.7419354838709
                    }, {
                        "t": "l",
                        "v": 1032.258064516129
                    }, {
                        "t": "l",
                        "v": 1096.774193548387
                    }, {
                        "t": "l",
                        "v": 1161.2903225806451
                    }, {
                        "t": "l",
                        "v": 1225.8064516129032
                    }, {
                        "t": "l",
                        "v": 1290.3225806451612
                    }, {
                        "t": "l",
                        "v": 1354.8387096774193
                    }, {
                        "t": "l",
                        "v": 1419.3548387096773
                    }, {
                        "t": "l",
                        "v": 1483.8709677419354
                    }, {
                        "t": "l",
                        "v": 1548.3870967741934
                    }, {
                        "t": "l",
                        "v": 1612.9032258064515
                    }, {
                        "t": "l",
                        "v": 1677.4193548387095
                    }, {
                        "t": "l",
                        "v": 1741.9354838709676
                    }, {
                        "t": "l",
                        "v": 1806.4516129032256
                    }, {
                        "t": "l",
                        "v": 1870.9677419354837
                    }, {
                        "t": "l",
                        "v": 1935.4838709677417
                    }, {
                        "t": "l",
                        "v": 1999.9999999999998
                    }]
                }]
            }
        },
        "2ecdd8e1": {
            "txt": "array(\"20160701\",\"20160702\",\"20160703\",\"20160704\",\"20160705\",\"20160706\",\"20160707\",\"20160708\",\"20160709\",\"20160710\",\"20160711\",\"20160712\",\"20160713\",\"20160714\",\"20160715\",\"20160716\",\"20160717\",\"20160718\",\"20160719\",\"20160720\",\"20160721\",\"20160722\",\"20160723\",\"20160724\",\"20160725\",\"20160726\",\"20160727\",\"20160728\",\"20160729\",\"20160730\",\"20160731\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "20160701"
                    }, {
                        "t": "l",
                        "v": "20160702"
                    }, {
                        "t": "l",
                        "v": "20160703"
                    }, {
                        "t": "l",
                        "v": "20160704"
                    }, {
                        "t": "l",
                        "v": "20160705"
                    }, {
                        "t": "l",
                        "v": "20160706"
                    }, {
                        "t": "l",
                        "v": "20160707"
                    }, {
                        "t": "l",
                        "v": "20160708"
                    }, {
                        "t": "l",
                        "v": "20160709"
                    }, {
                        "t": "l",
                        "v": "20160710"
                    }, {
                        "t": "l",
                        "v": "20160711"
                    }, {
                        "t": "l",
                        "v": "20160712"
                    }, {
                        "t": "l",
                        "v": "20160713"
                    }, {
                        "t": "l",
                        "v": "20160714"
                    }, {
                        "t": "l",
                        "v": "20160715"
                    }, {
                        "t": "l",
                        "v": "20160716"
                    }, {
                        "t": "l",
                        "v": "20160717"
                    }, {
                        "t": "l",
                        "v": "20160718"
                    }, {
                        "t": "l",
                        "v": "20160719"
                    }, {
                        "t": "l",
                        "v": "20160720"
                    }, {
                        "t": "l",
                        "v": "20160721"
                    }, {
                        "t": "l",
                        "v": "20160722"
                    }, {
                        "t": "l",
                        "v": "20160723"
                    }, {
                        "t": "l",
                        "v": "20160724"
                    }, {
                        "t": "l",
                        "v": "20160725"
                    }, {
                        "t": "l",
                        "v": "20160726"
                    }, {
                        "t": "l",
                        "v": "20160727"
                    }, {
                        "t": "l",
                        "v": "20160728"
                    }, {
                        "t": "l",
                        "v": "20160729"
                    }, {
                        "t": "l",
                        "v": "20160730"
                    }, {
                        "t": "l",
                        "v": "20160731"
                    }]
                }]
            }
        },
        "11b453ce": {
            "txt": "\"2064\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 2064
                }]
            }
        },
        "7f1e21a4": {
            "txt": "\"-0.7835116425424795\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": -0.7835116425424795
                }]
            }
        },
        "04d752cd": {
            "txt": "\"9534\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 9534
                }]
            }
        }
    },
    "datasources": {
        "hubspot-01": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "isLocked":true,
            "name": "Hubspot Landing Page Daily Metrics for {{ds.hubspot.landingPageID}} (3 Months)",
            "libraryAlias": "HubspotLandingDailyPageMetricsfor{{ds.hubspot.landingPageID}}(3Months)",
            "refreshInterval": 14400,
            "description": "Daily metrics for your chosen landing page for the past 3 months. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.hubapi.com/analytics/v2/sources/summary/d?pageId={{ds.hubspot.landingPageID}}&start={date.addMonths(-3).startOfMonth.format('epochTime')}000&end={date.today.format('epochTime')}000",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "hubspot-02": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "isLocked":true,
            "name": "Hubspot Landing Pages",
            "libraryAlias": "HubspotLandingPages",
            "refreshInterval": 14400,
            "description": "Retrieve a list of your HubSpot landing pages. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.hubapi.com/content/api/v2/pages?limit=1000&subcategory=landing_page",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        }
    },

    "dsMappings": {
        "hubspot-01": "50dd78b1dd68be4a5d67KavyaMallur9",
        "hubspot-02": "00f8b9a342297d5d24b9KavyaMallur9"
    },

    "services": [{
        "service": "hubspot"
    }],
    "uiVariables": [{
        "name": "HSPeriod",
        "value": "thismonth"
    }, {
        "name": "HSDate",
        "value": ""
    }, {
        "name": "HSPageLeadsTarget",
        "value": "250"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.hubspot.landingPageID",
        "label": "Landing Page",
        "description": "Select a landing page from the list below.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "From time to time, your Hubspot OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "hubspot",
            "type": "hubspot",
            "format": "json",
            "props": {
                "endpoint_url": "https://api.hubapi.com/content/api/v2/pages?limit=1000&subcategory=landing_page",
                "method": "get",
                "portalId": "{{auth.hubspot.portalId}}",
                "oauth_sign_query_string": "oauth_sign_query_string"
            }
        },
        "results": [{
            "propId": "ds.hubspot.landingPageID",
            "propField": "options",
            "labels": "/objects/name[preceding-sibling::is_draft!='true']",
            "values": "/objects/page_id[preceding-sibling::is_draft!='true']"
        }]
    }]
}