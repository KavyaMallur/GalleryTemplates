{
    "name" : "Pingdom & Google Analytics: Load Time vs Response Time",
    "description": "Compare load time and response time of pingdom and google analytics. Originates from the Gallery.",

    "datasources" : {
        "pingdom-01" : {
            "service" : "pingdom",
            "type" : "simple_rest",
            "format" : "json",
            "name" :"Pingdom Service Checks",
            "libraryAlias" :"pingdomServiceChecks",
            "refreshInterval" : 3600,
            "description" :"See an overview of all Pingdom checks. Originates from the Gallery.",
            "props":{
                "endpoint_url" : "https://api.pingdom.com/api/2.0/checks",
                "method" : "GET",
                "auth_method" : "basic",
                "parameters" : "[{\"name\":\"App-Key\",\"value\":\"inab7669wia1jffg80gn28fkczmc9r2y\",\"type\":\"header\"}]"
            }

        },
        "pingdom-02" : {
            "service" : "pingdom",
            "type" : "simple_rest",
            "format" : "json",
            "name" :"Pingdom Average Response Time (Last 24 hours)",
            "libraryAlias" :"PingdomAverageResponseTimeLast24Hours",
            "refreshInterval" : 3600,
            "description" :"Provides the average response time for your specified server over the last 24 hours. Originates from the Gallery.",
            "props":{
                "endpoint_url" : "https://api.pingdom.com/api/2.0/summary.performance/{{ds.pingdom.serverId}}?resolution=hour&from={date.addHours(-24).format('epochTime')}&to={date.addHours(-1).format('epochTime')}",
                "method" : "GET",
                "auth_method" : "basic",
                "parameters" : "[{\"name\":\"App-Key\",\"value\":\"inab7669wia1jffg80gn28fkczmc9r2y\",\"type\":\"header\"}]"
            }

        },
        "google_analytics-01" : {
            "service" : "google_analytics",
            "type" : "simple_rest",
            "format" : "csv",
            "name" :"GA Site Speed Stats (Last 24 hours)",
            "libraryAlias" :"GASiteSpeedStatsLast24Hours",
            "refreshInterval" : 3600,
            "description" :"Provides google analytics site speed stats over last 24 hours. Originates from the Gallery.",
            "props":{
                "endpoint_url" : "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:date,ga:hour&metrics=ga:sessions,ga:avgPageLoadTime,ga:avgRedirectionTime,ga:avgServerResponseTime&start-date={date.yesterday}&end-date={date.today}&max-results=10000",
                "max_pages": "1",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}",
                "timePeriod": "&start-date={date.add(-7).format()}&end-date={date.today}"
            }

        }
    },

	"datasourceConfigModel" : [
        {
            "type" : "text",
            "id" : "ds.pingdom.serverId",
            "label" : "Server ID",
            "description": "Enter the ID of the server you'd like to monitor. You can find your server ID by navigating to the Site you'd like to monitor in Pingdom and copying the number of 'checks=' in the address bar.",          
            "isRequired" : true
        },
        {
            "type" : "text",
            "id" : "ds.google_analytics.profileId",
            "label" : "Profile Id",
            "description" : "Don't know where to find your Profile ID? Look under Step 2 <a href='https://klipfolio.uservoice.com/knowledgebase/articles/34516-use-google-analytics-as-a-data-source' target='_blank'>here.</a>",
            "isRequired" : true
        }
    ],  

    "dsMappings": {
        "pingdom-01" : "b4fe50b45c834d192174KavyaMallur9",
        "pingdom-02" : "bc45bc2429076c589a02KavyaMallur9",
        "google_analytics-01" : "f1115f5d0c6c8a76440dKavyaMallur9"
    },

    "services" : [
        {
            "service" : "pingdom"
        },
        {
            "service" : "google_analytics"
        }
    ]
}