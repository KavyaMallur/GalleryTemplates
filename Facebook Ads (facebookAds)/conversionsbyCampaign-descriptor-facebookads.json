{
    "name": "Facebook Ads Campaign Performance",
    "description": "Make sure your Facebook ads campaigns are driving conversions during the time period of your choice. Originates from the Gallery.",
    "sampleFormulas": {
        "55178454": {
            "txt": "array(\"8.68\",\"8.68\",\"8.68\",\"23.189999999999998\",\"21.474\",\"34.165\",\"26.8675\",\"22.490000000000002\",\"8.68\",\"23.548333333333332\",\"23.996666666666666\",\"28.475555555555555\",\"25.82888888888889\",\"42.7\",\"26.194\",\"8.68\",\"44.26\",\"38.230000000000004\",\"41.846666666666664\",\"22.053720930232558\",\"21.389411764705883\",\"26.265\",\"24.427647058823528\",\"28.824166666666667\",\"21.134166666666665\",\"24.852608695652176\",\"21.485\",\"23.077714285714286\",\"25.575185185185184\",\"29.612222222222222\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 8.68
                    }, {
                        "t": "l",
                        "v": 8.68
                    }, {
                        "t": "l",
                        "v": 8.68
                    }, {
                        "t": "l",
                        "v": 23.189999999999998
                    }, {
                        "t": "l",
                        "v": 21.474
                    }, {
                        "t": "l",
                        "v": 34.165
                    }, {
                        "t": "l",
                        "v": 26.8675
                    }, {
                        "t": "l",
                        "v": 22.490000000000002
                    }, {
                        "t": "l",
                        "v": 8.68
                    }, {
                        "t": "l",
                        "v": 23.548333333333332
                    }, {
                        "t": "l",
                        "v": 23.996666666666666
                    }, {
                        "t": "l",
                        "v": 28.475555555555555
                    }, {
                        "t": "l",
                        "v": 25.82888888888889
                    }, {
                        "t": "l",
                        "v": 42.7
                    }, {
                        "t": "l",
                        "v": 26.194
                    }, {
                        "t": "l",
                        "v": 8.68
                    }, {
                        "t": "l",
                        "v": 44.26
                    }, {
                        "t": "l",
                        "v": 38.230000000000004
                    }, {
                        "t": "l",
                        "v": 41.846666666666664
                    }, {
                        "t": "l",
                        "v": 22.053720930232558
                    }, {
                        "t": "l",
                        "v": 21.389411764705883
                    }, {
                        "t": "l",
                        "v": 26.265
                    }, {
                        "t": "l",
                        "v": 24.427647058823528
                    }, {
                        "t": "l",
                        "v": 28.824166666666667
                    }, {
                        "t": "l",
                        "v": 21.134166666666665
                    }, {
                        "t": "l",
                        "v": 24.852608695652176
                    }, {
                        "t": "l",
                        "v": 21.485
                    }, {
                        "t": "l",
                        "v": 23.077714285714286
                    }, {
                        "t": "l",
                        "v": 25.575185185185184
                    }, {
                        "t": "l",
                        "v": 29.612222222222222
                    }]
                }]
            }
        },
        "f88a56bd": {
            "txt": "array(\"Itsy Bitsy\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Itsy Bitsy"
                    }]
                }]
            }
        },
        "397bec89": {
            "txt": "array(\"Itsy Bitsy\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Itsy Bitsy"
                    }]
                }]
            }
        },
        "2c6c547b": {
            "txt": "array(\"thismonth\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "thismonth"
                    }]
                }]
            }
        },
        "803d6ad3": {
            "txt": "array(\"This Month\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "This Month"
                    }]
                }]
            }
        },
        "c49b1af1": {
            "txt": "\"20160901\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160901"
                }]
            }
        },
        "0a660b37": {
            "txt": "\"20160930\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "20160930"
                }]
            }
        },
        "59e9e364": {
            "txt": "array(\"44\",\"44\",\"44\",\"47.98\",\"53.95\",\"51.96\",\"51.96\",\"49.97\",\"44\",\"55.94\",\"61.91\",\"61.91\",\"61.91\",\"51.96\",\"53.95\",\"44\",\"45.99\",\"47.98\",\"55.94\",\"129.57\",\"145.49\",\"99.72\",\"77.83\",\"67.88\",\"91.75999999999999\",\"89.77000000000001\",\"107.68\",\"113.65\",\"97.72999999999999\",\"79.82\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": 44
                    }, {
                        "t": "l",
                        "v": 44
                    }, {
                        "t": "l",
                        "v": 44
                    }, {
                        "t": "l",
                        "v": 47.98
                    }, {
                        "t": "l",
                        "v": 53.95
                    }, {
                        "t": "l",
                        "v": 51.96
                    }, {
                        "t": "l",
                        "v": 51.96
                    }, {
                        "t": "l",
                        "v": 49.97
                    }, {
                        "t": "l",
                        "v": 44
                    }, {
                        "t": "l",
                        "v": 55.94
                    }, {
                        "t": "l",
                        "v": 61.91
                    }, {
                        "t": "l",
                        "v": 61.91
                    }, {
                        "t": "l",
                        "v": 61.91
                    }, {
                        "t": "l",
                        "v": 51.96
                    }, {
                        "t": "l",
                        "v": 53.95
                    }, {
                        "t": "l",
                        "v": 44
                    }, {
                        "t": "l",
                        "v": 45.99
                    }, {
                        "t": "l",
                        "v": 47.98
                    }, {
                        "t": "l",
                        "v": 55.94
                    }, {
                        "t": "l",
                        "v": 129.57
                    }, {
                        "t": "l",
                        "v": 145.49
                    }, {
                        "t": "l",
                        "v": 99.72
                    }, {
                        "t": "l",
                        "v": 77.83
                    }, {
                        "t": "l",
                        "v": 67.88
                    }, {
                        "t": "l",
                        "v": 91.75999999999999
                    }, {
                        "t": "l",
                        "v": 89.77000000000001
                    }, {
                        "t": "l",
                        "v": 107.68
                    }, {
                        "t": "l",
                        "v": 113.65
                    }, {
                        "t": "l",
                        "v": 97.72999999999999
                    }, {
                        "t": "l",
                        "v": 79.82
                    }]
                }]
            }
        },
        "d7212f61": {
            "txt": "array(\"20160901\",\"20160902\",\"20160903\",\"20160904\",\"20160905\",\"20160906\",\"20160907\",\"20160908\",\"20160909\",\"20160910\",\"20160911\",\"20160912\",\"20160913\",\"20160914\",\"20160915\",\"20160916\",\"20160917\",\"20160918\",\"20160919\",\"20160920\",\"20160921\",\"20160922\",\"20160923\",\"20160924\",\"20160925\",\"20160926\",\"20160927\",\"20160928\",\"20160929\",\"20160930\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "20160901"
                    }, {
                        "t": "l",
                        "v": "20160902"
                    }, {
                        "t": "l",
                        "v": "20160903"
                    }, {
                        "t": "l",
                        "v": "20160904"
                    }, {
                        "t": "l",
                        "v": "20160905"
                    }, {
                        "t": "l",
                        "v": "20160906"
                    }, {
                        "t": "l",
                        "v": "20160907"
                    }, {
                        "t": "l",
                        "v": "20160908"
                    }, {
                        "t": "l",
                        "v": "20160909"
                    }, {
                        "t": "l",
                        "v": "20160910"
                    }, {
                        "t": "l",
                        "v": "20160911"
                    }, {
                        "t": "l",
                        "v": "20160912"
                    }, {
                        "t": "l",
                        "v": "20160913"
                    }, {
                        "t": "l",
                        "v": "20160914"
                    }, {
                        "t": "l",
                        "v": "20160915"
                    }, {
                        "t": "l",
                        "v": "20160916"
                    }, {
                        "t": "l",
                        "v": "20160917"
                    }, {
                        "t": "l",
                        "v": "20160918"
                    }, {
                        "t": "l",
                        "v": "20160919"
                    }, {
                        "t": "l",
                        "v": "20160920"
                    }, {
                        "t": "l",
                        "v": "20160921"
                    }, {
                        "t": "l",
                        "v": "20160922"
                    }, {
                        "t": "l",
                        "v": "20160923"
                    }, {
                        "t": "l",
                        "v": "20160924"
                    }, {
                        "t": "l",
                        "v": "20160925"
                    }, {
                        "t": "l",
                        "v": "20160926"
                    }, {
                        "t": "l",
                        "v": "20160927"
                    }, {
                        "t": "l",
                        "v": "20160928"
                    }, {
                        "t": "l",
                        "v": "20160929"
                    }, {
                        "t": "l",
                        "v": "20160930"
                    }]
                }]
            }
        }
    },
    "datasources": {
        "facebookAds-01": {
            "service": "facebook_ads",
            "libraryAlias": "FacebookAdsCampaigns",
            "name": "Facebook Ads Campaigns",
            "description": "Retrieve the list of campaigns in your Facebook Ads account. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{{ds.facebook_ads.accountId}}/campaigns?fields=id,name,created_time,updated_time,effective_status&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.7/{{ds.facebook_ads.accountId}}/campaigns?fields=id,name,created_time,updated_time,effective_status&limit=100",
                "qtype": "Graph API"
            }
        },
        "facebookAds-02": {
            "service": "facebook_ads",
            "libraryAlias": "FacebookAdsCampaignMetrics",
            "name": "Facebook Ads Campaign Metrics",
            "description": "Retrieve the daily metrics of a selected Facebook Ads Campaign for the last 93 days. Originates from the Gallery.",
            "type": "facebook",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{props.fbAdsCampaign}/insights?time_range[since]={date.add(-93).format('yyyy-MM-dd')}&time_range[until]={date.today}&time_increment=1&fields=spend,actions,ctr,clicks,impressions&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.7/{props.fbAdsCampaign}/insights?time_range[since]={date.add(-93).format('yyyy-MM-dd')}&time_range[until]={date.today}&time_increment=1&fields=spend,actions,ctr,clicks,impressions&limit=100",
                "qtype": "Graph API"
            }
        }
    },
    "services": [{
        "service": "facebook_ads"
    }],
    "dsMappings": {
        "facebookAds-01": "fa2a9329eef7f49b4224KavyaMallur9",
        "facebookAds-02": "0f71f4cecc6e7f515ee7KavyaMallur9"
    },
    "uiVariables": [{
        "name": "fbAdsPeriod",
        "value": "thismonth"
    }, {
        "name": "fbAdsCampaign",
        "value": "{{ds.facebook_ads.campaignId}}"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.facebook_ads.accountId",
        "label": "Account",
        "description": "Select a Facebook Ads account, and then a corresponding campaign.",
        "isRequired": true,
        "onChangeQueries": ["q2"]
    }, {
        "type": "select",
        "id": "ds.facebook_ads.campaignId",
        "label": "Campaign",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure the Facebook account you signed in with includes a Facebook Ads account. <br><br>2. From time to time, your Facebook OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "facebook_ads",
            "type": "facebook",
            "format": "json",
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/me/adaccounts?fields=id,name",
                "method": "GET",
                "qtype": "Graph API"
            }
        },
        "results": [{
            "propId": "ds.facebook_ads.accountId",
            "propField": "options",
            "labels": "/data/name",
            "values": "/data/id"
        }]
    }, {
        "id": "q2",
        "connector": {
            "service": "facebook_ads",
            "type": "facebook",
            "format": "json",
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.7/{{ds.facebook_ads.accountId}}/campaigns?fields=id,name,created_time,updated_time,effective_status&limit=100",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.facebook_ads.campaignId",
            "propField": "options",
            "labels": "/data/name",
            "values": "/data/id"
        }]
    }]
}