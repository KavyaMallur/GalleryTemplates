{
    "name" : "Basecamp Project Updates",
    "description" : "Monitor your team's activity with a real-time list of updates. Originates from the Gallery.",
    

    "datasources" : {
        "basecamp-01" : {
            "service" : "basecamp",
            "libraryAlias" : "BasecampRecentEvents",
            "name": "Basecamp Recent Events",
            "description" : "Selected Project Updates. Originates from the Gallery.",
            "type" : "simple_rest",
            "format" : "json",
            "refreshInterval" : 14400,
            "props" : {
                "endpoint_url": "https://basecamp.com/{{ds.basecamp.accountId}}/api/v1/projects/{{ds.basecamp.projectID}}/events.json"          
            }
        }
    },

    "dsMappings" : {
        "basecamp-01" : "d9a86e79bd3c641a2d0aKavyaMallur9" 
    },

    "services" : [
        {
            "service" : "basecamp"
        }
    ],

    "datasourceConfigModel" : [
        {
            "type" : "select",
            "id" : "ds.basecamp.accountId",
            "label" : "Account ID",
            "description":"Select your Basecamp Account",
            "onChangeQueries" : [ "q2" ]
        },
        {
            "type" : "select",
            "id" : "ds.basecamp.projectID",
            "label" : "Project ID",
            "description":"Select your Basecamp Project"
        }
    ],
    "queries": [
        {
            "userMessage":"Fetching list of Basecamp Accounts.",
            "errorMessage":"There are two possible reasons: <br><br>1. Your Basecamp OAuth token has expired. <a href='http://klipfolio.uservoice.com/knowledgebase/articles/404228-oauth-token-expired' target='_blank'>How do I re-authorize my OAuth token?</a> <br><br>2. Your Basecamp login details has changed. Please re-authorize with the new login details.",
            "connector": {
                "service": "basecamp",
                "type": "simple_rest",
                "format": "json",
                "props": {
                    "endpoint_url": "https://launchpad.37signals.com/authorization.json"
                }
            },
            "results": [
                {
                    "propId" : "ds.basecamp.accountId", 
                    "propField" : "options", 
                    "labels": "/accounts/name",  
                    "values": "/accounts/id" 
                }
            ]
        },
        {   
            "id": "q2",
            "userMessage":"Fetching list of Basecamp Projects.",
            "connector": {
                "service": "basecamp",
                "type": "simple_rest",
                "format": "json",
                "props" : { 
                    "endpoint_url": "https://basecamp.com/{{ds.basecamp.accountId}}/api/v1/projects.json"
                }
            },
            "results": [
                {
                    "propId" : "ds.basecamp.projectID", 
                    "propField" : "options", 
                    "labels": "/name",  
                    "values": "/id" 
                }
            ]
        }
    ]
}