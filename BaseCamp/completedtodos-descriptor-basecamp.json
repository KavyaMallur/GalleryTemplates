{
    "name": "Basecamp Completed To Dos",
    "description": "See a list of tasks completed by each team member using a handy drop down menu. Originates from the Gallery.",

    "sampleFormulas": {

        "afc871d7-3": {
            "txt": "array(\"All\",\"Ashraf Khattab\",\"Jonathan Taylor\",\"Val Hamilton\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                            "t": "l",
                            "v": "All"
                        }, {
                            "t": "l",
                            "v": "Ashraf Khattab"
                        }, {
                            "t": "l",
                            "v": "Jonathan Taylor"
                        }, {
                            "t": "l",
                            "v": "Val Hamilton"
                        }

                    ]
                }]
            }
        },
        "da277fbf-13": {
            "txt": "array(\"Respond to emails\",\"Submit expense report\",\"Update Twitter profile\",\"Meet with the CEO\",\"Finish proposal\",\"Standardize terminology\",\"Create Facebook campaign\",\"Add New Services to the Klip Gallery\",\"Add a dropdown to completed todos\",\"Manipulate the selection items\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Respond to emails"
                    }, {
                        "t": "l",
                        "v": "Submit expense report"
                    }, {
                        "t": "l",
                        "v": "Update Twitter profile"
                    }, {
                        "t": "l",
                        "v": "Meet with the CEO"
                    }, {
                        "t": "l",
                        "v": "Finish proposal"
                    }, {
                        "t": "l",
                        "v": "Standardize terminology"
                    }, {
                        "t": "l",
                        "v": "Create Facebook campaign"
                    }, {
                        "t": "l",
                        "v": "Add New Services to the Klip Gallery"
                    }, {
                        "t": "l",
                        "v": "Add a dropdown to completed todos"
                    }, {
                        "t": "l",
                        "v": "Manipulate the selection items"
                    }]
                }]
            }
        },
        "3aeb1945-15": {
            "txt": "array(\"Ashley Brown ToDo\",\"Ashley Brown ToDo\",\"George Grayson ToDo\",\"Jim Wells ToDo\",\"George Grayson ToDo\",\"George Grayson ToDo\",\"Ashley Brown ToDo\",\"Natalie Yates ToDo\",\"Gillian Edwards ToDo\",\"Ashley Brown ToDo\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [

                        {
                            "t": "l",
                            "v": "Ashley Brown ToDo"
                        }, {
                            "t": "l",
                            "v": "Ashley Brown ToDo"
                        }, {
                            "t": "l",
                            "v": "George Grayson ToDo"
                        }, {
                            "t": "l",
                            "v": "Jim Wells ToDo"
                        }, {
                            "t": "l",
                            "v": "George Grayson ToDo"
                        }, {
                            "t": "l",
                            "v": "George Grayson ToDo"
                        }, {
                            "t": "l",
                            "v": "Ashley Brown ToDo"
                        }, {
                            "t": "l",
                            "v": "Natalie Yates ToDo"
                        }, {
                            "t": "l",
                            "v": "Gillian Edwards ToDo"
                        }, {
                            "t": "l",
                            "v": "Ashley Brown ToDo"
                        }

                    ]
                }]
            }
        },
        "0ff13742-17": {
            "txt": "array(\"Ashley Brown\",\"Ashley Brown\",\"George Grayson\",\"Jim Wells\",\"George Grayson\",\"George Grayson\",\"Ashley Brown\",\"Natalie Yates\",\"Gillian Edwards\",\"Ashley Brown\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Ashley Brown"
                    }, {
                        "t": "l",
                        "v": "Ashley Brown"
                    }, {
                        "t": "l",
                        "v": "George Grayson"
                    }, {
                        "t": "l",
                        "v": "Jim Wells"
                    }, {
                        "t": "l",
                        "v": "George Grayson"
                    }, {
                        "t": "l",
                        "v": "George Grayson"
                    }, {
                        "t": "l",
                        "v": "Ashley Brown"
                    }, {
                        "t": "l",
                        "v": "Natalie Yates"
                    }, {
                        "t": "l",
                        "v": "Gillian Edwards"
                    }, {
                        "t": "l",
                        "v": "Ashley Brown"
                    }]
                }]
            }
        },
        "2eb1e1f4-1": {
            "txt": "array(\"2015-06-23T14:39:14.000-04:00\",\"2015-06-23T11:35:35.000-04:00\",\"2015-06-22T12:59:32.000-04:00\",\"2015-06-15T14:32:01.000-04:00\",\"2015-06-12T16:37:52.000-04:00\",\"2015-06-12T16:37:48.000-04:00\",\"2015-06-12T16:37:47.000-04:00\",\"2015-06-11T13:55:44.000-04:00\",\"2015-06-11T13:55:41.000-04:00\",\"2015-06-11T13:55:40.000-04:00\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "2015-06-23T14:39:14.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-23T11:35:35.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-22T12:59:32.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-15T14:32:01.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-12T16:37:52.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-12T16:37:48.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-12T16:37:47.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-11T13:55:44.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-11T13:55:41.000-04:00"
                    }, {
                        "t": "l",
                        "v": "2015-06-11T13:55:40.000-04:00"
                    }]
                }]
            }
        }

    },


    "datasources": {
        "basecamp-01": {
            "service": "basecamp",
            "libraryAlias": "BasecampCompletedToDos",
            "name": "Basecamp Completed To Dos",
            "description": "See a list of tasks completed by each team member using a handy drop down menu. Originates from the Gallery.",
            "type": "simple_rest",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://basecamp.com/{{ds.basecamp.accountId}}/api/v1/projects/{{ds.basecamp.projectID}}/todos/completed.json"
            }
        }
    },

    "dsMappings": {
        "basecamp-01": "cb418f5a7a8202e1cf1aKavyaMallur9"
    },

    "services": [{
        "service": "basecamp"
    }],
    "uiVariables": [{
        "name": "KTcompletedBy",
        "value": "All"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.basecamp.accountId",
        "label": "Account ID",
        "description": "Select your Basecamp Account",
        "onChangeQueries": ["q2"]
    }, {
        "type": "select",
        "id": "ds.basecamp.projectID",
        "label": "Project ID",
        "description": "Select your Basecamp Project"
    }],
    "queries": [{
        "errorMessage": "There are two possible reasons: <br><br>1. Your Basecamp OAuth token has expired. <a href='http://klipfolio.uservoice.com/knowledgebase/articles/404228-oauth-token-expired' target='_blank'>How do I re-authorize my OAuth token?</a> <br><br>2. Your Basecamp login details has changed. Please re-authorize with the new login details.",
        "connector": {
            "service": "basecamp",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://launchpad.37signals.com/authorization.json"
            }
        },
        "results": [{
            "propId": "ds.basecamp.accountId",
            "propField": "options",
            "labels": "/accounts/name[preceding-sibling::href[contains(.,'basecamp.com')]]",
            "values": "/accounts/id[preceding-sibling::href[contains(.,'basecamp.com')]]"
        }]
    }, {
        "id": "q2",
        "connector": {
            "service": "basecamp",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://basecamp.com/{{ds.basecamp.accountId}}/api/v1/projects.json"
            }
        },
        "results": [{
            "propId": "ds.basecamp.projectID",
            "propField": "options",
            "labels": "/name",
            "values": "/id"
        }]
    }]
}