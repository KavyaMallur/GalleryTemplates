{
    "name": "Moz Influencer Ranks",
    "description": "Display the Social Rank of Influencers. Originates from the Gallery.",

    "sampleFormulas": {

        "18b46a6f-3": {
            "txt": "\"0.5\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.5"
                }]
            }
        },
        "e9e1f3f2": {
            "txt": "array(\"0\",\"0.9\",\"0.8\",\"0.7\",\"0.6\",\"0.5\",\"0.4\",\"0.3\",\"0.2\",\"0.1\",\"0\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "0"
                    }, {
                        "t": "l",
                        "v": "0.9"
                    }, {
                        "t": "l",
                        "v": "0.8"
                    }, {
                        "t": "l",
                        "v": "0.7"
                    }, {
                        "t": "l",
                        "v": "0.6"
                    }, {
                        "t": "l",
                        "v": "0.5"
                    }, {
                        "t": "l",
                        "v": "0.4"
                    }, {
                        "t": "l",
                        "v": "0.3"
                    }, {
                        "t": "l",
                        "v": "0.2"
                    }, {
                        "t": "l",
                        "v": "0.1"
                    }, {
                        "t": "l",
                        "v": "0"
                    }]
                }]
            }
        },
        "30c8f1e7": {
            "txt": "array(\"100 / 0 - Social\",\"90 / 10 - Social\",\"80 / 20 - Social\",\"70 / 30 - Social\",\"60 / 40 - Social\",\"50 / 50 - Equal Weight\",\"40 / 60 - URL\",\"30 / 70 - URL\",\"20 / 80 - URL\",\"10 / 90 - URL\",\"0 / 100 - URL\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "v": "100 / 0 - Social",
                        "t": "l"
                    }, {
                        "v": "90 / 10 - Social",
                        "t": "l"
                    }, {
                        "v": "80 / 20 - Social",
                        "t": "l"
                    }, {
                        "v": "70 / 30 - Social",
                        "t": "l"
                    }, {
                        "v": "60 / 40 - Social",
                        "t": "l"
                    }, {
                        "v": "50 / 50 - Equal Weight",
                        "t": "l"
                    }, {
                        "v": "40 / 60 - URL",
                        "t": "l"
                    }, {
                        "v": "30 / 70 - URL",
                        "t": "l"
                    }, {
                        "v": "20 / 80 - URL",
                        "t": "l"
                    }, {
                        "v": "10 / 90 - URL",
                        "t": "l"
                    }, {
                        "v": "0 / 100 - URL",
                        "t": "l"
                    }]
                }]
            }
        },
        "4df7801e-4": {
            "txt": "\"0.5\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.5"
                }]
            }
        },

        "12f42555-1": {
            "txt": "\"Social Authority Weighting\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Social Authority Weighting"
                }]
            }
        },

        "c2a61bad-2": {
            "txt": "\"URL Weighting\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "URL Weighting"
                }]
            }
        },
        "7c1428a8": {
            "txt": "\"Social Authority\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Social Authority"
                }]
            }
        },

        "29a84b57": {
            "txt": "\"MozRank\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "MozRank"
                }]
            }
        },
        "132dd48f": {
            "txt": "\"Combined Rank\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Combined Rank"
                }]
            }
        },
        "f109c9da": {
            "txt": "\"http://static.klipfolio.com/templates/team/square/p37.jpg\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "http://static.klipfolio.com/templates/team/square/p37.jpg"
                }]
            }
        },
        "65c82477": {
            "txt": "\"89.55\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "89.55"
                }]
            }
        },
        "017c8624": {
            "txt": "\"6.01\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "6.01"
                }]
            }
        },
        "4dad6910": {
            "txt": "\"75.34\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "75.34"
                }]
            }
        },

        "07cba819": {
            "txt": "\"Ashley Brown\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Ashley Brown"
                }]
            }
        },

        "b95e517f": {
            "txt": "\"@abrowntweets\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "@abrowntweets"
                }]
            }
        },
        "a92b56fe": {
            "txt": "\"abrownklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "abrownklips.com"
                }]
            }
        },

        "b743fbe7": {
            "txt": "\"http://static.klipfolio.com/templates/team/square/p30.jpg\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "http://static.klipfolio.com/templates/team/square/p30.jpg"
                }]
            }
        },
        "eef21284": {
            "txt": "\"84.32\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "84.32"
                }]
            }
        },
        "265b9d1b": {
            "txt": "\"6.31\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "6.31"
                }]
            }
        },
        "d82ad911": {
            "txt": "\"72.08\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "72.08"
                }]
            }
        },

        "980e3c76": {
            "txt": "\"George Grayson\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "George Grayson"
                }]
            }
        },

        "69862cdd": {
            "txt": "\"@graytweets\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "@graytweets"
                }]
            }
        },
        "3131bf9e": {
            "txt": "\"grayklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "grayklips.com"
                }]
            }
        },

        "306ac9d4": {
            "txt": "\"http://static.klipfolio.com/templates/team/square/p46.jpg\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "http://static.klipfolio.com/templates/team/square/p46.jpg"
                }]
            }
        },
        "e2fd7919": {
            "txt": "\"74.18\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "74.18"
                }]
            }
        },
        "26002598": {
            "txt": "\"5.45\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "5.45"
                }]
            }
        },
        "c15aa946": {
            "txt": "\"66.42\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "66.42"
                }]
            }
        },

        "3ac1f144": {
            "txt": "\"Jim Wells\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Jim Wells"
                }]
            }
        },

        "ceb19495": {
            "txt": "\"@jwellstweets\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "@jwellstweets"
                }]
            }
        },
        "1a310c8a": {
            "txt": "\"jwellsklips.com\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "jwellsklips.com"
                }]
            }
        }
    },

    "datasources": {
        "twitter": {
            "service": "twitter",
            "type": "simple_rest",
            "format": "json",
            "name": "Twitter Profile (Influencers)",
            "libraryAlias": "TwitterProfile(Influencers)",
            "refreshInterval": 86400,
            "description": "Show your Influencers' Twitter Profile. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.twitter.com/1.1/users/lookup.json?screen_name={{ds.twitter.screenNames}}",
                "method": "get"
            }
        },
        "moz-01": {
            "service": "moz",
            "type": "simple_rest",
            "format": "json",
            "name": "Moz URL Metrics (Influencers)",
            "libraryAlias": "MozURLMetrics",
            "refreshInterval": 86400,
            "description": "Show your Influencers' Moz URL metrics. Originates from the Gallery.",
            "props": {
                "body": "[\"{{ds.twitter.url1}}\",\"{{ds.twitter.url2}}\",\"{{ds.twitter.url3}}\"]",
                "endpoint_url": "http://lsapi.seomoz.com/linkscape/url-metrics?Cols=141421159907324&AccessID={{auth.moz.apiKey}}&Expires={hash.getExpiryTime(240);}&Signature={hash.append(\"{{auth.moz.apiKey}}\").appendNewLine().append(hash.getExpiryTime(240)).encodeHmacSha1(\"{{auth.moz.apiSecret}}\").encodeBase64().encodeURL().printDigest();}",
                "method": "post"
            }
        },
        "moz-02": {
            "service": "moz",
            "type": "simple_rest",
            "format": "json",
            "name": "Moz Social Authority (Influencers)",
            "libraryAlias": "MozSocialAuthority",
            "refreshInterval": 86400,
            "description": "Show your Influencers' Moz Social Authority. Originates from the Gallery.",
            "props": {
                "endpoint_url": "https://api.followerwonk.com/social-authority?screen_name={{ds.twitter.screenNames}};AccessID={{auth.moz.accessId}};Timestamp={hash.getExpiryTime(240);};Signature={hash.append(\"{{auth.moz.accessId}}\").appendNewLine().append(hash.getExpiryTime(240)).encodeHmacSha1(\"{{auth.moz.secretKey}}\").encodeBase64().encodeURL().printDigest();}",
                "method": "get"
            }
        }
    },

    "dsMappings": {
        "twitter": "63b34287b47594aedef9doogeraspilk",
        "moz-01": "44d3a56fae8caf09406bdoogeraspilk",
        "moz-02": "95a06d01a752b272da89doogeraspilk"
    },

    "uiVariables": [{
        "name": "KTMozSocialAuthorityWeighting",
        "value": "0.5"
    }],

    "services": [{
        "service": "twitter"
    }, {
        "service": "moz",
        "authConfig": {
            "type": "input",
            "model": [{
                "type": "text",
                "id": "auth.moz.apiKey",
                "description": "Don't know where to find your API and Secret Keys? Follow these steps to <a href='http://klipfolio.uservoice.com/knowledgebase/articles/640072-klip-gallery-moz#connect' target='_blank'>Find your API Key and Personal Key</a>.",
                "label": "Moz API Key",
                "ghostText": "964f68f54153686d0d5c5e063c727b1e",
                "isRequired": true
            }, {
                "type": "text",
                "id": "auth.moz.apiSecret",
                "label": "Moz Secret Key",
                "ghostText": "964f68f54153686d0d5c5e063c727b1e",
                "isRequired": true
            }, {
                "type": "text",
                "id": "auth.moz.accessId",
                "label": "Followerwonk Access ID",
                "ghostText": "964f68f54153686d0d5c5e063c727b1e",
                "isRequired": true
            }, {
                "type": "text",
                "id": "auth.moz.secretKey",
                "label": "Followerwonk Secret Key",
                "ghostText": "964f68f54153686d0d5c5e063c727b1e",
                "isRequired": true
            }]
        }
    }],


    "datasourceConfigModel": [{
            "type": "text",
            "id": "ds.twitter.screenNames",
            "label": "Twitter Handles",
            "description": "Show the Social Ranks of your competitors",
            "isRequired": true,
            "onChangeQueries": ["q1"]
        }, {
            "type": "select",
            "id": "ds.twitter.url1",
            "label": "URL 1",
            "description": "Select the Competitors' URLs",
            "isRequired": true,
            "onChangeQueries": ["q2"]
        }, {
            "type": "select",
            "id": "ds.twitter.url2",
            "label": "URL 2",
            "isRequired": true,
            "onChangeQueries": ["q3"]
        }, {
            "type": "select",
            "id": "ds.twitter.url3",
            "label": "URL 3",
            "isRequired": true
        }

    ],

    "queries": [{
        "id": "q1",
        "connector": {
            "service": "twitter",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://api.twitter.com/1.1/users/lookup.json?screen_name={{ds.twitter.screenNames}}",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.twitter.url1",
            "propField": "options",
            "labels": "(/entities/url/urls/display_url)[1]",
            "values": "(/entities/url/urls/display_url)[1]"
        }]
    }, {
        "id": "q2",
        "connector": {
            "service": "twitter",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://api.twitter.com/1.1/users/lookup.json?screen_name={{ds.twitter.screenNames}}",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.twitter.url2",
            "propField": "options",
            "labels": "(/entities/url/urls/display_url)[2]",
            "values": "(/entities/url/urls/display_url)[2]"
        }]
    }, {
        "id": "q3",
        "connector": {
            "service": "twitter",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://api.twitter.com/1.1/users/lookup.json?screen_name={{ds.twitter.screenNames}}",
                "method": "get"
            }
        },
        "results": [{
            "propId": "ds.twitter.url3",
            "propField": "options",
            "labels": "(/entities/url/urls/display_url)[3]",
            "values": "(/entities/url/urls/display_url)[3]"
        }]
    }]

}