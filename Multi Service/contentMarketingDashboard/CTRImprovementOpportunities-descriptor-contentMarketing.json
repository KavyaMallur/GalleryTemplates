{
  "name": "CTR Improvement Opportunities (Last 30 Days)",
  "description": "Discover where your keywords can improve on click-through rates based on their position in search results. <br> Originates from the Gallery. (v1.0)",
  "sampleFormulas": {
    "218f5531-6": {
      "txt": "array(\".663\",\".3557\",\".3267\",\".3865\",\".2113\",\".235\",\".253\",\".154\",\".234\",\".276\",\".130\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": ".663"
              },
              {
                "t": "l",
                "v": ".3557"
              },
              {
                "t": "l",
                "v": ".3267"
              },
              {
                "t": "l",
                "v": ".3865"
              },
              {
                "t": "l",
                "v": ".2113"
              },
              {
                "t": "l",
                "v": ".235"
              },
              {
                "t": "l",
                "v": ".253"
              },
              {
                "t": "l",
                "v": ".154"
              },
              {
                "t": "l",
                "v": ".234"
              },
              {
                "t": "l",
                "v": ".276"
              },
              {
                "t": "l",
                "v": ".130"
              }
            ]
          }
        ]
      }
    },
    "961d0250-7": {
      "txt": "array(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "1"
              },
              {
                "t": "l",
                "v": "2"
              },
              {
                "t": "l",
                "v": "3"
              },
              {
                "t": "l",
                "v": "4"
              },
              {
                "t": "l",
                "v": "5"
              },
              {
                "t": "l",
                "v": "6"
              },
              {
                "t": "l",
                "v": "7"
              },
              {
                "t": "l",
                "v": "8"
              },
              {
                "t": "l",
                "v": "9"
              },
              {
                "t": "l",
                "v": "10"
              }
            ]
          }
        ]
      }
    },
    "823959e3-11": {
      "txt": "array(\"klipfolio neuro\",\"klipfolio\",\"klip gallery\",\"business dashboards\",\"saas\",\"klip bar chart\",\"klipfolio integrations\",\"kpi\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "klipfolio neuro"
              },
              {
                "t": "l",
                "v": "klipfolio"
              },
              {
                "t": "l",
                "v": "klip gallery"
              },
              {
                "t": "l",
                "v": "business dashboards"
              },
              {
                "t": "l",
                "v": "saas"
              },
              {
                "t": "l",
                "v": "klip bar chart"
              },
              {
                "t": "l",
                "v": "klipfolio integrations"
              },
              {
                "t": "l",
                "v": "kpi"
              }
            ]
          }
        ]
      }
    },
    "0a96a5d2-3": {
      "txt": "array(\" 16621\",\"22958\",\"35070\",\"43899\",\"42282\",\"33775\",\"20238\",\"47902\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": " 16621"
              },
              {
                "t": "l",
                "v": "22958"
              },
              {
                "t": "l",
                "v": "35070"
              },
              {
                "t": "l",
                "v": "43899"
              },
              {
                "t": "l",
                "v": "42282"
              },
              {
                "t": "l",
                "v": "33775"
              },
              {
                "t": "l",
                "v": "20238"
              },
              {
                "t": "l",
                "v": "47902"
              }
            ]
          }
        ]
      }
    },
    "db471387-13": {
      "txt": "array(\"2.34\",\"3.40\",\"1.08\",\"2.69\",\"3.10\",\"3.73\",\"4.36\",\"6.03\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "2.34"
              },
              {
                "t": "l",
                "v": "3.40"
              },
              {
                "t": "l",
                "v": "1.08"
              },
              {
                "t": "l",
                "v": "2.69"
              },
              {
                "t": "l",
                "v": "3.10"
              },
              {
                "t": "l",
                "v": "3.73"
              },
              {
                "t": "l",
                "v": "4.36"
              },
              {
                "t": "l",
                "v": "6.03"
              }
            ]
          }
        ]
      }
    },
    "8bd74788-15": {
      "txt": "array(\".4038\",\".4915\",\".2196\",\".3377\",\".1678\",\".4150\",\".1158\",\".1889\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": ".4038"
              },
              {
                "t": "l",
                "v": ".4915"
              },
              {
                "t": "l",
                "v": ".2196"
              },
              {
                "t": "l",
                "v": ".3377"
              },
              {
                "t": "l",
                "v": ".1678"
              },
              {
                "t": "l",
                "v": ".4150"
              },
              {
                "t": "l",
                "v": ".1158"
              },
              {
                "t": "l",
                "v": ".1889"
              }
            ]
          }
        ]
      }
    },
    "fa365eb1-17": {
      "txt": "array(\"-0.2592\",\"0.1357\",\"-0.1071\",\"-0.04880\",\"-0.0434\",\"0.18\",\"-0.1372\",\"0.0349\",\"-0.234\",\"-0.276\",\"-0.13\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": -0.2592
              },
              {
                "t": "l",
                "v": 0.1357
              },
              {
                "t": "l",
                "v": -0.1071
              },
              {
                "t": "l",
                "v": -0.04880
              },
              {
                "t": "l",
                "v": -0.0434
              },
              {
                "t": "l",
                "v": 0.18
              },
              {
                "t": "l",
                "v": -0.1372
              },
              {
                "t": "l",
                "v": 0.0349
              },
              {
                "t": "l",
                "v": -0.234
              },
              {
                "t": "l",
                "v": -0.276
              },
              {
                "t": "l",
                "v": -0.13
              }
            ]
          }
        ]
      }
    }
  },
  "datasources": {
    "google_searchConsole-1": {
      "service": "google_searchConsole",
      "libraryAlias": "GoogleSearchConsoleStats(Last30Days)",
      "refreshInterval": 14400,
      "description": "See important metrics for your websites's keywords for the last 30 days. Originates from the Gallery.",
      "name": "Google Search Console Stats (Last 30 Days)",
      "type": "simple_rest",
      "format": "json",
      "props": {
        "body": "{\r\n\"startDate\": \"{date.add(-33).format('yyyy-MM-dd')}\", \r\n\"endDate\": \"{date.add(-2).format('yyyy-MM-dd')}\", \r\n\"dimensions\": [\"query\"],\r\n\"dimensionFilterGroups\": [\r\n{\r\n\"groupType\": \"and\",\r\n\"filters\": [\r\n{\r\n\"dimension\": \"query\",\r\n\"operator\": \"notContains\",\r\n\"expression\": \"{{ds.google_searchConsole.brandName}}\"\r\n}\r\n]\r\n}\r\n],\r\n \"rowLimit\":\"5000\"\r\n}",
        "method": "post",
        "endpoint_url": "https://www.googleapis.com/webmasters/v3/sites/{{ds.google_searchConsole.siteURL}}/searchAnalytics/query",
        "parameters": "[{\"name\":\"content-type\",\"value\":\"application/json\",\"type\":\"header\"}]"
      }
    }
  },
  "dsMappings": {
    "google_searchConsole-1": "860004eaf2620a0a9af2natceewzhere"
  },
  "services": [
    {
      "service": "google_searchConsole"
    }
  ],
  "datasourceConfigModel": [
    {
      "type": "select",
      "id": "ds.google_searchConsole.siteURL",
      "label": "Site URL",
      "description": "Select a Site URL from the drop-down list.",
      "isRequired": true,
      "urlEncode": true
    },
    {
      "type": "text",
      "id": "ds.google_searchConsole.brandName",
      "label": "Brand Name",
      "description": "Enter the name of your brand.",
      "isRequired": true,
      "urlEncode": true,
      "ghostText": "acme"
    }
  ],
  "queries": [
    {
      "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have right permission level to access the site data. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
      "connector": {
        "service": "google_searchConsole",
        "type": "simple_rest",
        "format": "json",
        "props": {
          "endpoint_url": "https://www.googleapis.com/webmasters/v3/sites",
          "method": "GET"
        }
      },
      "results": [
        {
          "propId": "ds.google_searchConsole.siteURL",
          "propField": "options",
          "labels": "/siteEntry/siteUrl[preceding-sibling::permissionLevel!='siteUnverifiedUser']",
          "values": "/siteEntry/siteUrl[preceding-sibling::permissionLevel!='siteUnverifiedUser']"
        }
      ]
    }
  ]
}