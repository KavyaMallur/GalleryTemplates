{
  "name": "Search Position Improvement Opportunities (Last 30 Days)",
  "description": "Change me.<br> Originates from the Gallery. (v1.0)",
  "sampleFormulas": {
    "29873860": {
      "txt": "\"and\"",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "l",
            "v": "and"
          }
        ]
      }
    },
    "0b94bee8-1": {
      "txt": "\"What queries are getting you listed on page 2 of Google? Pick 11 and 12 from the dropdowns to find out.\"",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "l",
            "v": "What queries are getting you listed on page 2 of Google? Pick 11 and 12 from the dropdowns to find out."
          }
        ]
      }
    },
    "151f2b70": {
      "txt": "\"Include rankings between\"",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "l",
            "v": "Include rankings between"
          }
        ]
      }
    },
    "ed363c47": {
      "txt": "array(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": 1
              },
              {
                "t": "l",
                "v": 2
              },
              {
                "t": "l",
                "v": 3
              },
              {
                "t": "l",
                "v": 4
              },
              {
                "t": "l",
                "v": 5
              },
              {
                "t": "l",
                "v": 6
              },
              {
                "t": "l",
                "v": 7
              },
              {
                "t": "l",
                "v": 8
              },
              {
                "t": "l",
                "v": 9
              },
              {
                "t": "l",
                "v": 10
              },
              {
                "t": "l",
                "v": 11
              },
              {
                "t": "l",
                "v": 12
              },
              {
                "t": "l",
                "v": 13
              },
              {
                "t": "l",
                "v": 14
              },
              {
                "t": "l",
                "v": 15
              },
              {
                "t": "l",
                "v": 16
              },
              {
                "t": "l",
                "v": 17
              },
              {
                "t": "l",
                "v": 18
              },
              {
                "t": "l",
                "v": 19
              },
              {
                "t": "l",
                "v": 20
              }
            ]
          }
        ]
      }
    },
    "9f15b8a0": {
      "txt": "array(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": 1
              },
              {
                "t": "l",
                "v": 2
              },
              {
                "t": "l",
                "v": 3
              },
              {
                "t": "l",
                "v": 4
              },
              {
                "t": "l",
                "v": 5
              },
              {
                "t": "l",
                "v": 6
              },
              {
                "t": "l",
                "v": 7
              },
              {
                "t": "l",
                "v": 8
              },
              {
                "t": "l",
                "v": 9
              },
              {
                "t": "l",
                "v": 10
              },
              {
                "t": "l",
                "v": 11
              },
              {
                "t": "l",
                "v": 12
              },
              {
                "t": "l",
                "v": 13
              },
              {
                "t": "l",
                "v": 14
              },
              {
                "t": "l",
                "v": 15
              },
              {
                "t": "l",
                "v": 16
              },
              {
                "t": "l",
                "v": 17
              },
              {
                "t": "l",
                "v": 18
              },
              {
                "t": "l",
                "v": 19
              },
              {
                "t": "l",
                "v": 20
              }
            ]
          }
        ]
      }
    },
    "6e3920f7b2d9e4ae320c723c5058ddaee44f3484": {
      "txt": "array(\"klipfolio\",\"klipfolio neuro\",\"klip gallery\",\"business dashboards\",\"saas\",\"klip bar chart\",\"klipfolio integrations\",\"kpi\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "klipfolio"
              },
              {
                "t": "l",
                "v": "klipfolio neuro"
              },
              {
                "t": "l",
                "v": "klip gallery"
              },
              {
                "t": "l",
                "v": "business dashboards"
              },
              {
                "t": "l",
                "v": "saas"
              },
              {
                "t": "l",
                "v": "klip bar chart"
              },
              {
                "t": "l",
                "v": "klipfolio integrations"
              },
              {
                "t": "l",
                "v": "kpi"
              }
            ]
          }
        ]
      }
    },
    "e3fa48b37ae52950a27f2b2b35ccb313aa09ab7a": {
      "txt": "array(\"2.34\",\"3.40\",\"1.08\",\"2.69\",\"3.10\",\"3.73\",\"4.36\",\"6.03\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "2.34"
              },
              {
                "t": "l",
                "v": "3.40"
              },
              {
                "t": "l",
                "v": "1.08"
              },
              {
                "t": "l",
                "v": "2.69"
              },
              {
                "t": "l",
                "v": "3.10"
              },
              {
                "t": "l",
                "v": "3.73"
              },
              {
                "t": "l",
                "v": "4.36"
              },
              {
                "t": "l",
                "v": "6.03"
              }
            ]
          }
        ]
      }
    },
    "daa0a64b-1": {
      "txt": "array(\"16621\",\"22958\",\"35070\",\"43899\",\"42282\",\"33775\",\"20238\",\"47902\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "16621"
              },
              {
                "t": "l",
                "v": "22958"
              },
              {
                "t": "l",
                "v": "35070"
              },
              {
                "t": "l",
                "v": "43899"
              },
              {
                "t": "l",
                "v": "42282"
              },
              {
                "t": "l",
                "v": "33775"
              },
              {
                "t": "l",
                "v": "20238"
              },
              {
                "t": "l",
                "v": "47902"
              }
            ]
          }
        ]
      }
    },
    "96fac462-3": {
      "txt": "array(\"6524.516129032258\",\"6050.322580645161\",\"2676.774193548387\",\"1297.4193548387098\",\"1228.3870967741934\",\"1196.1290322580644\",\"1112.258064516129\",\"849.0322580645161\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": 6524.516129032258
              },
              {
                "t": "l",
                "v": 6050.322580645161
              },
              {
                "t": "l",
                "v": 2676.774193548387
              },
              {
                "t": "l",
                "v": 1297.4193548387098
              },
              {
                "t": "l",
                "v": 1228.3870967741934
              },
              {
                "t": "l",
                "v": 1196.1290322580644
              },
              {
                "t": "l",
                "v": 1112.258064516129
              },
              {
                "t": "l",
                "v": 849.0322580645161
              }
            ]
          }
        ]
      }
    },
    "d753e768-5": {
      "txt": "array(\"0.0041597046321222506\",\"0.6226459551129393\",\"0.12894411379848889\",\"0.019127786216945157\",\"0.12105065219461106\",\"0.053243460876325865\",\"0.028775844734886563\",\"0.22469854212997284\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": 0.0041597046321222506
              },
              {
                "t": "l",
                "v": 0.6226459551129393
              },
              {
                "t": "l",
                "v": 0.12894411379848889
              },
              {
                "t": "l",
                "v": 0.019127786216945157
              },
              {
                "t": "l",
                "v": 0.12105065219461106
              },
              {
                "t": "l",
                "v": 0.053243460876325865
              },
              {
                "t": "l",
                "v": 0.028775844734886563
              },
              {
                "t": "l",
                "v": 0.22469854212997284
              }
            ]
          }
        ]
      }
    }
  },
  "datasources": {
    "google_searchConsole-1": {
      "service": "google_searchConsole",
      "libraryAlias": "GoogleSearchConsoleStats(Last30Days)",
      "refreshInterval": 14400,
      "description": "See important metrics for your websites's keywords for the last 30 days. Originates from the Gallery.",
      "name": "Google Search Console Stats (Last 30 Days)",
      "type": "simple_rest",
      "format": "json",
      "props": {
        "body": "{\r\n\"startDate\": \"{date.add(-32).format('yyyy-MM-dd')}\", \r\n\"endDate\": \"{date.add(-3).format('yyyy-MM-dd')}\", \r\n\"dimensions\": [\"query\"],\r\n\"rowLimit\":\"5000\"}",
        "method": "post",
        "endpoint_url": "https://www.googleapis.com/webmasters/v3/sites/{{ds.google_searchConsole.siteURL}}/searchAnalytics/query",
        "parameters": "[{\"name\":\"content-type\",\"value\":\"application/json\",\"type\":\"header\"}]"
      }
    }
  },
  "dsMappings": {
    "google_searchConsole-1": "860004eaf2620a0a9af2natceewzhere"
  },
  "services": [
    {
      "service": "google_searchConsole"
    }
  ],
  "datasourceConfigModel": [
    {
      "type": "select",
      "id": "ds.google_searchConsole.siteURL",
      "label": "Site URL",
      "description": "Select a Site URL from the drop-down list.",
      "isRequired": true,
      "urlEncode": true
    }
  ],
  "queries": [
    {
      "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have right permission level to access the site data. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
      "connector": {
        "service": "google_searchConsole",
        "type": "simple_rest",
        "format": "json",
        "props": {
          "endpoint_url": "https://www.googleapis.com/webmasters/v3/sites",
          "method": "GET"
        }
      },
      "results": [
        {
          "propId": "ds.google_searchConsole.siteURL",
          "propField": "options",
          "labels": "/siteEntry/siteUrl[preceding-sibling::permissionLevel!='siteUnverifiedUser']",
          "values": "/siteEntry/siteUrl[preceding-sibling::permissionLevel!='siteUnverifiedUser']"
        }
      ]
    }
  ],
  "uiVariables": [
    {
      "name": "gaMinRank",
      "value": "11"
    },
    {
      "name": "gaMaxRank",
      "value": "12"
    }
  ]
}