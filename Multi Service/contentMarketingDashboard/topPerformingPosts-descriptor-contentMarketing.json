{
  "name": "Top Performing Posts",
  "description": "How do you prove that your blog not only has a loyal following but is also converting leads? Look no further than this Andy Crestodina-inspired Klip that hones in on detailed metrics for each blog post.<br> Originates from the Gallery. (v1.0)",
  "sampleFormulas": {
    "7b57a084-2": {
      "txt": "\"Metric:\"",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "l",
            "v": "Metric:"
          }
        ]
      }
    },
    "e96428ba": {
      "txt": "\"Only include posts with more than:\"",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "l",
            "v": "Only include posts with more than:"
          }
        ]
      }
    },
    "c5a1d3f3": {
      "txt": "array(\"pageviews\",\"convRate\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "pageviews"
              },
              {
                "t": "l",
                "v": "convRate"
              }
            ]
          }
        ]
      }
    },
    "cda5888c": {
      "txt": "array(\"Pageviews\",\"Conversion Rate\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "Pageviews"
              },
              {
                "t": "l",
                "v": "Conversion Rate"
              }
            ]
          }
        ]
      }
    },
    "f992600e": {
      "txt": "\"pageviews.\"",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "l",
            "v": "pageviews."
          }
        ]
      }
    },
    "d248b26a-1": {
      "txt": "\"Pageviews\"",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "l",
            "v": "Pageviews"
          }
        ]
      }
    },
    "da93786d-2": {
      "txt": "array(\"9486\",\"8736\",\"8479\",\"7701\",\"6945\",\"5986\",\"4629\",\"3672\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "9486"
              },
              {
                "t": "l",
                "v": "8736"
              },
              {
                "t": "l",
                "v": "8479"
              },
              {
                "t": "l",
                "v": "7701"
              },
              {
                "t": "l",
                "v": "6945"
              },
              {
                "t": "l",
                "v": "5986"
              },
              {
                "t": "l",
                "v": "4629"
              },
              {
                "t": "l",
                "v": "3672"
              }
            ]
          }
        ]
      }
    },
    "e3c7f76f-3": {
      "txt": "array(\"5-strategies-for-becoming-a-mo\",\"top-workout-hacks\",\"7-productivity-hacks\",\"business-questions-you-should-\",\"social-media-dos-and-donts\",\"4-habits-of-morning-people\",\"most-influencial-leaders-2016\",\"3-management-mistakes-to-avoid\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "5-strategies-for-becoming-a-mo"
              },
              {
                "t": "l",
                "v": "top-workout-hacks"
              },
              {
                "t": "l",
                "v": "7-productivity-hacks"
              },
              {
                "t": "l",
                "v": "business-questions-you-should-"
              },
              {
                "t": "l",
                "v": "social-media-dos-and-donts"
              },
              {
                "t": "l",
                "v": "4-habits-of-morning-people"
              },
              {
                "t": "l",
                "v": "most-influencial-leaders-2016"
              },
              {
                "t": "l",
                "v": "3-management-mistakes-to-avoid"
              }
            ]
          }
        ]
      }
    },
    "9474fecd-19": {
      "txt": "array(\"/blog/5-strategies-for-becoming-a-more-positive-person\",\"/blog/top-workout-hacks\",\"/blog/7-productivity-hacks\",\"/blog/business-questions-you-should-ask-yourself\",\"/blog/social-media-dos-and-donts\",\"/blog/4-habits-of-morning-people\",\"/blog/most-influencial-leaders-2016\",\"/blog/3-management-mistakes-to-avoid\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "/blog/5-strategies-for-becoming-a-more-positive-person"
              },
              {
                "t": "l",
                "v": "/blog/top-workout-hacks"
              },
              {
                "t": "l",
                "v": "/blog/7-productivity-hacks"
              },
              {
                "t": "l",
                "v": "/blog/business-questions-you-should-ask-yourself"
              },
              {
                "t": "l",
                "v": "/blog/social-media-dos-and-donts"
              },
              {
                "t": "l",
                "v": "/blog/4-habits-of-morning-people"
              },
              {
                "t": "l",
                "v": "/blog/most-influencial-leaders-2016"
              },
              {
                "t": "l",
                "v": "/blog/3-management-mistakes-to-avoid"
              }
            ]
          }
        ]
      }
    },
    "636eb162-15": {
      "txt": "array(\"9486\",\"8736\",\"8479\",\"7701\",\"6945\",\"5986\",\"4629\",\"3672\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "9486"
              },
              {
                "t": "l",
                "v": "8736"
              },
              {
                "t": "l",
                "v": "8479"
              },
              {
                "t": "l",
                "v": "7701"
              },
              {
                "t": "l",
                "v": "6945"
              },
              {
                "t": "l",
                "v": "5986"
              },
              {
                "t": "l",
                "v": "4629"
              },
              {
                "t": "l",
                "v": "3672"
              }
            ]
          }
        ]
      }
    },
    "36098064-21": {
      "txt": "array(\"2127\",\"2748\",\"3612\",\"4858\",\"4648\",\"1262\",\"2196\",\"1921\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": "2127"
              },
              {
                "t": "l",
                "v": "2748"
              },
              {
                "t": "l",
                "v": "3612"
              },
              {
                "t": "l",
                "v": "4858"
              },
              {
                "t": "l",
                "v": "4648"
              },
              {
                "t": "l",
                "v": "1262"
              },
              {
                "t": "l",
                "v": "2196"
              },
              {
                "t": "l",
                "v": "1921"
              }
            ]
          }
        ]
      }
    },
    "cbea0a1b-23": {
      "txt": "array(\"0.22422517394054395\",\"0.31456043956043955\",\"0.4259936313244486\",\"0.6308271653032074\",\"0.6692584593232541\",\"0.21082525893752088\",\"0.474400518470512\",\"0.5231481481481481\")",
      "src": {
        "t": "expr",
        "v": false,
        "c": [
          {
            "t": "f",
            "v": "array",
            "c": [
              {
                "t": "l",
                "v": 0.22422517394054395
              },
              {
                "t": "l",
                "v": 0.31456043956043955
              },
              {
                "t": "l",
                "v": 0.4259936313244486
              },
              {
                "t": "l",
                "v": 0.6308271653032074
              },
              {
                "t": "l",
                "v": 0.6692584593232541
              },
              {
                "t": "l",
                "v": 0.21082525893752088
              },
              {
                "t": "l",
                "v": 0.474400518470512
              },
              {
                "t": "l",
                "v": 0.5231481481481481
              }
            ]
          }
        ]
      }
    }
  },
  "datasources": {
    "googleAnalytics-01": {
      "service": "google_analytics",
      "libraryAlias": "GABlogPageviewsLast365Days",
      "name": "Google Analytics Blog Pageviews (Last 365 Days)",
      "description": "Track blog pageviews, users and sessions over the last 365 days. Originates from the Gallery.",
      "type": "google_analytics",
      "format": "csv",
      "refreshInterval": 14400,
      "props": {
        "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:pagePath&metrics=ga:users,ga:sessions,ga:pageviews&start-date=365daysAgo&end-date=today&max-results=10000&filters=ga:pagePath=~/blog/*",
        "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:pagePath&metrics=ga:users,ga:sessions,ga:pageviews&start-date=365daysAgo&end-date=today&max-results=10000&filters=ga:pagePath=~/blog/*",
        "max_pages": "10",
        "mode": "Advanced",
        "profile": "{{ds.google_analytics.profileId}}"
      }
    },
    "googleAnalytics-02": {
      "service": "google_analytics",
      "libraryAlias": "GAReverseGoalPathLast365Days",
      "name": "Google Analytics Goal Completion (Last 365 Days)",
      "description": "Track your Google Analytics goal completions over the last 365 days. Originates from the Gallery.",
      "type": "google_analytics",
      "format": "csv",
      "refreshInterval": 14400,
      "props": {
        "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date=365daysAgo&end-date=today&metrics=ga:goal{{ds.google_analytics.goalId}}Completions&dimensions=ga:goalCompletionLocation,ga:goalPreviousStep1&sort=-ga:goal{{ds.google_analytics.goalId}}Completions&max-results=10000",
        "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date=365daysAgo&end-date=today&metrics=ga:goal{{ds.google_analytics.goalId}}Completions&dimensions=ga:goalCompletionLocation,ga:goalPreviousStep1&sort=-ga:goal{{ds.google_analytics.goalId}}Completions&max-results=10000",
        "max_pages": "10",
        "mode": "Advanced",
        "profile": "{{ds.google_analytics.profileId}}"
      }
    }
  },
  "dsMappings": {
    "googleAnalytics-01": "1cdac7dca59fddcd8861niktawuzhere",
    "googleAnalytics-02": "b5d194e6a7e2f649f99bniktawuzhere"
  },
  "services": [
    {
      "service": "google_analytics"
    }
  ],
  "datasourceConfigModel": [
    {
      "type": "select",
      "id": "ds.google_analytics.accountId",
      "label": "Analytics Account",
      "description": "Select your Analytics Account, Web Property and Analytics Profile from the lists below.",
      "isRequired": true,
      "onChangeQueries": [
        "q2"
      ]
    },
    {
      "type": "select",
      "id": "ds.google_analytics.webPropertyId",
      "label": "Web Property",      
      "isRequired": true,
      "onChangeQueries": [
        "q3"
      ]
    },
    {
      "type": "select",
      "id": "ds.google_analytics.profileId",
      "label": "Analytics Profile",
      "isRequired": true,
      "onChangeQueries": [
        "q4"
      ]
    },
    {
      "type": "select",
      "id": "ds.google_analytics.goalId",
      "label": "Goal",
      "description": "Select the goal that indicates someone subscribed to your blog.",
      "isRequired": true
    }
  ],
  "queries": [
    {
      "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
      "connector": {
        "service": "google_analytics",
        "type": "simple_rest",
        "format": "json",
        "props": {
          "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts",
          "method": "GET"
        }
      },
      "results": [
        {
          "propId": "ds.google_analytics.accountId",
          "propField": "options",
          "labels": "/items/name",
          "values": "/items/id"
        }
      ]
    },
    {
      "id": "q2",
      "connector": {
        "service": "google_analytics",
        "type": "simple_rest",
        "format": "json",
        "props": {
          "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/{{ds.google_analytics.accountId}}/webproperties",
          "method": "GET"
        }
      },
      "results": [
        {
          "propId": "ds.google_analytics.webPropertyId",
          "propField": "options",
          "labels": "/items/name",
          "values": "/items/id"
        }
      ]
    },
    {
      "id": "q3",
      "connector": {
        "service": "google_analytics",
        "type": "simple_rest",
        "format": "json",
        "props": {
          "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/{{ds.google_analytics.accountId}}/webproperties/{{ds.google_analytics.webPropertyId}}/profiles",
          "method": "GET"
        }
      },
      "results": [
        {
          "propId": "ds.google_analytics.profileId",
          "propField": "options",
          "labels": "/items/name",
          "values": "/items/id"
        }
      ]
    },
    {
      "id": "q4",
      "connector": {
        "service": "google_analytics",
        "type": "simple_rest",
        "format": "json",
        "props": {
          "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/{{ds.google_analytics.accountId}}/webproperties/{{ds.google_analytics.webPropertyId}}/profiles/{{ds.google_analytics.profileId}}/goals",
          "method": "GET"
        }
      },
      "results": [
        {
          "propId": "ds.google_analytics.goalId",
          "propField": "options",
          "labels": "/items/name[preceding-sibling::active='true']",
          "values": "/items/id[preceding-sibling::active='true']"
        }
      ]
    }
  ],
  "klipConfigModel": [
    {
      "type": "select",
      "id": "klip.google_analytics.column",
      "label": "Answer",
      "description": "When someone subscribes to your blog, do you send them to a thank you page?",
      "isRequired": true,
      "options": [
        {
          "value": "A:A",
          "label": "Yes"
        },
        {
          "value": "B:B",
          "label": "No"
        }
      ]
    }
  ],
  "uiVariables": [
    {
      "name": "gaMetricDropdown",
      "value": "pageviews"
    },
    {
      "name": "gaPageviewsFilter",
      "value": "100"
    }
  ]
}