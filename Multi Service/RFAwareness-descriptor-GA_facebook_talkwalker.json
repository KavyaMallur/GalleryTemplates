{
    "name": "Awareness",
    "description": "Are people hearing of my brand on the web? Let your monthly social media metrics, press and brand mentions, referring links, and branded search volume give you the answer. Originates from the Gallery.",
    "datasources": {
        "facebook-1": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Posts (Column 5)",
            "libraryAlias": "FacebookPosts(Column5)",
            "description": "Get the unique impressions of the posts you had last month. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-1).startOfMonth}&until={date.addMonths(-1).endOfMonth}&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-1).startOfMonth}&until={date.addMonths(-1).endOfMonth}&limit=100",
                "qtype": "Graph API"
            }
        },
        "facebook-2": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Posts (Column 4)",
            "libraryAlias": "FacebookPosts(Column4)",
            "description": "Get the unique impressions of the posts you had 2 months ago. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=created_time,insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-2).startOfMonth}&until={date.addMonths(-2).endOfMonth}&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=created_time,insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-2).startOfMonth}&until={date.addMonths(-2).endOfMonth}&limit=100",
                "qtype": "Graph API"
            }
        },
        "facebook-3": {
            "service": "facebook",
            "type": "facebook",
            "name": "FB Posts (Column 6)",
            "libraryAlias": "FBPosts(Column6)",
            "description": "Get the unique impressions of the posts you have this month. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.startOfMonth}&until={date.endOfMonth}&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.startOfMonth}&until={date.endOfMonth}&limit=100",
                "qtype": "Graph API"
            }
        },
        "facebook-4": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Fans (Column 5 & 6)",
            "libraryAlias": "FacebookFans(Column5&6)",
            "description": "Retrieve the daily number your page fans for current and last months. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans/lifetime?since={date.addMonths(-1).startOfMonth.format()}&until={date.today}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans/lifetime?since={date.addMonths(-1).startOfMonth.format()}&until={date.today}",
                "qtype": "Graph API"
            }
        },
        "facebook-5": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Fans (Column 3 & 4)",
            "libraryAlias": "FacebookFans(Column3&4)",
            "description": "Retrieve the daily number your page fans 2 and 3 months ago. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans/lifetime?since={date.addMonths(-3).startOfMonth.format()}&until={date.addMonths(-2).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans/lifetime?since={date.addMonths(-3).startOfMonth.format()}&until={date.addMonths(-2).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-6": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Fans (Column 1 & 2)",
            "libraryAlias": "FacebookFans(Column1&2)",
            "description": "Retrieve the daily number your page fans 4 and 5 months ago. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans/lifetime?since={date.addMonths(-5).startOfMonth.format()}&until={date.addMonths(-4).endOfMonth.format()}",
                "graphUrl": "https://graph.facebook.com/{{ds.facebook.pageId}}/insights/page_fans/lifetime?since={date.addMonths(-5).startOfMonth.format()}&until={date.addMonths(-4).endOfMonth.format()}",
                "qtype": "Graph API"
            }
        },
        "facebook-7": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Posts (Column 3)",
            "libraryAlias": "FacebookPosts(Column3)",
            "description": "Get the unique impressions of the posts you had 3 months ago. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-3).startOfMonth}&until={date.addMonths(-3).endOfMonth}&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-3).startOfMonth}&until={date.addMonths(-3).endOfMonth}&limit=100",
                "qtype": "Graph API"
            }
        },
        "facebook-8": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Posts (Column 2)",
            "libraryAlias": "FacebookPosts(Column2)",
            "description": "Get the unique impressions of the posts you had 4 months ago. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-4).startOfMonth}&until={date.addMonths(-4).endOfMonth}&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-4).startOfMonth}&until={date.addMonths(-4).endOfMonth}&limit=100",
                "qtype": "Graph API"
            }
        },
        "facebook-9": {
            "service": "facebook",
            "type": "facebook",
            "name": "Facebook Posts (Column 1)",
            "libraryAlias": "FacebookPosts(Column1)",
            "description": "Get the unique impressions of the posts you had 5 months ago. Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-5).startOfMonth}&until={date.addMonths(-5).endOfMonth}&limit=100",
                "graphUrl": "https://graph.facebook.com/v2.5/{{ds.facebook.pageId}}/posts/?fields=insights.metric(post_story_adds,post_impressions_unique)&since={date.addMonths(-5).startOfMonth}&until={date.addMonths(-5).endOfMonth}&limit=100",
                "qtype": "Graph API"
            }
        },
        "talkwalker": {
            "service": "talkwalker",
            "type": "simple_rest",
            "name": "Talkwalker Brand Mentions",
            "libraryAlias": "TalkwalkerBrandMentions",
            "description": "Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://api.talkwalker.com/api/v1/search/histogram/published?q={{ds.talkwalker.sentimentQuery}}&time_range=30d&access_token=9b37abf3-2f84-406b-8278-3397ce98f6f1_8LtNJFevpv6hJi5TfM3y-2v8O05WlqhYABzhPnwNfR.RgqmrxP0-xkySnO12mb3DVW.8N4-X0OFP-pHSdmWRC3O88WigI3wYIsr6V2eCI5wfiHotlIZ23SrqAx-hKt44DHW-YPAkcqblDqXxQqCNgS9uGW6uy7oJBtV6nmfDDQ0&timezone=UTC"
            }
        },
        "google_analytics": {
            "service": "google_analytics",
            "type": "google_analytics",
            "name": "Google Analytics Branded Search (Last 6 Months)",
            "libraryAlias": "GoogleAnalyticsBrandedSearch(Last6Months)",
            "description": "Originates from the Gallery.",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date={date.addMonths(-5).format()}&end-date={date.today.format()}&metrics=ga:users,ga:bounceRate,ga:goalStartsAll,ga:avgTimeOnPage,ga:sessions&dimensions=ga:landingPagePath,ga:yearMonth&filters=ga:landingPagePath=={{ds.google_analytics.pagePath1}}&segment=gaid::-5",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&start-date={date.addMonths(-5).format()}&end-date={date.today.format()}&metrics=ga:users,ga:bounceRate,ga:goalStartsAll,ga:avgTimeOnPage,ga:sessions&dimensions=ga:landingPagePath,ga:yearMonth&filters=ga:landingPagePath=={{ds.google_analytics.pagePath1}}&segment=gaid::-5",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}"
            }
        },
        "twitter": {
            "service": "twitter",
            "type": "simple_rest",
            "name": "Twitter Followers",
            "libraryAlias": "TwitterFollowers",
            "description": "Originates from the Gallery.",
            "format": "json",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://api.twitter.com/1.1/users/lookup.json?screen_name={{ds.twitter.screenName}}"
            }
        }
    },
    "dsMappings": {
        "facebook-1": "002d7ac9baca90d2b902spilkemosewa",
        "facebook-2": "66b40b23f51450efa4bcspilkemosewa",
        "facebook-3": "bad3aa3e2c9a81776b0espilkemosewa",
        "facebook-4": "26509aed38a570146744spilkemosewa",
        "facebook-5": "c35d606386e9a65856f8spilkemosewa",
        "facebook-6": "42bfdd2e6476b84baacespilkemosewa",
        "facebook-7": "8532a0bf4b9caf7f72e5spilkemosewa",
        "facebook-8": "d0cc45bb8eb389d05a08spilkemosewa",
        "facebook-9": "ceee6ad493fb407d6a8aspilkemosewa",
        "talkwalker": "7cbd205b2c4cb56c12a3spilkemosewa",
        "google_analytics": "fb1aab94dc7a68521384spilkemosewa",
        "twitter": "66bcbfd9e0efda44134fspilkemosewa"
    },
    "services": [{
        "service": "facebook"
    }, {
        "service": "talkwalker"
    }, {
        "service": "google_analytics"
    }, {
        "service": "twitter"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.facebook.pageId",
        "label": "Facebook Page",
        "description": "Select your Facebook company page and your Google Analytics account.",
        "isRequired": true,
        "onChangeQueries": ["q2"]
    }, {
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Analytics Account",
        "isRequired": true
    }, {
        "type": "text",
        "id": "ds.google_analytics.pagePath1",
        "label": "Homepage Path",
        "ghostText": "/index.php",
        "description": "Enter the homepage path for your chosen Google Analytics account. <a href='https://support.klipfolio.com/hc/en-us/articles/218311437#pagepath' target='_blank'>Need help?</a>",
        "ghostText": "/home.php",
        "isRequired": false
    }, {
        "type": "text",
        "id": "ds.talkwalker.sentimentQuery",
        "label": "Company Name",
        "description": "Enter your company name and Twitter handle: <i>do <b>not</b> include the @ symbol</i>.",
        "ghostText": "acmeinc",
        "isRequired": true
    }, {
        "type": "text",
        "id": "ds.twitter.screenName",
        "label": "Twitter Handle",
        "ghostText": "acmeinc",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "From time to time, your OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "facebook",
            "type": "facebook",
            "format": "json",
            "props": {
                "endpoint_url": "https://graph.facebook.com/v2.5/me/accounts?fields=name,id",
                "method": "GET",
                "qtype": "Graph API"
            }
        },
        "results": [{
            "propId": "ds.facebook.pageId",
            "propField": "options",
            "labels": "/data/name",
            "values": "/data/id"
        }]
    }, {
        "id": "q2",
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }]
}
