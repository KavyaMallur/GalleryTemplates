{
    "name": "Rand Fishkin Returning Visit",
    "description": "Returning visitors are the crowning glory of your website. Discover key metrics on how often leads are coming back to your site, how much they are browsing (pages per visit) and average time on site. Originates from the Gallery.",
    "sampleFormulas": {
        "e6678aa7-1": {
            "txt": "\"https://static.klipfolio.com/images/rand-fishkin-dashboard/returning-visits.png\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "https://static.klipfolio.com/images/rand-fishkin-dashboard/returning-visits.png"
                }]
            }
        },
        "c0dd999c-11": {
            "txt": "array(\" \",\"2nd or 3rd Visit\",\"4th to 9th Visit\",\"10+ Visits\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": " "
                    }, {
                        "t": "l",
                        "v": "2nd or 3rd Visit"
                    }, {
                        "t": "l",
                        "v": "4th to 9th Visit"
                    }, {
                        "t": "l",
                        "v": "10+ Visits"
                    }]
                }]
            }
        },
        "98b626f2-5": {
            "txt": "array(\"Oct 15\",\"45279.5999999999985448084771633148193359375\",\"24507.5999999999985448084771633148193359375\",\"32589.5999999999985448084771633148193359375\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Oct 15"
                    }, {
                        "t": "l",
                        "v": "45279.5999999999985448084771633148193359375"
                    }, {
                        "t": "l",
                        "v": "24507.5999999999985448084771633148193359375"
                    }, {
                        "t": "l",
                        "v": "32589.5999999999985448084771633148193359375"
                    }]
                }]
            }
        },
        "b47fb436-3": {
            "txt": "array(\"Nov 15\",\"52060.39999999999417923390865325927734375\",\"26352.199999999997089616954326629638671875\",\"37202.199999999997089616954326629638671875\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Nov 15"
                    }, {
                        "t": "l",
                        "v": "52060.39999999999417923390865325927734375"
                    }, {
                        "t": "l",
                        "v": "26352.199999999997089616954326629638671875"
                    }, {
                        "t": "l",
                        "v": "37202.199999999997089616954326629638671875"
                    }]
                }]
            }
        },
        "69c41d79-3": {
            "txt": "array(\"\",\"0.1497539730916349898226513914778479374945163726806640625\",\"0.0752664479590004209530462730981525965034961700439453125\",\"0.141535950119056341822698641408351249992847442626953125\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": ""
                    }, {
                        "t": "l",
                        "v": "0.1497539730916349898226513914778479374945163726806640625"
                    }, {
                        "t": "l",
                        "v": "0.0752664479590004209530462730981525965034961700439453125"
                    }, {
                        "t": "l",
                        "v": "0.141535950119056341822698641408351249992847442626953125"
                    }]
                }]
            }
        },
        "11665a47-1": {
            "txt": "array(\"Dec 15\",\"45164\",\"21001.39999999999781721271574497222900390625\",\"28242.199999999997089616954326629638671875\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Dec 15"
                    }, {
                        "t": "l",
                        "v": "45164"
                    }, {
                        "t": "l",
                        "v": "21001.39999999999781721271574497222900390625"
                    }, {
                        "t": "l",
                        "v": "28242.199999999997089616954326629638671875"
                    }]
                }]
            }
        },
        "1956fed8-5": {
            "txt": "array(\"\",\"-0.132469208842037222684240305170533247292041778564453125\",\"-0.203049460766084044482937542852596379816532135009765625\",\"-0.2408459714748052704624825537393917329609394073486328125\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": ""
                    }, {
                        "t": "l",
                        "v": "-0.132469208842037222684240305170533247292041778564453125"
                    }, {
                        "t": "l",
                        "v": "-0.203049460766084044482937542852596379816532135009765625"
                    }, {
                        "t": "l",
                        "v": "-0.2408459714748052704624825537393917329609394073486328125"
                    }]
                }]
            }
        },
        "40522795-13": {
            "txt": "array(\"Jan 16\",\"34744.27999999999883584678173065185546875\",\"16029.8199999999997089616954326629638671875\",\"19263.419999999998253770172595977783203125\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Jan 16"
                    }, {
                        "t": "l",
                        "v": "34744.27999999999883584678173065185546875"
                    }, {
                        "t": "l",
                        "v": "16029.8199999999997089616954326629638671875"
                    }, {
                        "t": "l",
                        "v": "19263.419999999998253770172595977783203125"
                    }]
                }]
            }
        },
        "0c52bde7-7": {
            "txt": "array(\"\",\"-0.2307085289168364361511720517228241078555583953857421875\",\"-0.23672612302036999398779926195857115089893341064453125\",\"-0.317920700228735697567827855891664512455463409423828125\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": ""
                    }, {
                        "t": "l",
                        "v": "-0.2307085289168364361511720517228241078555583953857421875"
                    }, {
                        "t": "l",
                        "v": "-0.23672612302036999398779926195857115089893341064453125"
                    }, {
                        "t": "l",
                        "v": "-0.317920700228735697567827855891664512455463409423828125"
                    }]
                }]
            }
        },
        "8fb7ccb0-15": {
            "txt": "array(\"Feb 16\",\"24050.46000000000276486389338970184326171875\",\"10419.88000000000101863406598567962646484375\",\"13198.293999999999869032762944698333740234375\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Feb 16"
                    }, {
                        "t": "l",
                        "v": "24050.46000000000276486389338970184326171875"
                    }, {
                        "t": "l",
                        "v": "10419.88000000000101863406598567962646484375"
                    }, {
                        "t": "l",
                        "v": "13198.293999999999869032762944698333740234375"
                    }]
                }]
            }
        },
        "c715f4f1-1": {
            "txt": "array(\"\",\"-0.307786490323011363567928810880403034389019012451171875\",\"-0.34996899528503744303264966220012865960597991943359375\",\"-0.31485198370798117561975004718988202512264251708984375\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": ""
                    }, {
                        "t": "l",
                        "v": "-0.307786490323011363567928810880403034389019012451171875"
                    }, {
                        "t": "l",
                        "v": "-0.34996899528503744303264966220012865960597991943359375"
                    }, {
                        "t": "l",
                        "v": "-0.31485198370798117561975004718988202512264251708984375"
                    }]
                }]
            }
        },
        "1049eb9b-17": {
            "txt": "array(\"Mar 16\",\"23441\",\"10586\",\"12019\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": "Mar 16"
                    }, {
                        "t": "l",
                        "v": "23441"
                    }, {
                        "t": "l",
                        "v": "10586"
                    }, {
                        "t": "l",
                        "v": "12019"
                    }]
                }]
            }
        },
        "12640ef3-3": {
            "txt": "array(\"\",\"-0.0253408874508014685111856323374013300053775310516357421875\",\"0.0159426020261268820699118720085607492364943027496337890625\",\"-0.08935200261488339401605429657138301990926265716552734375\")",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "f",
                    "v": "array",
                    "c": [{
                        "t": "l",
                        "v": ""
                    }, {
                        "t": "l",
                        "v": "-0.0253408874508014685111856323374013300053775310516357421875"
                    }, {
                        "t": "l",
                        "v": "0.0159426020261268820699118720085607492364943027496337890625"
                    }, {
                        "t": "l",
                        "v": "-0.08935200261488339401605429657138301990926265716552734375"
                    }]
                }]
            }
        },
        "6589b869-13": {
            "txt": "\"Avg. Browse Rate\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Avg. Browse Rate"
                }]
            }
        },
        "199d5dbb-2": {
            "txt": "\"3.3201984153031083\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 3.3201984153031083
                }]
            }
        },
        "d9f10915-9": {
            "txt": "\"3.4409416323565027\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 3.4409416323565027
                }]
            }
        },
        "fa8d06a4-7": {
            "txt": "\"0.0363662654909048532747561921496526338160037994384765625\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.0363662654909048532747561921496526338160037994384765625"
                }]
            }
        },
        "a557aa55-5": {
            "txt": "\"3.561096215446672\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 3.561096215446672
                }]
            }
        },
        "27f72dcb-3": {
            "txt": "\"0.03491909945821498884033218246258911676704883575439453125\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.03491909945821498884033218246258911676704883575439453125"
                }]
            }
        },
        "2a5c9a14-4": {
            "txt": "\"3.546803962097012\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 3.546803962097012
                }]
            }
        },
        "11297bb7-11": {
            "txt": "\"-0.004013442065301630300167001763611551723442971706390380859375\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "-0.004013442065301630300167001763611551723442971706390380859375"
                }]
            }
        },
        "cf3c958c-6": {
            "txt": "\"3.589180012776713\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 3.589180012776713
                }]
            }
        },
        "5ecf9562-5": {
            "txt": "\"0.011947672082402445437043780884778243489563465118408203125\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.011947672082402445437043780884778243489563465118408203125"
                }]
            }
        },
        "f4af013a-8": {
            "txt": "\"3.446105944443238\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 3.446105944443238
                }]
            }
        },
        "1af3c927-7": {
            "txt": "\"-0.03986260589442762458656233093279297463595867156982421875\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "-0.03986260589442762458656233093279297463595867156982421875"
                }]
            }
        },
        "295a5c00": {
            "txt": "\"Avg. Time on Site\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "Avg. Time on Site"
                }]
            }
        },
        "e769ecc2-11": {
            "txt": "\"210.21511470365354\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 210.21511470365354
                }]
            }
        },
        "0b5b55ef-9": {
            "txt": "\"139.39532834580217\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 139.39532834580217
                }]
            }
        },
        "cb338da1-7": {
            "txt": "\"-0.336891980663179768651360745934653095901012420654296875\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "-0.336891980663179768651360745934653095901012420654296875"
                }]
            }
        },
        "d0c24f15-5": {
            "txt": "\"392.84474751197934\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 392.84474751197934
                }]
            }
        },
        "94852781-3": {
            "txt": "\"1.818205977014076157871613759198226034641265869140625\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "1.818205977014076157871613759198226034641265869140625"
                }]
            }
        },
        "65eb3c2a": {
            "txt": "\"138.53728224826742\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 138.53728224826742
                }]
            }
        },
        "ae2207d8-1": {
            "txt": "\"-0.64734851840155283042577138985507190227508544921875\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "-0.64734851840155283042577138985507190227508544921875"
                }]
            }
        },
        "605a6b88": {
            "txt": "\"134.63156720402554\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 134.63156720402554
                }]
            }
        },
        "68ac31d2-9": {
            "txt": "\"-0.028192519593697451529834552275133319199085235595703125\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "-0.028192519593697451529834552275133319199085235595703125"
                }]
            }
        },
        "9eea8197": {
            "txt": "\"209.19872495805785\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": 209.19872495805785
                }]
            }
        },
        "a47fa854-11": {
            "txt": "\"0.5538608760383108009506258895271457731723785400390625\"",
            "src": {
                "t": "expr",
                "v": false,
                "c": [{
                    "t": "l",
                    "v": "0.5538608760383108009506258895271457731723785400390625"
                }]
            }
        }
    },
    "datasources": {
        "googleAnalytics-01": {
            "service": "google_analytics",
            "libraryAlias": "GASessions2nd&3rdVisit(6 Months)",
            "name": "Google Analytics Sessions 2nd & 3rd Visit (6 Months)",
            "description": ". Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount<>2_3&max-results=10000",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount<>2_3&max-results=10000",
                "max_pages": "2",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}"
            }
        },
        "googleAnalytics-02": {
            "service": "google_analytics",
            "libraryAlias": "GASessions4thto9thVisit(6 Months)",
            "name": "Google Analytics Sessions 4th - 9th Visit (6 Months)",
            "description": ". Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount<>4_10&max-results=10000",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount<>4_10&max-results=10000",
                "max_pages": "2",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}"
            }
        },
        "googleAnalytics-03": {
            "service": "google_analytics",
            "libraryAlias": "GASessions10+Visit(6 Months)",
            "name": "Google Analytics Sessions 10+ Visit (6 Months)",
            "description": ". Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount>10&max-results=10000",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount>10&max-results=10000",
                "max_pages": "2",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}"
            }
        },
        "googleAnalytics-04": {
            "service": "google_analytics",
            "libraryAlias": "GAMetricsForReturningVisits(6 Months)",
            "name": "Google Analytics Metrics for Returning Visitors (6 Months)",
            "description": ". Originates from the Gallery.",
            "type": "google_analytics",
            "format": "csv",
            "refreshInterval": 14400,
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions,ga:pageviewsPerSession,ga:avgTimeOnPage&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount>1&max-results=10000",
                "advancedQuery": "https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{{ds.google_analytics.profileId}}&dimensions=ga:yearMonth&metrics=ga:sessions,ga:pageviewsPerSession,ga:avgTimeOnPage&start-date={date.addMonths(-5).startOfMonth}&end-date={date.today}&segment=sessions::condition::ga:sessionCount>1&max-results=10000",
                "max_pages": "2",
                "mode": "Advanced",
                "profile": "{{ds.google_analytics.profileId}}"
            }
        }
    },
    "dsMappings": {
        "googleAnalytics-01": "251a6df6f7a2eae2b98aKavyaMallur9",
        "googleAnalytics-02": "aed2504c1a6775c260e4KavyaMallur9",
        "googleAnalytics-03": "6e8288ba09f1a4eeaad2KavyaMallur9",
        "googleAnalytics-04": "707dc305fe5d40ac0d8bKavyaMallur9"
    },
    "services": [{
        "service": "google_analytics"
    }],
    "datasourceConfigModel": [{
        "type": "select",
        "id": "ds.google_analytics.profileId",
        "label": "Analytics Account",
        "description": "Select an Analytics Account from the drop-down list.",
        "isRequired": true
    }],
    "queries": [{
        "errorMessage": "Here are two suggestions:<br><br>1. Make sure you have access to your company's Google Analytics account. <br><br>2. From time to time, your Google OAuth token will expire. This token allows you to safely bring your data into Klipfolio. <a href='https://support.klipfolio.com/hc/en-us/articles/215548958-OAuth-token-expired-for-connected-accounts' target='_blank'>Find out how to re-authorize your OAuth tokens</a>.",
        "connector": {
            "service": "google_analytics",
            "type": "simple_rest",
            "format": "json",
            "props": {
                "endpoint_url": "https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?fields=items(id%2Cname%2Cpermissions%2CwebPropertyId%2CwebsiteUrl)",
                "method": "GET"
            }
        },
        "results": [{
            "propId": "ds.google_analytics.profileId",
            "propField": "options",
            "labels": "/items/name",
            "values": "/items/id"
        }]
    }]
}